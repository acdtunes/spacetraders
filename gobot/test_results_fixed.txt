=== RUN   TestFeatures
[1;37mFeature:[0m Container Entity
  As a daemon orchestrator
  I want to manage container lifecycle and state transitions
  So that background operations can be tracked and controlled
=== RUN   TestFeatures/Create_container_with_valid_data

  [1;37mScenario:[0m Create container with valid data        [1;30m# features/domain/container/container_entity.feature:10[0m
    [32mWhen[0m [32mI create a container with:[0m                 [1;30m# container_steps.go:633 -> *containerContext[0m
      | [36mid[0m             | [36mcontainer-1[0m |
      | [36mtype[0m           | [36mNAVIGATE[0m    |
      | [36mplayer_id[0m      | [36m1[0m           |
      | [36mmax_iterations[0m | [36m10[0m          |
    [32mThen[0m [32mthe container should have id "container-1"[0m [1;30m# container_steps.go:678 -> *containerContext[0m
    [32mAnd[0m [32mthe container should have type "NAVIGATE"[0m   [1;30m# container_steps.go:679 -> *containerContext[0m
    [32mAnd[0m [32mthe container should have player_id 1[0m       [1;30m# container_steps.go:680 -> *containerContext[0m
    [32mAnd[0m [32mthe container should have max_iterations 10[0m [1;30m# container_steps.go:681 -> *containerContext[0m
    [32mAnd[0m [32mthe container should have status "PENDING"[0m  [1;30m# container_steps.go:682 -> *containerContext[0m
    [32mAnd[0m [32mthe container current_iteration should be 0[0m [1;30m# container_steps.go:683 -> *containerContext[0m
    [32mAnd[0m [32mthe container restart_count should be 0[0m     [1;30m# container_steps.go:684 -> *containerContext[0m
=== RUN   TestFeatures/Create_container_with_infinite_iterations

  [1;37mScenario:[0m Create container with infinite iterations [1;30m# features/domain/container/container_entity.feature:24[0m
    [32mWhen[0m [32mI create a container with max_iterations -1[0m  [1;30m# container_steps.go:634 -> *containerContext[0m
    [32mThen[0m [32mthe container should have max_iterations -1[0m  [1;30m# container_steps.go:681 -> *containerContext[0m
    [32mAnd[0m [32mthe container should continue running[0m         [1;30m# container_steps.go:690 -> *containerContext[0m
=== RUN   TestFeatures/Create_container_with_metadata

  [1;37mScenario:[0m Create container with metadata                                       [1;30m# features/domain/container/container_entity.feature:29[0m
    [32mWhen[0m [32mI create a container with metadata:[0m                                     [1;30m# container_steps.go:635 -> *containerContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36mdestination[0m | [36mX1-B2[0m  |
    [32mThen[0m [32mthe container metadata should contain "ship_symbol" with value "SHIP-1"[0m [1;30m# container_steps.go:692 -> *containerContext[0m
    [32mAnd[0m [32mthe container metadata should contain "destination" with value "X1-B2"[0m   [1;30m# container_steps.go:692 -> *containerContext[0m
=== RUN   TestFeatures/Start_container_from_pending

  [1;37mScenario:[0m Start container from pending            [1;30m# features/domain/container/container_entity.feature:40[0m
    [32mGiven[0m [32ma container in "PENDING" status[0m           [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI start the container[0m                      [1;30m# container_steps.go:647 -> *containerContext[0m
    [32mThen[0m [32mthe container should have status "RUNNING"[0m [1;30m# container_steps.go:682 -> *containerContext[0m
    [32mAnd[0m [32mthe container started_at should be set[0m      [1;30m# container_steps.go:685 -> *containerContext[0m
=== RUN   TestFeatures/Start_container_from_stopped

  [1;37mScenario:[0m Start container from stopped            [1;30m# features/domain/container/container_entity.feature:46[0m
    [32mGiven[0m [32ma container in "STOPPED" status[0m           [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI start the container[0m                      [1;30m# container_steps.go:647 -> *containerContext[0m
    [32mThen[0m [32mthe container should have status "RUNNING"[0m [1;30m# container_steps.go:682 -> *containerContext[0m
    [32mAnd[0m [32mthe container started_at should be set[0m      [1;30m# container_steps.go:685 -> *containerContext[0m
=== RUN   TestFeatures/Cannot_start_container_from_running

  [1;37mScenario:[0m Cannot start container from running                                         [1;30m# features/domain/container/container_entity.feature:52[0m
    [32mGiven[0m [32ma container in "RUNNING" status[0m                                               [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI attempt to start the container[0m                                               [1;30m# container_steps.go:648 -> *containerContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot start container in RUNNING state"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Cannot_start_container_from_completed

  [1;37mScenario:[0m Cannot start container from completed                                         [1;30m# features/domain/container/container_entity.feature:57[0m
    [32mGiven[0m [32ma container in "COMPLETED" status[0m                                               [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI attempt to start the container[0m                                                 [1;30m# container_steps.go:648 -> *containerContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot start container in COMPLETED state"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Complete_container_from_running

  [1;37mScenario:[0m Complete container from running           [1;30m# features/domain/container/container_entity.feature:62[0m
    [32mGiven[0m [32ma container in "RUNNING" status[0m             [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI complete the container[0m                     [1;30m# container_steps.go:649 -> *containerContext[0m
    [32mThen[0m [32mthe container should have status "COMPLETED"[0m [1;30m# container_steps.go:682 -> *containerContext[0m
    [32mAnd[0m [32mthe container stopped_at should be set[0m        [1;30m# container_steps.go:686 -> *containerContext[0m
=== RUN   TestFeatures/Cannot_complete_container_from_pending

  [1;37mScenario:[0m Cannot complete container from pending                                         [1;30m# features/domain/container/container_entity.feature:68[0m
    [32mGiven[0m [32ma container in "PENDING" status[0m                                                  [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI attempt to complete the container[0m                                               [1;30m# container_steps.go:650 -> *containerContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot complete container in PENDING state"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Fail_container_from_running

  [1;37mScenario:[0m Fail container from running                 [1;30m# features/domain/container/container_entity.feature:73[0m
    [32mGiven[0m [32ma container in "RUNNING" status[0m               [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI fail the container with error "Test error"[0m   [1;30m# container_steps.go:651 -> *containerContext[0m
    [32mThen[0m [32mthe container should have status "FAILED"[0m      [1;30m# container_steps.go:682 -> *containerContext[0m
    [32mAnd[0m [32mthe container stopped_at should be set[0m          [1;30m# container_steps.go:686 -> *containerContext[0m
    [32mAnd[0m [32mthe container last_error should be "Test error"[0m [1;30m# container_steps.go:688 -> *containerContext[0m
=== RUN   TestFeatures/Cannot_fail_container_from_completed

  [1;37mScenario:[0m Cannot fail container from completed                                         [1;30m# features/domain/container/container_entity.feature:80[0m
    [32mGiven[0m [32ma container in "COMPLETED" status[0m                                              [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI attempt to fail the container[0m                                                 [1;30m# container_steps.go:652 -> *containerContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot fail container in COMPLETED state"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Stop_container_from_running_transitions_to_stopping

  [1;37mScenario:[0m Stop container from running transitions to stopping [1;30m# features/domain/container/container_entity.feature:85[0m
    [32mGiven[0m [32ma container in "RUNNING" status[0m                       [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI stop the container[0m                                   [1;30m# container_steps.go:653 -> *containerContext[0m
    [32mThen[0m [32mthe container should have status "STOPPING"[0m            [1;30m# container_steps.go:682 -> *containerContext[0m
=== RUN   TestFeatures/Mark_stopped_finalizes_stop_transition

  [1;37mScenario:[0m Mark stopped finalizes stop transition  [1;30m# features/domain/container/container_entity.feature:90[0m
    [32mGiven[0m [32ma container in "STOPPING" status[0m          [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI mark the container as stopped[0m            [1;30m# container_steps.go:655 -> *containerContext[0m
    [32mThen[0m [32mthe container should have status "STOPPED"[0m [1;30m# container_steps.go:682 -> *containerContext[0m
    [32mAnd[0m [32mthe container stopped_at should be set[0m      [1;30m# container_steps.go:686 -> *containerContext[0m
=== RUN   TestFeatures/Cannot_mark_stopped_when_not_stopping

  [1;37mScenario:[0m Cannot mark stopped when not stopping                                              [1;30m# features/domain/container/container_entity.feature:96[0m
    [32mGiven[0m [32ma container in "RUNNING" status[0m                                                      [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI attempt to mark the container as stopped[0m                                            [1;30m# container_steps.go:656 -> *containerContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot mark stopped when not in stopping state"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Cannot_stop_already_completed_container

  [1;37mScenario:[0m Cannot stop already completed container                                      [1;30m# features/domain/container/container_entity.feature:101[0m
    [32mGiven[0m [32ma container in "COMPLETED" status[0m                                              [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI attempt to stop the container[0m                                                 [1;30m# container_steps.go:654 -> *containerContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot stop container in COMPLETED state"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Increment_iteration_advances_counter

  [1;37mScenario:[0m Increment iteration advances counter                   [1;30m# features/domain/container/container_entity.feature:110[0m
    [32mGiven[0m [32ma container in "RUNNING" status with current_iteration 0[0m [1;30m# container_steps.go:641 -> *containerContext[0m
    [32mWhen[0m [32mI increment the iteration[0m                                 [1;30m# container_steps.go:657 -> *containerContext[0m
    [32mThen[0m [32mthe container current_iteration should be 1[0m               [1;30m# container_steps.go:683 -> *containerContext[0m
=== RUN   TestFeatures/Cannot_increment_iteration_when_not_running

  [1;37mScenario:[0m Cannot increment iteration when not running                                     [1;30m# features/domain/container/container_entity.feature:115[0m
    [32mGiven[0m [32ma container in "PENDING" status[0m                                                   [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI attempt to increment the iteration[0m                                               [1;30m# container_steps.go:658 -> *containerContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot increment iteration in PENDING state"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Should_continue_with_infinite_iterations

  [1;37mScenario:[0m Should continue with infinite iterations                   [1;30m# features/domain/container/container_entity.feature:120[0m
    [32mGiven[0m [32ma container with max_iterations -1 and current_iteration 100[0m [1;30m# container_steps.go:644 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container should continue[0m                      [1;30m# container_steps.go:665 -> *containerContext[0m
    [32mThen[0m [32mthe result should be true[0m                                     [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Should_continue_with_remaining_iterations

  [1;37mScenario:[0m Should continue with remaining iterations                [1;30m# features/domain/container/container_entity.feature:125[0m
    [32mGiven[0m [32ma container with max_iterations 10 and current_iteration 5[0m [1;30m# container_steps.go:644 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container should continue[0m                    [1;30m# container_steps.go:665 -> *containerContext[0m
    [32mThen[0m [32mthe result should be true[0m                                   [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Should_not_continue_when_iterations_exhausted

  [1;37mScenario:[0m Should not continue when iterations exhausted             [1;30m# features/domain/container/container_entity.feature:130[0m
    [32mGiven[0m [32ma container with max_iterations 10 and current_iteration 10[0m [1;30m# container_steps.go:644 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container should continue[0m                     [1;30m# container_steps.go:665 -> *containerContext[0m
    [32mThen[0m [32mthe result should be false[0m                                   [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Multiple_iterations_in_sequence

  [1;37mScenario:[0m Multiple iterations in sequence                     [1;30m# features/domain/container/container_entity.feature:135[0m
    [32mGiven[0m [32ma container in "RUNNING" status with max_iterations 3[0m [1;30m# container_steps.go:642 -> *containerContext[0m
    [32mWhen[0m [32mI increment the iteration[0m                              [1;30m# container_steps.go:657 -> *containerContext[0m
    [32mAnd[0m [32mI increment the iteration[0m                               [1;30m# container_steps.go:657 -> *containerContext[0m
    [32mAnd[0m [32mI increment the iteration[0m                               [1;30m# container_steps.go:657 -> *containerContext[0m
    [32mThen[0m [32mthe container current_iteration should be 3[0m            [1;30m# container_steps.go:683 -> *containerContext[0m
    [32mAnd[0m [32mthe container should not continue running[0m               [1;30m# container_steps.go:691 -> *containerContext[0m
=== RUN   TestFeatures/Failed_container_can_be_restarted

  [1;37mScenario:[0m Failed container can be restarted                 [1;30m# features/domain/container/container_entity.feature:147[0m
    [32mGiven[0m [32ma container in "FAILED" status with restart_count 0[0m [1;30m# container_steps.go:643 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container can restart[0m                 [1;30m# container_steps.go:666 -> *containerContext[0m
    [32mThen[0m [32mthe result should be true[0m                            [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Container_at_max_restarts_cannot_be_restarted

  [1;37mScenario:[0m Container at max restarts cannot be restarted     [1;30m# features/domain/container/container_entity.feature:152[0m
    [32mGiven[0m [32ma container in "FAILED" status with restart_count 3[0m [1;30m# container_steps.go:643 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container can restart[0m                 [1;30m# container_steps.go:666 -> *containerContext[0m
    [32mThen[0m [32mthe result should be false[0m                           [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Running_container_cannot_be_restarted

  [1;37mScenario:[0m Running container cannot be restarted [1;30m# features/domain/container/container_entity.feature:157[0m
    [32mGiven[0m [32ma container in "RUNNING" status[0m         [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container can restart[0m     [1;30m# container_steps.go:666 -> *containerContext[0m
    [32mThen[0m [32mthe result should be false[0m               [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Reset_container_for_restart

  [1;37mScenario:[0m Reset container for restart                       [1;30m# features/domain/container/container_entity.feature:162[0m
    [32mGiven[0m [32ma container in "FAILED" status with restart_count 1[0m [1;30m# container_steps.go:643 -> *containerContext[0m
    [32mWhen[0m [32mI reset the container for restart[0m                    [1;30m# container_steps.go:659 -> *containerContext[0m
    [32mThen[0m [32mthe container should have status "PENDING"[0m           [1;30m# container_steps.go:682 -> *containerContext[0m
    [32mAnd[0m [32mthe container restart_count should be 2[0m               [1;30m# container_steps.go:684 -> *containerContext[0m
    [32mAnd[0m [32mthe container last_error should be nil[0m                [1;30m# container_steps.go:689 -> *containerContext[0m
    [32mAnd[0m [32mthe container stopped_at should be nil[0m                [1;30m# container_steps.go:687 -> *containerContext[0m
=== RUN   TestFeatures/Cannot_reset_container_exceeding_restart_limit

  [1;37mScenario:[0m Cannot reset container exceeding restart limit                    [1;30m# features/domain/container/container_entity.feature:170[0m
    [32mGiven[0m [32ma container in "FAILED" status with restart_count 3[0m                 [1;30m# container_steps.go:643 -> *containerContext[0m
    [32mWhen[0m [32mI attempt to reset the container for restart[0m                         [1;30m# container_steps.go:660 -> *containerContext[0m
    [32mThen[0m [32mthe operation should fail with error "container cannot be restarted"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Update_metadata_adds_new_keys

  [1;37mScenario:[0m Update metadata adds new keys                                        [1;30m# features/domain/container/container_entity.feature:179[0m
    [32mGiven[0m [32ma container with metadata:[0m                                             [1;30m# container_steps.go:636 -> *containerContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
    [32mWhen[0m [32mI update metadata with:[0m                                                 [1;30m# container_steps.go:661 -> *containerContext[0m
      | [36mdestination[0m | [36mX1-B2[0m |
    [32mThen[0m [32mthe container metadata should contain "ship_symbol" with value "SHIP-1"[0m [1;30m# container_steps.go:692 -> *containerContext[0m
    [32mAnd[0m [32mthe container metadata should contain "destination" with value "X1-B2"[0m   [1;30m# container_steps.go:692 -> *containerContext[0m
=== RUN   TestFeatures/Update_metadata_overwrites_existing_keys

  [1;37mScenario:[0m Update metadata overwrites existing keys                             [1;30m# features/domain/container/container_entity.feature:187[0m
    [32mGiven[0m [32ma container with metadata:[0m                                             [1;30m# container_steps.go:636 -> *containerContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
    [32mWhen[0m [32mI update metadata with:[0m                                                 [1;30m# container_steps.go:661 -> *containerContext[0m
      | [36mship_symbol[0m | [36mSHIP-2[0m |
    [32mThen[0m [32mthe container metadata should contain "ship_symbol" with value "SHIP-2"[0m [1;30m# container_steps.go:692 -> *containerContext[0m
=== RUN   TestFeatures/Get_metadata_value_returns_value_if_exists

  [1;37mScenario:[0m Get metadata value returns value if exists [1;30m# features/domain/container/container_entity.feature:194[0m
    [32mGiven[0m [32ma container with metadata:[0m                   [1;30m# container_steps.go:636 -> *containerContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
    [32mWhen[0m [32mI get metadata value for key "ship_symbol"[0m    [1;30m# container_steps.go:662 -> *containerContext[0m
    [32mThen[0m [32mthe metadata value should be "SHIP-1"[0m         [1;30m# container_steps.go:693 -> *containerContext[0m
    [32mAnd[0m [32mthe metadata key should exist[0m                  [1;30m# container_steps.go:694 -> *containerContext[0m
=== RUN   TestFeatures/Get_metadata_value_returns_false_if_not_exists

  [1;37mScenario:[0m Get metadata value returns false if not exists [1;30m# features/domain/container/container_entity.feature:201[0m
    [32mGiven[0m [32ma container with empty metadata[0m                  [1;30m# container_steps.go:637 -> *containerContext[0m
    [32mWhen[0m [32mI get metadata value for key "nonexistent"[0m        [1;30m# container_steps.go:662 -> *containerContext[0m
    [32mThen[0m [32mthe metadata key should not exist[0m                 [1;30m# container_steps.go:695 -> *containerContext[0m
=== RUN   TestFeatures/Is_running_returns_true_when_running

  [1;37mScenario:[0m Is running returns true when running [1;30m# features/domain/container/container_entity.feature:210[0m
    [32mGiven[0m [32ma container in "RUNNING" status[0m        [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container is running[0m     [1;30m# container_steps.go:667 -> *containerContext[0m
    [32mThen[0m [32mthe result should be true[0m               [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_running_returns_false_when_pending

  [1;37mScenario:[0m Is running returns false when pending [1;30m# features/domain/container/container_entity.feature:215[0m
    [32mGiven[0m [32ma container in "PENDING" status[0m         [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container is running[0m      [1;30m# container_steps.go:667 -> *containerContext[0m
    [32mThen[0m [32mthe result should be false[0m               [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_finished_returns_true_when_completed

  [1;37mScenario:[0m Is finished returns true when completed [1;30m# features/domain/container/container_entity.feature:220[0m
    [32mGiven[0m [32ma container in "COMPLETED" status[0m         [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container is finished[0m       [1;30m# container_steps.go:668 -> *containerContext[0m
    [32mThen[0m [32mthe result should be true[0m                  [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_finished_returns_true_when_failed

  [1;37mScenario:[0m Is finished returns true when failed [1;30m# features/domain/container/container_entity.feature:225[0m
    [32mGiven[0m [32ma container in "FAILED" status[0m         [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container is finished[0m    [1;30m# container_steps.go:668 -> *containerContext[0m
    [32mThen[0m [32mthe result should be true[0m               [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_finished_returns_true_when_stopped

  [1;37mScenario:[0m Is finished returns true when stopped [1;30m# features/domain/container/container_entity.feature:230[0m
    [32mGiven[0m [32ma container in "STOPPED" status[0m         [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container is finished[0m     [1;30m# container_steps.go:668 -> *containerContext[0m
    [32mThen[0m [32mthe result should be true[0m                [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_finished_returns_false_when_running

  [1;37mScenario:[0m Is finished returns false when running [1;30m# features/domain/container/container_entity.feature:235[0m
    [32mGiven[0m [32ma container in "RUNNING" status[0m          [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container is finished[0m      [1;30m# container_steps.go:668 -> *containerContext[0m
    [32mThen[0m [32mthe result should be false[0m                [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_stopping_returns_true_when_stopping

  [1;37mScenario:[0m Is stopping returns true when stopping [1;30m# features/domain/container/container_entity.feature:240[0m
    [32mGiven[0m [32ma container in "STOPPING" status[0m         [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container is stopping[0m      [1;30m# container_steps.go:669 -> *containerContext[0m
    [32mThen[0m [32mthe result should be true[0m                 [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_stopping_returns_false_when_running

  [1;37mScenario:[0m Is stopping returns false when running [1;30m# features/domain/container/container_entity.feature:245[0m
    [32mGiven[0m [32ma container in "RUNNING" status[0m          [1;30m# container_steps.go:640 -> *containerContext[0m
    [32mWhen[0m [32mI check if the container is stopping[0m      [1;30m# container_steps.go:669 -> *containerContext[0m
    [32mThen[0m [32mthe result should be false[0m                [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Runtime_duration_returns_zero_when_not_started

  [1;37mScenario:[0m Runtime duration returns zero when not started [1;30m# features/domain/container/container_entity.feature:254[0m
    [32mGiven[0m [32ma container that has not been started[0m            [1;30m# container_steps.go:673 -> *containerContext[0m
    [32mWhen[0m [32mI calculate the runtime duration[0m                  [1;30m# container_steps.go:670 -> *containerContext[0m
    [32mThen[0m [32mthe runtime duration should be 0 seconds[0m          [1;30m# container_steps.go:696 -> *containerContext[0m
=== RUN   TestFeatures/Runtime_duration_calculates_correctly_for_running_container

  [1;37mScenario:[0m Runtime duration calculates correctly for running container [1;30m# features/domain/container/container_entity.feature:259[0m
    [32mGiven[0m [32ma container that started 10 seconds ago[0m                       [1;30m# container_steps.go:674 -> *containerContext[0m
    [32mWhen[0m [32mI calculate the runtime duration[0m                               [1;30m# container_steps.go:670 -> *containerContext[0m
    [32mThen[0m [32mthe runtime duration should be approximately 10 seconds[0m        [1;30m# container_steps.go:697 -> *containerContext[0m
=== RUN   TestFeatures/Runtime_duration_uses_stopped_time_when_stopped

  [1;37mScenario:[0m Runtime duration uses stopped time when stopped                   [1;30m# features/domain/container/container_entity.feature:264[0m
    [32mGiven[0m [32ma container that started 10 seconds ago and stopped 5 seconds later[0m [1;30m# container_steps.go:675 -> *containerContext[0m
    [32mWhen[0m [32mI calculate the runtime duration[0m                                     [1;30m# container_steps.go:670 -> *containerContext[0m
    [32mThen[0m [32mthe runtime duration should be 5 seconds[0m                             [1;30m# container_steps.go:696 -> *containerContext[0m

[1;37mFeature:[0m Contract Entity
=== RUN   TestFeatures/Create_a_valid_contract_with_single_delivery

  [1;37mScenario:[0m Create a valid contract with single delivery                 [1;30m# features/domain/contract/contract_entity.feature:3[0m
    [32mGiven[0m [32ma contract with ID "contract-1" for player 1[0m                   [1;30m# contract_steps.go:393 -> *contractContext[0m
    [32mAnd[0m [32mthe contract has faction "COSMIC"[0m                                [1;30m# contract_steps.go:394 -> *contractContext[0m
    [32mAnd[0m [32mthe contract type is "PROCUREMENT"[0m                               [1;30m# contract_steps.go:395 -> *contractContext[0m
    [32mAnd[0m [32mpayment is 1000 credits on acceptance and 5000 on fulfillment[0m    [1;30m# contract_steps.go:396 -> *contractContext[0m
    [32mAnd[0m [32ma delivery of 100 units of "IRON_ORE" to "X1-GZ7-A1" is required[0m [1;30m# contract_steps.go:397 -> *contractContext[0m
    [32mWhen[0m [32mI create the contract[0m                                           [1;30m# contract_steps.go:406 -> *contractContext[0m
    [32mThen[0m [32mthe contract should be created successfully[0m                     [1;30m# contract_steps.go:416 -> *contractContext[0m
    [32mAnd[0m [32mthe contract ID should be "contract-1"[0m                           [1;30m# contract_steps.go:417 -> *contractContext[0m
    [32mAnd[0m [32mthe contract should not be accepted[0m                              [1;30m# contract_steps.go:418 -> *contractContext[0m
    [32mAnd[0m [32mthe contract should not be fulfilled[0m                             [1;30m# contract_steps.go:419 -> *contractContext[0m
=== RUN   TestFeatures/Accept_a_pending_contract

  [1;37mScenario:[0m Accept a pending contract    [1;30m# features/domain/contract/contract_entity.feature:15[0m
    [32mGiven[0m [32ma valid unaccepted contract[0m    [1;30m# contract_steps.go:398 -> *contractContext[0m
    [32mWhen[0m [32mI accept the contract[0m           [1;30m# contract_steps.go:407 -> *contractContext[0m
    [32mThen[0m [32mthe contract should be accepted[0m [1;30m# contract_steps.go:420 -> *contractContext[0m
=== RUN   TestFeatures/Cannot_accept_an_already_accepted_contract

  [1;37mScenario:[0m Cannot accept an already accepted contract     [1;30m# features/domain/contract/contract_entity.feature:20[0m
    [32mGiven[0m [32ma valid accepted contract[0m                        [1;30m# contract_steps.go:399 -> *contractContext[0m
    [32mWhen[0m [32mI try to accept the contract[0m                      [1;30m# contract_steps.go:408 -> *contractContext[0m
    [32mThen[0m [32mI should get an error "contract already accepted"[0m [1;30m# contract_steps.go:421 -> *contractContext[0m
=== RUN   TestFeatures/Deliver_cargo_for_valid_delivery

  [1;37mScenario:[0m Deliver cargo for valid delivery                                       [1;30m# features/domain/contract/contract_entity.feature:25[0m
    [32mGiven[0m [32ma valid accepted contract with delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m [1;30m# contract_steps.go:400 -> *contractContext[0m
    [32mWhen[0m [32mI deliver 50 units of "IRON_ORE"[0m                                          [1;30m# contract_steps.go:409 -> *contractContext[0m
    [32mThen[0m [32mthe delivery should show 50 units fulfilled[0m                               [1;30m# contract_steps.go:422 -> *contractContext[0m
    [32mAnd[0m [32mthe contract should not be fulfilled[0m                                       [1;30m# contract_steps.go:419 -> *contractContext[0m
=== RUN   TestFeatures/Deliver_remaining_cargo_completes_delivery

  [1;37mScenario:[0m Deliver remaining cargo completes delivery                 [1;30m# features/domain/contract/contract_entity.feature:31[0m
    [32mGiven[0m [32ma contract with 50 of 100 "IRON_ORE" units already delivered[0m [1;30m# contract_steps.go:401 -> *contractContext[0m
    [32mWhen[0m [32mI deliver 50 units of "IRON_ORE"[0m                              [1;30m# contract_steps.go:409 -> *contractContext[0m
    [32mThen[0m [32mthe delivery should show 100 units fulfilled[0m                  [1;30m# contract_steps.go:422 -> *contractContext[0m
=== RUN   TestFeatures/Cannot_deliver_more_than_required

  [1;37mScenario:[0m Cannot deliver more than required                                      [1;30m# features/domain/contract/contract_entity.feature:36[0m
    [32mGiven[0m [32ma valid accepted contract with delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m [1;30m# contract_steps.go:400 -> *contractContext[0m
    [32mWhen[0m [32mI try to deliver 150 units of "IRON_ORE"[0m                                  [1;30m# contract_steps.go:410 -> *contractContext[0m
    [32mThen[0m [32mI should get an error "units exceed required"[0m                             [1;30m# contract_steps.go:421 -> *contractContext[0m
=== RUN   TestFeatures/Cannot_deliver_invalid_trade_symbol

  [1;37mScenario:[0m Cannot deliver invalid trade symbol                                    [1;30m# features/domain/contract/contract_entity.feature:41[0m
    [32mGiven[0m [32ma valid accepted contract with delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m [1;30m# contract_steps.go:400 -> *contractContext[0m
    [32mWhen[0m [32mI try to deliver 50 units of "COPPER_ORE"[0m                                 [1;30m# contract_steps.go:410 -> *contractContext[0m
    [32mThen[0m [32mI should get an error "trade symbol not in contract"[0m                      [1;30m# contract_steps.go:421 -> *contractContext[0m
=== RUN   TestFeatures/Check_if_contract_can_be_fulfilled_(all_complete)

  [1;37mScenario:[0m Check if contract can be fulfilled (all complete) [1;30m# features/domain/contract/contract_entity.feature:46[0m
    [32mGiven[0m [32ma contract with all deliveries fulfilled[0m            [1;30m# contract_steps.go:402 -> *contractContext[0m
    [32mWhen[0m [32mI check if contract can be fulfilled[0m                 [1;30m# contract_steps.go:411 -> *contractContext[0m
    [32mThen[0m [32mthe contract can be fulfilled[0m                        [1;30m# contract_steps.go:423 -> *contractContext[0m
=== RUN   TestFeatures/Check_if_contract_cannot_be_fulfilled_(incomplete)

  [1;37mScenario:[0m Check if contract cannot be fulfilled (incomplete) [1;30m# features/domain/contract/contract_entity.feature:51[0m
    [32mGiven[0m [32ma contract with incomplete deliveries[0m                [1;30m# contract_steps.go:403 -> *contractContext[0m
    [32mWhen[0m [32mI check if contract can be fulfilled[0m                  [1;30m# contract_steps.go:411 -> *contractContext[0m
    [32mThen[0m [32mthe contract cannot be fulfilled[0m                      [1;30m# contract_steps.go:424 -> *contractContext[0m
=== RUN   TestFeatures/Fulfill_a_complete_contract

  [1;37mScenario:[0m Fulfill a complete contract            [1;30m# features/domain/contract/contract_entity.feature:56[0m
    [32mGiven[0m [32ma contract with all deliveries fulfilled[0m [1;30m# contract_steps.go:402 -> *contractContext[0m
    [32mWhen[0m [32mI fulfill the contract[0m                    [1;30m# contract_steps.go:412 -> *contractContext[0m
    [32mThen[0m [32mthe contract should be fulfilled[0m          [1;30m# contract_steps.go:425 -> *contractContext[0m
=== RUN   TestFeatures/Cannot_fulfill_incomplete_contract

  [1;37mScenario:[0m Cannot fulfill incomplete contract           [1;30m# features/domain/contract/contract_entity.feature:61[0m
    [32mGiven[0m [32ma contract with incomplete deliveries[0m          [1;30m# contract_steps.go:403 -> *contractContext[0m
    [32mWhen[0m [32mI try to fulfill the contract[0m                   [1;30m# contract_steps.go:413 -> *contractContext[0m
    [32mThen[0m [32mI should get an error "deliveries not complete"[0m [1;30m# contract_steps.go:421 -> *contractContext[0m

[1;37mFeature:[0m Market Value Object
  As a market scouting system
  I need to aggregate trade goods data for a market
  So that I can query and track market state over time
=== RUN   TestFeatures/Create_market_with_multiple_trade_goods

  [1;37mBackground:[0m
    [32mGiven[0m [32mI have a market at waypoint "X1-TEST-A1"[0m                                                         [1;30m# scouting_market_steps.go:44 -> *scoutingMarketContext[0m

  [1;37mScenario:[0m Create market with multiple trade goods                                                        [1;30m# features/domain/market/market.feature:9[0m
    [32mGiven[0m [32mI have the following trade goods:[0m                                                                [1;30m# scouting_market_steps.go:47 -> *scoutingMarketContext[0m
      | [36msymbol[0m   | [36msupply[0m   | [36mactivity[0m | [36mpurchase_price[0m | [36msell_price[0m | [36mtrade_volume[0m |
      | [36mIRON_ORE[0m | [36mMODERATE[0m | [36mSTRONG[0m   | [36m50[0m             | [36m100[0m        | [36m500[0m          |
      | [36mFUEL[0m     | [36mHIGH[0m     | [36mWEAK[0m     | [36m10[0m             | [36m20[0m         | [36m1000[0m         |
      | [36mFOOD[0m     | [36mLIMITED[0m  | [36mGROWING[0m  | [36m30[0m             | [36m60[0m         | [36m200[0m          |
    [32mWhen[0m [32mI create a market with waypoint "X1-TEST-A1" at timestamp "2025-11-13T12:00:00Z" with these goods[0m [1;30m# scouting_market_steps.go:51 -> *scoutingMarketContext[0m
    [32mThen[0m [32mthe market should have waypoint symbol "X1-TEST-A1"[0m                                               [1;30m# scouting_market_steps.go:66 -> *scoutingMarketContext[0m
    [32mAnd[0m [32mthe market should have 3 trade goods[0m                                                               [1;30m# scouting_market_steps.go:67 -> *scoutingMarketContext[0m
    [32mAnd[0m [32mthe market should have last updated "2025-11-13T12:00:00Z"[0m                                         [1;30m# scouting_market_steps.go:68 -> *scoutingMarketContext[0m
=== RUN   TestFeatures/Create_market_with_no_trade_goods

  [1;37mScenario:[0m Create market with no trade goods                                                           [1;30m# features/domain/market/market.feature:20[0m
    [32mWhen[0m [32mI create a market with waypoint "X1-TEST-A1" at timestamp "2025-11-13T12:00:00Z" with no goods[0m [1;30m# scouting_market_steps.go:53 -> *scoutingMarketContext[0m
    [32mThen[0m [32mthe market should have waypoint symbol "X1-TEST-A1"[0m                                            [1;30m# scouting_market_steps.go:66 -> *scoutingMarketContext[0m
    [32mAnd[0m [32mthe market should have 0 trade goods[0m                                                            [1;30m# scouting_market_steps.go:67 -> *scoutingMarketContext[0m
    [32mAnd[0m [32mthe market should have last updated "2025-11-13T12:00:00Z"[0m                                      [1;30m# scouting_market_steps.go:68 -> *scoutingMarketContext[0m
=== RUN   TestFeatures/Find_specific_trade_good_in_market

  [1;37mScenario:[0m Find specific trade good in market                            [1;30m# features/domain/market/market.feature:26[0m
    [32mGiven[0m [32mI have the following trade goods:[0m                               [1;30m# scouting_market_steps.go:47 -> *scoutingMarketContext[0m
      | [36msymbol[0m   | [36msupply[0m   | [36mactivity[0m | [36mpurchase_price[0m | [36msell_price[0m | [36mtrade_volume[0m |
      | [36mIRON_ORE[0m | [36mMODERATE[0m | [36mSTRONG[0m   | [36m50[0m             | [36m100[0m        | [36m500[0m          |
      | [36mFUEL[0m     | [36mHIGH[0m     | [36mWEAK[0m     | [36m10[0m             | [36m20[0m         | [36m1000[0m         |
    [32mAnd[0m [32mI have created a market with these goods at "X1-TEST-A1"[0m          [1;30m# scouting_market_steps.go:48 -> *scoutingMarketContext[0m
    [32mWhen[0m [32mI search for good "IRON_ORE" in the market[0m                       [1;30m# scouting_market_steps.go:61 -> *scoutingMarketContext[0m
    [32mThen[0m [32mI should find the good with purchase price 50 and sell price 100[0m [1;30m# scouting_market_steps.go:69 -> *scoutingMarketContext[0m
=== RUN   TestFeatures/Check_if_market_has_specific_good

  [1;37mScenario:[0m Check if market has specific good                    [1;30m# features/domain/market/market.feature:35[0m
    [32mGiven[0m [32mI have the following trade goods:[0m                      [1;30m# scouting_market_steps.go:47 -> *scoutingMarketContext[0m
      | [36msymbol[0m   | [36msupply[0m   | [36mactivity[0m | [36mpurchase_price[0m | [36msell_price[0m | [36mtrade_volume[0m |
      | [36mIRON_ORE[0m | [36mMODERATE[0m | [36mSTRONG[0m   | [36m50[0m             | [36m100[0m        | [36m500[0m          |
      | [36mFUEL[0m     | [36mHIGH[0m     | [36mWEAK[0m     | [36m10[0m             | [36m20[0m         | [36m1000[0m         |
    [32mAnd[0m [32mI have created a market with these goods at "X1-TEST-A1"[0m [1;30m# scouting_market_steps.go:48 -> *scoutingMarketContext[0m
    [32mWhen[0m [32mI check if the market has good "IRON_ORE"[0m               [1;30m# scouting_market_steps.go:62 -> *scoutingMarketContext[0m
    [32mThen[0m [32mthe has good result should be true[0m                      [1;30m# scouting_market_steps.go:72 -> *scoutingMarketContext[0m
    [32mWhen[0m [32mI check if the market has good "FOOD"[0m                   [1;30m# scouting_market_steps.go:62 -> *scoutingMarketContext[0m
    [32mThen[0m [32mthe has good result should be false[0m                     [1;30m# scouting_market_steps.go:72 -> *scoutingMarketContext[0m
=== RUN   TestFeatures/Count_goods_in_market

  [1;37mScenario:[0m Count goods in market                                [1;30m# features/domain/market/market.feature:46[0m
    [32mGiven[0m [32mI have the following trade goods:[0m                      [1;30m# scouting_market_steps.go:47 -> *scoutingMarketContext[0m
      | [36msymbol[0m   | [36msupply[0m   | [36mactivity[0m | [36mpurchase_price[0m | [36msell_price[0m | [36mtrade_volume[0m |
      | [36mIRON_ORE[0m | [36mMODERATE[0m | [36mSTRONG[0m   | [36m50[0m             | [36m100[0m        | [36m500[0m          |
      | [36mFUEL[0m     | [36mHIGH[0m     | [36mWEAK[0m     | [36m10[0m             | [36m20[0m         | [36m1000[0m         |
      | [36mFOOD[0m     | [36mLIMITED[0m  | [36mGROWING[0m  | [36m30[0m             | [36m60[0m         | [36m200[0m          |
    [32mAnd[0m [32mI have created a market with these goods at "X1-TEST-A1"[0m [1;30m# scouting_market_steps.go:48 -> *scoutingMarketContext[0m
    [32mWhen[0m [32mI count the goods in the market[0m                         [1;30m# scouting_market_steps.go:63 -> *scoutingMarketContext[0m
    [32mThen[0m [32mthe goods count should be 3[0m                             [1;30m# scouting_market_steps.go:73 -> *scoutingMarketContext[0m
=== RUN   TestFeatures/Reject_market_with_empty_waypoint_symbol

  [1;37mScenario:[0m Reject market with empty waypoint symbol                                          [1;30m# features/domain/market/market.feature:56[0m
    [32mWhen[0m [32mI attempt to create a market with empty waypoint at timestamp "2025-11-13T12:00:00Z"[0m [1;30m# scouting_market_steps.go:55 -> *scoutingMarketContext[0m
    [32mThen[0m [32mI should get a market error "waypoint symbol cannot be empty"[0m                        [1;30m# scouting_market_steps.go:74 -> *scoutingMarketContext[0m
=== RUN   TestFeatures/Reject_market_with_invalid_timestamp

  [1;37mScenario:[0m Reject market with invalid timestamp                                    [1;30m# features/domain/market/market.feature:60[0m
    [32mWhen[0m [32mI attempt to create a market with waypoint "X1-TEST-A1" at empty timestamp[0m [1;30m# scouting_market_steps.go:57 -> *scoutingMarketContext[0m
    [32mThen[0m [32mI should get a market error "timestamp cannot be empty"[0m                    [1;30m# scouting_market_steps.go:74 -> *scoutingMarketContext[0m

[1;37mFeature:[0m TradeGood Value Object
  As a market scouting system
  I need to represent trade goods with prices and supply information
  So that I can track commodity data across markets
=== RUN   TestFeatures/Create_valid_trade_good_with_all_fields

  [1;37mBackground:[0m
    [32mGiven[0m [32mI have market trade good data[0m                                                                                                              [1;30m# trade_good_steps.go:33 -> *tradeGoodContext[0m

  [1;37mScenario:[0m Create valid trade good with all fields                                                                                                  [1;30m# features/domain/market/trade_good.feature:9[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON_ORE", supply "MODERATE", activity "STRONG", purchase price 50, sell price 100, and trade volume 500[0m [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have symbol "IRON_ORE"[0m                                                                                                [1;30m# trade_good_steps.go:46 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have supply "MODERATE"[0m                                                                                                 [1;30m# trade_good_steps.go:47 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have activity "STRONG"[0m                                                                                                 [1;30m# trade_good_steps.go:48 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have purchase price 50[0m                                                                                                 [1;30m# trade_good_steps.go:49 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have sell price 100[0m                                                                                                    [1;30m# trade_good_steps.go:50 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have trade volume 500[0m                                                                                                  [1;30m# trade_good_steps.go:51 -> *tradeGoodContext[0m
=== RUN   TestFeatures/Create_trade_good_with_optional_nil_fields

  [1;37mScenario:[0m Create trade good with optional nil fields                                                                            [1;30m# features/domain/market/trade_good.feature:18[0m
    [32mWhen[0m [32mI create a trade good with symbol "FUEL", no supply, no activity, purchase price 10, sell price 20, and trade volume 100[0m [1;30m# trade_good_steps.go:38 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have symbol "FUEL"[0m                                                                                 [1;30m# trade_good_steps.go:46 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have nil supply[0m                                                                                     [1;30m# trade_good_steps.go:52 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have nil activity[0m                                                                                   [1;30m# trade_good_steps.go:53 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have purchase price 10[0m                                                                              [1;30m# trade_good_steps.go:49 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have sell price 20[0m                                                                                  [1;30m# trade_good_steps.go:50 -> *tradeGoodContext[0m
    [32mAnd[0m [32mthe trade good should have trade volume 100[0m                                                                               [1;30m# trade_good_steps.go:51 -> *tradeGoodContext[0m
=== RUN   TestFeatures/Reject_trade_good_with_negative_purchase_price

  [1;37mScenario:[0m Reject trade good with negative purchase price                                                                                            [1;30m# features/domain/market/trade_good.feature:27[0m
    [32mWhen[0m [32mI attempt to create a trade good with symbol "IRON", supply "HIGH", activity "WEAK", purchase price -10, sell price 50, and trade volume 100[0m [1;30m# trade_good_steps.go:42 -> *tradeGoodContext[0m
    [32mThen[0m [32mI should get an error "purchase price must be non-negative"[0m                                                                                  [1;30m# contract_steps.go:421 -> *contractContext[0m
=== RUN   TestFeatures/Reject_trade_good_with_negative_sell_price

  [1;37mScenario:[0m Reject trade good with negative sell price                                                                                                [1;30m# features/domain/market/trade_good.feature:31[0m
    [32mWhen[0m [32mI attempt to create a trade good with symbol "IRON", supply "HIGH", activity "WEAK", purchase price 10, sell price -50, and trade volume 100[0m [1;30m# trade_good_steps.go:42 -> *tradeGoodContext[0m
    [32mThen[0m [32mI should get an error "sell price must be non-negative"[0m                                                                                      [1;30m# contract_steps.go:421 -> *contractContext[0m
=== RUN   TestFeatures/Reject_trade_good_with_negative_trade_volume

  [1;37mScenario:[0m Reject trade good with negative trade volume                                                                                              [1;30m# features/domain/market/trade_good.feature:35[0m
    [32mWhen[0m [32mI attempt to create a trade good with symbol "IRON", supply "HIGH", activity "WEAK", purchase price 10, sell price 50, and trade volume -100[0m [1;30m# trade_good_steps.go:42 -> *tradeGoodContext[0m
    [32mThen[0m [32mI should get an error "trade volume must be non-negative"[0m                                                                                    [1;30m# contract_steps.go:421 -> *contractContext[0m
=== RUN   TestFeatures/Reject_trade_good_with_empty_symbol

  [1;37mScenario:[0m Reject trade good with empty symbol                                                                                                  [1;30m# features/domain/market/trade_good.feature:39[0m
    [32mWhen[0m [32mI attempt to create a trade good with symbol "", supply "HIGH", activity "WEAK", purchase price 10, sell price 50, and trade volume 100[0m [1;30m# trade_good_steps.go:42 -> *tradeGoodContext[0m
    [32mThen[0m [32mI should get an error "symbol cannot be empty"[0m                                                                                          [1;30m# contract_steps.go:421 -> *contractContext[0m
=== RUN   TestFeatures/Accept_valid_supply_values

  [1;37mScenario:[0m Accept valid supply values                                                                                                        [1;30m# features/domain/market/trade_good.feature:43[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON", supply "SCARCE", activity "WEAK", purchase price 10, sell price 50, and trade volume 100[0m   [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have supply "SCARCE"[0m                                                                                           [1;30m# trade_good_steps.go:47 -> *tradeGoodContext[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON", supply "LIMITED", activity "WEAK", purchase price 10, sell price 50, and trade volume 100[0m  [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have supply "LIMITED"[0m                                                                                          [1;30m# trade_good_steps.go:47 -> *tradeGoodContext[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON", supply "MODERATE", activity "WEAK", purchase price 10, sell price 50, and trade volume 100[0m [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have supply "MODERATE"[0m                                                                                         [1;30m# trade_good_steps.go:47 -> *tradeGoodContext[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON", supply "HIGH", activity "WEAK", purchase price 10, sell price 50, and trade volume 100[0m     [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have supply "HIGH"[0m                                                                                             [1;30m# trade_good_steps.go:47 -> *tradeGoodContext[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON", supply "ABUNDANT", activity "WEAK", purchase price 10, sell price 50, and trade volume 100[0m [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have supply "ABUNDANT"[0m                                                                                         [1;30m# trade_good_steps.go:47 -> *tradeGoodContext[0m
=== RUN   TestFeatures/Accept_valid_activity_values

  [1;37mScenario:[0m Accept valid activity values                                                                                                        [1;30m# features/domain/market/trade_good.feature:55[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON", supply "HIGH", activity "WEAK", purchase price 10, sell price 50, and trade volume 100[0m       [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have activity "WEAK"[0m                                                                                             [1;30m# trade_good_steps.go:48 -> *tradeGoodContext[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON", supply "HIGH", activity "GROWING", purchase price 10, sell price 50, and trade volume 100[0m    [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have activity "GROWING"[0m                                                                                          [1;30m# trade_good_steps.go:48 -> *tradeGoodContext[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON", supply "HIGH", activity "STRONG", purchase price 10, sell price 50, and trade volume 100[0m     [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have activity "STRONG"[0m                                                                                           [1;30m# trade_good_steps.go:48 -> *tradeGoodContext[0m
    [32mWhen[0m [32mI create a trade good with symbol "IRON", supply "HIGH", activity "RESTRICTED", purchase price 10, sell price 50, and trade volume 100[0m [1;30m# trade_good_steps.go:36 -> *tradeGoodContext[0m
    [32mThen[0m [32mthe trade good should have activity "RESTRICTED"[0m                                                                                       [1;30m# trade_good_steps.go:48 -> *tradeGoodContext[0m
=== RUN   TestFeatures/Reject_invalid_supply_value

  [1;37mScenario:[0m Reject invalid supply value                                                                                                                 [1;30m# features/domain/market/trade_good.feature:65[0m
    [32mWhen[0m [32mI attempt to create a trade good with symbol "IRON", supply "INVALID", activity "WEAK", purchase price 10, sell price 50, and trade volume 100[0m [1;30m# trade_good_steps.go:42 -> *tradeGoodContext[0m
    [32mThen[0m [32mI should get an error "invalid supply value"[0m                                                                                                   [1;30m# contract_steps.go:421 -> *contractContext[0m
=== RUN   TestFeatures/Reject_invalid_activity_value

  [1;37mScenario:[0m Reject invalid activity value                                                                                                               [1;30m# features/domain/market/trade_good.feature:69[0m
    [32mWhen[0m [32mI attempt to create a trade good with symbol "IRON", supply "HIGH", activity "INVALID", purchase price 10, sell price 50, and trade volume 100[0m [1;30m# trade_good_steps.go:42 -> *tradeGoodContext[0m
    [32mThen[0m [32mI should get an error "invalid activity value"[0m                                                                                                 [1;30m# contract_steps.go:421 -> *contractContext[0m

[1;37mFeature:[0m Route Entity
  As a navigation system
  I want to manage routes and route segments
  So that ships can navigate between waypoints
=== RUN   TestFeatures/Create_route_segment_with_required_fields

  [1;37mBackground:[0m
    [32mGiven[0m [32mtest waypoints are available:[0m                         [1;30m# route_steps.go:297 -> *routeContext[0m
      | [36msymbol[0m | [36mx[0m     | [36my[0m   |
      | [36mX1-A1[0m  | [36m0.0[0m   | [36m0.0[0m |
      | [36mX1-B2[0m  | [36m100.0[0m | [36m0.0[0m |
      | [36mX1-C3[0m  | [36m200.0[0m | [36m0.0[0m |

  [1;37mScenario:[0m Create route segment with required fields           [1;30m# features/domain/navigation/route_entity.feature:17[0m
    [32mWhen[0m [32mI create a route segment from "X1-A1" to "X1-B2" with:[0m [1;30m# route_steps.go:298 -> *routeContext[0m
      | [36mdistance[0m      | [36m100.0[0m  |
      | [36mfuel_required[0m | [36m50[0m     |
      | [36mtravel_time[0m   | [36m100[0m    |
      | [36mflight_mode[0m   | [36mCRUISE[0m |
    [32mThen[0m [32mthe segment should have from_waypoint "X1-A1"[0m          [1;30m# route_steps.go:299 -> *routeContext[0m
    [32mAnd[0m [32mthe segment should have to_waypoint "X1-B2"[0m             [1;30m# route_steps.go:300 -> *routeContext[0m
    [32mAnd[0m [32mthe segment should have distance 100.0[0m                  [1;30m# route_steps.go:301 -> *routeContext[0m
    [32mAnd[0m [32mthe segment should have fuel_required 50[0m                [1;30m# route_steps.go:302 -> *routeContext[0m
    [32mAnd[0m [32mthe segment should have travel_time 100[0m                 [1;30m# route_steps.go:303 -> *routeContext[0m
    [32mAnd[0m [32mthe segment should have flight_mode "CRUISE"[0m            [1;30m# route_steps.go:304 -> *routeContext[0m
    [32mAnd[0m [32mthe segment should have requires_refuel false[0m           [1;30m# route_steps.go:305 -> *routeContext[0m
=== RUN   TestFeatures/Create_route_segment_with_refuel_flag

  [1;37mScenario:[0m Create route segment with refuel flag               [1;30m# features/domain/navigation/route_entity.feature:31[0m
    [32mWhen[0m [32mI create a route segment from "X1-A1" to "X1-B2" with:[0m [1;30m# route_steps.go:298 -> *routeContext[0m
      | [36mdistance[0m        | [36m100.0[0m  |
      | [36mfuel_required[0m   | [36m50[0m     |
      | [36mtravel_time[0m     | [36m100[0m    |
      | [36mflight_mode[0m     | [36mCRUISE[0m |
      | [36mrequires_refuel[0m | [36mtrue[0m   |
    [32mThen[0m [32mthe segment should have requires_refuel true[0m           [1;30m# route_steps.go:305 -> *routeContext[0m
=== RUN   TestFeatures/Create_route_with_valid_data

  [1;37mScenario:[0m Create route with valid data                              [1;30m# features/domain/navigation/route_entity.feature:44[0m
    [32mGiven[0m [32ma route segment from "X1-A1" to "X1-B2" with distance 100.0[0m [1;30m# route_steps.go:308 -> *routeContext[0m
    [32mAnd[0m [32ma route segment from "X1-B2" to "X1-C3" with distance 100.0[0m   [1;30m# route_steps.go:308 -> *routeContext[0m
    [32mWhen[0m [32mI create a route with:[0m                                       [1;30m# route_steps.go:309 -> *routeContext[0m
      | [36mroute_id[0m           | [36mroute-1[0m |
      | [36mship_symbol[0m        | [36mSHIP-1[0m  |
      | [36mplayer_id[0m          | [36m1[0m       |
      | [36mship_fuel_capacity[0m | [36m100[0m     |
    [32mThen[0m [32mthe route should have route_id "route-1"[0m                     [1;30m# route_steps.go:310 -> *routeContext[0m
    [32mAnd[0m [32mthe route should have ship_symbol "SHIP-1"[0m                    [1;30m# route_steps.go:311 -> *routeContext[0m
    [32mAnd[0m [32mthe route should have player_id 1[0m                             [1;30m# route_steps.go:312 -> *routeContext[0m
    [32mAnd[0m [32mthe route should have 2 segments[0m                              [1;30m# route_steps.go:313 -> *routeContext[0m
    [32mAnd[0m [32mthe route should have status "PLANNED"[0m                        [1;30m# route_steps.go:314 -> *routeContext[0m
=== RUN   TestFeatures/Can_create_route_with_empty_segments_for_already-at-destination_case

  [1;37mScenario:[0m Can create route with empty segments for already-at-destination case [1;30m# features/domain/navigation/route_entity.feature:58[0m
    [32mWhen[0m [32mI create a route with empty segments[0m                                    [1;30m# route_steps.go:315 -> *routeContext[0m
    [32mThen[0m [32mthe route should have 0 segments[0m                                        [1;30m# route_steps.go:313 -> *routeContext[0m
    [32mAnd[0m [32mthe route should have status "PLANNED"[0m                                   [1;30m# route_steps.go:314 -> *routeContext[0m
=== RUN   TestFeatures/Cannot_create_route_with_disconnected_segments

  [1;37mScenario:[0m Cannot create route with disconnected segments                  [1;30m# features/domain/navigation/route_entity.feature:63[0m
    [32mGiven[0m [32ma route segment from "X1-A1" to "X1-B2" with distance 100.0[0m       [1;30m# route_steps.go:308 -> *routeContext[0m
    [32mAnd[0m [32ma route segment from "X1-A1" to "X1-C3" with distance 100.0[0m         [1;30m# route_steps.go:308 -> *routeContext[0m
    [32mWhen[0m [32mI attempt to create a route with disconnected segments[0m             [1;30m# route_steps.go:316 -> *routeContext[0m
    [32mThen[0m [32mthe route creation should fail with error "segments not connected"[0m [1;30m# route_steps.go:317 -> *routeContext[0m
=== RUN   TestFeatures/Cannot_create_route_when_segment_exceeds_fuel_capacity

  [1;37mScenario:[0m Cannot create route when segment exceeds fuel capacity                              [1;30m# features/domain/navigation/route_entity.feature:69[0m
    [32mGiven[0m [32ma route segment from "X1-A1" to "X1-B2" requiring 150 fuel[0m                            [1;30m# route_steps.go:318 -> *routeContext[0m
    [32mWhen[0m [32mI attempt to create a route with fuel capacity 100[0m                                     [1;30m# route_steps.go:319 -> *routeContext[0m
    [32mThen[0m [32mthe route creation should fail with error "requires 150 fuel but ship capacity is 100"[0m [1;30m# route_steps.go:317 -> *routeContext[0m
=== RUN   TestFeatures/Allow_segment_at_capacity_limit

  [1;37mScenario:[0m Allow segment at capacity limit                          [1;30m# features/domain/navigation/route_entity.feature:74[0m
    [32mGiven[0m [32ma route segment from "X1-A1" to "X1-B2" requiring 100 fuel[0m [1;30m# route_steps.go:318 -> *routeContext[0m
    [32mWhen[0m [32mI create a route with fuel capacity 100[0m                     [1;30m# route_steps.go:320 -> *routeContext[0m
    [32mThen[0m [32mthe route should be created successfully[0m                    [1;30m# route_steps.go:321 -> *routeContext[0m
=== RUN   TestFeatures/Route_starts_in_planned_status

  [1;37mScenario:[0m Route starts in planned status      [1;30m# features/domain/navigation/route_entity.feature:83[0m
    [33mGiven[0m [33ma newly created route[0m
    [36mThen[0m [36mthe route should have status "PLANNED"[0m [1;30m# route_steps.go:314 -> *routeContext[0m
=== RUN   TestFeatures/Start_execution_transitions_to_executing

  [1;37mScenario:[0m Start execution transitions to executing [1;30m# features/domain/navigation/route_entity.feature:87[0m
    [33mGiven[0m [33ma route in "PLANNED" status[0m
    [33mWhen[0m [33mI start route execution[0m
    [36mThen[0m [36mthe route should have status "EXECUTING"[0m    [1;30m# route_steps.go:314 -> *routeContext[0m
=== RUN   TestFeatures/Cannot_start_execution_when_already_executing

  [1;37mScenario:[0m Cannot start execution when already executing                              [1;30m# features/domain/navigation/route_entity.feature:92[0m
    [33mGiven[0m [33ma route in "EXECUTING" status[0m
    [33mWhen[0m [33mI attempt to start route execution[0m
    [36mThen[0m [36mthe operation should fail with error "cannot start route in status EXECUTING"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Cannot_start_execution_when_completed

  [1;37mScenario:[0m Cannot start execution when completed                                      [1;30m# features/domain/navigation/route_entity.feature:97[0m
    [33mGiven[0m [33ma route in "COMPLETED" status[0m
    [33mWhen[0m [33mI attempt to start route execution[0m
    [36mThen[0m [36mthe operation should fail with error "cannot start route in status COMPLETED"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Complete_segment_advances_index

  [1;37mScenario:[0m Complete segment advances index    [1;30m# features/domain/navigation/route_entity.feature:102[0m
    [33mGiven[0m [33ma route in "EXECUTING" status[0m
    [33mAnd[0m [33mthe current_segment_index is 0[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [33mThen[0m [33mthe current_segment_index should be 1[0m
=== RUN   TestFeatures/Complete_segment_multiple_times

  [1;37mScenario:[0m Complete segment multiple times             [1;30m# features/domain/navigation/route_entity.feature:108[0m
    [33mGiven[0m [33ma route in "EXECUTING" status with 2 segments[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI complete the current segment[0m
    [33mThen[0m [33mthe current_segment_index should be 2[0m
=== RUN   TestFeatures/Complete_segment_transitions_to_completed_when_done

  [1;37mScenario:[0m Complete segment transitions to completed when done [1;30m# features/domain/navigation/route_entity.feature:114[0m
    [33mGiven[0m [33ma route in "EXECUTING" status with 2 segments[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [36mThen[0m [36mthe route should have status "EXECUTING"[0m               [1;30m# route_steps.go:314 -> *routeContext[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [36mThen[0m [36mthe route should have status "COMPLETED"[0m               [1;30m# route_steps.go:314 -> *routeContext[0m
=== RUN   TestFeatures/Cannot_complete_segment_when_not_executing

  [1;37mScenario:[0m Cannot complete segment when not executing                                               [1;30m# features/domain/navigation/route_entity.feature:121[0m
    [33mGiven[0m [33ma route in "PLANNED" status[0m
    [33mWhen[0m [33mI attempt to complete the current segment[0m
    [36mThen[0m [36mthe operation should fail with error "cannot complete segment when route status is PLANNED"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Fail_route_transitions_to_failed

  [1;37mScenario:[0m Fail route transitions to failed             [1;30m# features/domain/navigation/route_entity.feature:126[0m
    [33mGiven[0m [33ma route in "EXECUTING" status[0m
    [33mWhen[0m [33mI fail the route with reason "Navigation error"[0m
    [36mThen[0m [36mthe route should have status "FAILED"[0m           [1;30m# route_steps.go:314 -> *routeContext[0m
=== RUN   TestFeatures/Abort_route_transitions_to_aborted

  [1;37mScenario:[0m Abort route transitions to aborted          [1;30m# features/domain/navigation/route_entity.feature:131[0m
    [33mGiven[0m [33ma route in "EXECUTING" status[0m
    [33mWhen[0m [33mI abort the route with reason "User cancelled"[0m
    [36mThen[0m [36mthe route should have status "ABORTED"[0m         [1;30m# route_steps.go:314 -> *routeContext[0m
=== RUN   TestFeatures/Calculate_total_distance

  [1;37mScenario:[0m Calculate total distance              [1;30m# features/domain/navigation/route_entity.feature:140[0m
    [33mGiven[0m [33ma route with segments having distances:[0m
      | [36m100.0[0m |
      | [36m100.0[0m |
    [33mWhen[0m [33mI calculate the total distance[0m
    [33mThen[0m [33mthe total distance should be 200.0[0m
=== RUN   TestFeatures/Calculate_total_fuel_required

  [1;37mScenario:[0m Calculate total fuel required       [1;30m# features/domain/navigation/route_entity.feature:147[0m
    [33mGiven[0m [33ma route with segments requiring fuel:[0m
      | [36m50[0m |
      | [36m50[0m |
    [33mWhen[0m [33mI calculate the total fuel required[0m
    [33mThen[0m [33mthe total fuel required should be 100[0m
=== RUN   TestFeatures/Calculate_total_travel_time

  [1;37mScenario:[0m Calculate total travel time              [1;30m# features/domain/navigation/route_entity.feature:154[0m
    [33mGiven[0m [33ma route with segments having travel times:[0m
      | [36m100[0m |
      | [36m100[0m |
    [33mWhen[0m [33mI calculate the total travel time[0m
    [33mThen[0m [33mthe total travel time should be 200[0m
=== RUN   TestFeatures/Calculations_with_single_segment

  [1;37mScenario:[0m Calculations with single segment [1;30m# features/domain/navigation/route_entity.feature:161[0m
    [33mGiven[0m [33ma route with a single segment:[0m
      | [36mdistance[0m      | [36m100.0[0m |
      | [36mfuel_required[0m | [36m50[0m    |
      | [36mtravel_time[0m   | [36m100[0m   |
    [33mWhen[0m [33mI calculate route totals[0m
    [33mThen[0m [33mthe total distance should be 100.0[0m
    [33mAnd[0m [33mthe total fuel required should be 50[0m
    [33mAnd[0m [33mthe total travel time should be 100[0m
=== RUN   TestFeatures/Get_first_segment_initially

  [1;37mScenario:[0m Get first segment initially [1;30m# features/domain/navigation/route_entity.feature:175[0m
    [33mGiven[0m [33ma route with 2 segments[0m
    [33mWhen[0m [33mI get the current segment[0m
    [33mThen[0m [33mit should be the first segment[0m
=== RUN   TestFeatures/Get_next_segment_after_completion

  [1;37mScenario:[0m Get next segment after completion           [1;30m# features/domain/navigation/route_entity.feature:180[0m
    [33mGiven[0m [33ma route in "EXECUTING" status with 2 segments[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI get the current segment[0m
    [33mThen[0m [33mit should be the second segment[0m
=== RUN   TestFeatures/Returns_nil_when_route_completed

  [1;37mScenario:[0m Returns nil when route completed            [1;30m# features/domain/navigation/route_entity.feature:186[0m
    [33mGiven[0m [33ma route in "EXECUTING" status with 2 segments[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI get the current segment[0m
    [33mThen[0m [33mthe current segment should be nil[0m
=== RUN   TestFeatures/Returns_all_segments_initially

  [1;37mScenario:[0m Returns all segments initially    [1;30m# features/domain/navigation/route_entity.feature:197[0m
    [33mGiven[0m [33ma route with 2 segments[0m
    [33mWhen[0m [33mI get the remaining segments[0m
    [33mThen[0m [33mthere should be 2 remaining segments[0m
=== RUN   TestFeatures/Returns_remaining_after_completion

  [1;37mScenario:[0m Returns remaining after completion             [1;30m# features/domain/navigation/route_entity.feature:202[0m
    [33mGiven[0m [33ma route in "EXECUTING" status with 2 segments[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI get the remaining segments[0m
    [33mThen[0m [33mthere should be 1 remaining segment[0m
    [33mAnd[0m [33mthe remaining segment should be the second segment[0m
=== RUN   TestFeatures/Returns_empty_list_when_completed

  [1;37mScenario:[0m Returns empty list when completed           [1;30m# features/domain/navigation/route_entity.feature:209[0m
    [33mGiven[0m [33ma route in "EXECUTING" status with 2 segments[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI get the remaining segments[0m
    [33mThen[0m [33mthere should be 0 remaining segments[0m
=== RUN   TestFeatures/Returns_zero_initially

  [1;37mScenario:[0m Returns zero initially       [1;30m# features/domain/navigation/route_entity.feature:220[0m
    [33mGiven[0m [33ma newly created route[0m
    [33mWhen[0m [33mI get the current segment index[0m
    [33mThen[0m [33mthe index should be 0[0m
=== RUN   TestFeatures/Returns_updated_index_after_completion

  [1;37mScenario:[0m Returns updated index after completion      [1;30m# features/domain/navigation/route_entity.feature:225[0m
    [33mGiven[0m [33ma route in "EXECUTING" status with 2 segments[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI get the current segment index[0m
    [33mThen[0m [33mthe index should be 1[0m
=== RUN   TestFeatures/Returns_segment_count_when_completed

  [1;37mScenario:[0m Returns segment count when completed        [1;30m# features/domain/navigation/route_entity.feature:231[0m
    [33mGiven[0m [33ma route in "EXECUTING" status with 2 segments[0m
    [33mWhen[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI complete the current segment[0m
    [33mAnd[0m [33mI get the current segment index[0m
    [33mThen[0m [33mthe index should be 2[0m
=== RUN   TestFeatures/Has_refuel_at_start_when_route_requires_refuel_before_departure

  [1;37mScenario:[0m Has refuel at start when route requires refuel before departure [1;30m# features/domain/navigation/route_entity.feature:242[0m
    [33mGiven[0m [33ma route with refuel_before_departure true[0m
    [33mThen[0m [33mHasRefuelAtStart should return true[0m
=== RUN   TestFeatures/Does_not_have_refuel_at_start_when_route_does_not_require_refuel_before_departure

  [1;37mScenario:[0m Does not have refuel at start when route does not require refuel before departure [1;30m# features/domain/navigation/route_entity.feature:246[0m
    [33mGiven[0m [33ma route with refuel_before_departure false[0m
    [33mThen[0m [33mHasRefuelAtStart should return false[0m
=== RUN   TestFeatures/NextSegment_returns_first_segment_initially

  [1;37mScenario:[0m NextSegment returns first segment initially [1;30m# features/domain/navigation/route_entity.feature:250[0m
    [33mGiven[0m [33ma route with 2 segments[0m
    [33mWhen[0m [33mI call NextSegment[0m
    [33mThen[0m [33mit should return the first segment[0m
=== RUN   TestFeatures/NextSegment_returns_current_segment_when_executing

  [1;37mScenario:[0m NextSegment returns current segment when executing [1;30m# features/domain/navigation/route_entity.feature:255[0m
    [33mGiven[0m [33ma route in "EXECUTING" status with 2 segments[0m
    [33mAnd[0m [33mthe current_segment_index is 1[0m
    [33mWhen[0m [33mI call NextSegment[0m
    [33mThen[0m [33mit should return the second segment[0m
=== RUN   TestFeatures/NextSegment_returns_nil_when_route_completed

  [1;37mScenario:[0m NextSegment returns nil when route completed [1;30m# features/domain/navigation/route_entity.feature:261[0m
    [33mGiven[0m [33ma route in "COMPLETED" status with 2 segments[0m
    [33mWhen[0m [33mI call NextSegment[0m
    [33mThen[0m [33mit should return nil[0m
=== RUN   TestFeatures/IsComplete_returns_false_when_route_is_planned

  [1;37mScenario:[0m IsComplete returns false when route is planned [1;30m# features/domain/navigation/route_entity.feature:266[0m
    [33mGiven[0m [33ma route in "PLANNED" status[0m
    [33mWhen[0m [33mI call IsComplete[0m
    [33mThen[0m [33mit should return false[0m
=== RUN   TestFeatures/IsComplete_returns_false_when_route_is_executing

  [1;37mScenario:[0m IsComplete returns false when route is executing [1;30m# features/domain/navigation/route_entity.feature:271[0m
    [33mGiven[0m [33ma route in "EXECUTING" status[0m
    [33mWhen[0m [33mI call IsComplete[0m
    [33mThen[0m [33mit should return false[0m
=== RUN   TestFeatures/IsComplete_returns_true_when_route_is_completed

  [1;37mScenario:[0m IsComplete returns true when route is completed [1;30m# features/domain/navigation/route_entity.feature:276[0m
    [33mGiven[0m [33ma route in "COMPLETED" status[0m
    [33mWhen[0m [33mI call IsComplete[0m
    [33mThen[0m [33mit should return true[0m
=== RUN   TestFeatures/IsFailed_returns_false_when_route_is_planned

  [1;37mScenario:[0m IsFailed returns false when route is planned [1;30m# features/domain/navigation/route_entity.feature:281[0m
    [33mGiven[0m [33ma route in "PLANNED" status[0m
    [33mWhen[0m [33mI call IsFailed[0m
    [33mThen[0m [33mit should return false[0m
=== RUN   TestFeatures/IsFailed_returns_false_when_route_is_executing

  [1;37mScenario:[0m IsFailed returns false when route is executing [1;30m# features/domain/navigation/route_entity.feature:286[0m
    [33mGiven[0m [33ma route in "EXECUTING" status[0m
    [33mWhen[0m [33mI call IsFailed[0m
    [33mThen[0m [33mit should return false[0m
=== RUN   TestFeatures/IsFailed_returns_true_when_route_is_failed

  [1;37mScenario:[0m IsFailed returns true when route is failed [1;30m# features/domain/navigation/route_entity.feature:291[0m
    [33mGiven[0m [33ma route in "FAILED" status[0m
    [33mWhen[0m [33mI call IsFailed[0m
    [33mThen[0m [33mit should return true[0m

[1;37mFeature:[0m Ship Entity
  As a SpaceTraders bot
  I want to manage ship entities with proper state transitions
  So that I can navigate, refuel, and manage cargo safely
=== RUN   TestFeatures/Create_ship_with_valid_data

  [1;37mScenario:[0m Create ship with valid data                                                                                    [1;30m# features/domain/navigation/ship_entity.feature:10[0m
    [32mWhen[0m [32mI create a ship with symbol "SHIP-1", player 1, at "X1-A1", fuel 100/100, cargo 0/40, speed 30, status "IN_ORBIT"[0m [1;30m# ship_steps.go:737 -> *shipContext[0m
    [32mThen[0m [32mthe ship should have symbol "SHIP-1"[0m                                                                              [1;30m# ship_steps.go:754 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should have player_id 1[0m                                                                                   [1;30m# ship_steps.go:755 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should be at location "X1-A1"[0m                                                                             [1;30m# ship_steps.go:756 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should have 100 units of fuel[0m                                                                             [1;30m# ship_steps.go:757 -> *shipContext[0m
    [32mAnd[0m [32mthe ship fuel capacity should be 100[0m                                                                               [1;30m# ship_steps.go:758 -> *shipContext[0m
    [32mAnd[0m [32mthe ship cargo capacity should be 40[0m                                                                               [1;30m# ship_steps.go:759 -> *shipContext[0m
    [32mAnd[0m [32mthe ship cargo units should be 0[0m                                                                                   [1;30m# ship_steps.go:760 -> *shipContext[0m
    [32mAnd[0m [32mthe ship engine speed should be 30[0m                                                                                 [1;30m# ship_steps.go:761 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should be in orbit[0m                                                                                        [1;30m# ship_steps.go:762 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_invalid_empty_symbol

  [1;37mScenario:[0m Create ship with invalid empty symbol                           [1;30m# features/domain/navigation/ship_entity.feature:22[0m
    [32mWhen[0m [32mI attempt to create a ship with empty ship_symbol[0m                  [1;30m# ship_steps.go:739 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "ship_symbol cannot be empty"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_zero_player_id

  [1;37mScenario:[0m Create ship with zero player_id                                [1;30m# features/domain/navigation/ship_entity.feature:26[0m
    [32mWhen[0m [32mI attempt to create a ship with player_id 0[0m                       [1;30m# ship_steps.go:740 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "player_id must be positive"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_negative_player_id

  [1;37mScenario:[0m Create ship with negative player_id                            [1;30m# features/domain/navigation/ship_entity.feature:30[0m
    [32mWhen[0m [32mI attempt to create a ship with player_id -1[0m                      [1;30m# ship_steps.go:741 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "player_id must be positive"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_negative_fuel_capacity

  [1;37mScenario:[0m Create ship with negative fuel capacity                              [1;30m# features/domain/navigation/ship_entity.feature:34[0m
    [32mWhen[0m [32mI attempt to create a ship with fuel_capacity -10[0m                       [1;30m# ship_steps.go:742 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "fuel_capacity cannot be negative"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_mismatched_fuel_capacity

  [1;37mScenario:[0m Create ship with mismatched fuel capacity                                            [1;30m# features/domain/navigation/ship_entity.feature:38[0m
    [32mWhen[0m [32mI attempt to create a ship with fuel object capacity 80 but fuel_capacity parameter 100[0m [1;30m# ship_steps.go:743 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "fuel capacity must match fuel_capacity"[0m           [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_negative_cargo_capacity

  [1;37mScenario:[0m Create ship with negative cargo capacity                              [1;30m# features/domain/navigation/ship_entity.feature:42[0m
    [32mWhen[0m [32mI attempt to create a ship with cargo_capacity -10[0m                       [1;30m# ship_steps.go:745 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "cargo_capacity cannot be negative"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_negative_cargo_units

  [1;37mScenario:[0m Create ship with negative cargo units                              [1;30m# features/domain/navigation/ship_entity.feature:46[0m
    [32mWhen[0m [32mI attempt to create a ship with cargo_units -5[0m                        [1;30m# ship_steps.go:746 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "cargo_units cannot be negative"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_cargo_units_exceeding_capacity

  [1;37mScenario:[0m Create ship with cargo units exceeding capacity                              [1;30m# features/domain/navigation/ship_entity.feature:50[0m
    [32mWhen[0m [32mI attempt to create a ship with cargo_capacity 40 and cargo_units 50[0m            [1;30m# ship_steps.go:747 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "cargo_units cannot exceed cargo_capacity"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_zero_engine_speed

  [1;37mScenario:[0m Create ship with zero engine speed                                [1;30m# features/domain/navigation/ship_entity.feature:54[0m
    [32mWhen[0m [32mI attempt to create a ship with engine_speed 0[0m                       [1;30m# ship_steps.go:749 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "engine_speed must be positive"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_negative_engine_speed

  [1;37mScenario:[0m Create ship with negative engine speed                            [1;30m# features/domain/navigation/ship_entity.feature:58[0m
    [32mWhen[0m [32mI attempt to create a ship with engine_speed -10[0m                     [1;30m# ship_steps.go:749 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "engine_speed must be positive"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Create_ship_with_invalid_nav_status

  [1;37mScenario:[0m Create ship with invalid nav status                    [1;30m# features/domain/navigation/ship_entity.feature:62[0m
    [32mWhen[0m [32mI attempt to create a ship with nav_status "FLYING"[0m       [1;30m# ship_steps.go:750 -> *shipContext[0m
    [32mThen[0m [32mship creation should fail with error "invalid nav_status"[0m [1;30m# ship_steps.go:751 -> *shipContext[0m
=== RUN   TestFeatures/Depart_from_docked_to_in_orbit

  [1;37mScenario:[0m Depart from docked to in orbit [1;30m# features/domain/navigation/ship_entity.feature:70[0m
    [32mGiven[0m [32ma docked ship at "X1-A1"[0m         [1;30m# ship_steps.go:765 -> *shipContext[0m
    [32mWhen[0m [32mthe ship departs[0m                  [1;30m# ship_steps.go:768 -> *shipContext[0m
    [32mThen[0m [32mthe ship should be in orbit[0m       [1;30m# ship_steps.go:762 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should not be docked[0m      [1;30m# ship_steps.go:770 -> *shipContext[0m
=== RUN   TestFeatures/Depart_when_in_transit_raises_error

  [1;37mScenario:[0m Depart when in transit raises error                               [1;30m# features/domain/navigation/ship_entity.feature:76[0m
    [32mGiven[0m [32ma ship in transit to "X1-B2"[0m                                        [1;30m# ship_steps.go:767 -> *shipContext[0m
    [32mWhen[0m [32mI attempt to depart the ship[0m                                         [1;30m# ship_steps.go:769 -> *shipContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot orbit while in transit"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Dock_from_in_orbit_to_docked

  [1;37mScenario:[0m Dock from in orbit to docked [1;30m# features/domain/navigation/ship_entity.feature:81[0m
    [32mGiven[0m [32ma ship in orbit at "X1-A1"[0m     [1;30m# ship_steps.go:766 -> *shipContext[0m
    [32mWhen[0m [32mthe ship docks[0m                  [1;30m# ship_steps.go:771 -> *shipContext[0m
    [32mThen[0m [32mthe ship should be docked[0m       [1;30m# ship_steps.go:773 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should not be in orbit[0m  [1;30m# ship_steps.go:774 -> *shipContext[0m
=== RUN   TestFeatures/Dock_when_in_transit_raises_error

  [1;37mScenario:[0m Dock when in transit raises error                                [1;30m# features/domain/navigation/ship_entity.feature:87[0m
    [32mGiven[0m [32ma ship in transit to "X1-B2"[0m                                       [1;30m# ship_steps.go:767 -> *shipContext[0m
    [32mWhen[0m [32mI attempt to dock the ship[0m                                          [1;30m# ship_steps.go:772 -> *shipContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot dock while in transit"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Start_transit_from_in_orbit

  [1;37mScenario:[0m Start transit from in orbit        [1;30m# features/domain/navigation/ship_entity.feature:92[0m
    [32mGiven[0m [32ma ship in orbit at "X1-A1"[0m           [1;30m# ship_steps.go:766 -> *shipContext[0m
    [32mWhen[0m [32mthe ship starts transit to "X1-B2"[0m    [1;30m# ship_steps.go:775 -> *shipContext[0m
    [32mThen[0m [32mthe ship should be in transit[0m         [1;30m# ship_steps.go:777 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should not be in orbit[0m        [1;30m# ship_steps.go:774 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should be at location "X1-B2"[0m [1;30m# ship_steps.go:756 -> *shipContext[0m
=== RUN   TestFeatures/Start_transit_when_not_in_orbit_raises_error

  [1;37mScenario:[0m Start transit when not in orbit raises error                               [1;30m# features/domain/navigation/ship_entity.feature:99[0m
    [32mGiven[0m [32ma docked ship at "X1-A1"[0m                                                     [1;30m# ship_steps.go:765 -> *shipContext[0m
    [32mWhen[0m [32mI attempt to start transit to "X1-B2"[0m                                         [1;30m# ship_steps.go:776 -> *shipContext[0m
    [32mThen[0m [32mthe operation should fail with error "ship must be in orbit to start transit"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Arrive_from_in_transit_to_in_orbit

  [1;37mScenario:[0m Arrive from in transit to in orbit [1;30m# features/domain/navigation/ship_entity.feature:104[0m
    [32mGiven[0m [32ma ship in transit to "X1-B2"[0m         [1;30m# ship_steps.go:767 -> *shipContext[0m
    [32mWhen[0m [32mthe ship arrives[0m                      [1;30m# ship_steps.go:779 -> *shipContext[0m
    [32mThen[0m [32mthe ship should be in orbit[0m           [1;30m# ship_steps.go:762 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should not be in transit[0m      [1;30m# ship_steps.go:778 -> *shipContext[0m
=== RUN   TestFeatures/Arrive_when_not_in_transit_raises_error

  [1;37mScenario:[0m Arrive when not in transit raises error                               [1;30m# features/domain/navigation/ship_entity.feature:110[0m
    [32mGiven[0m [32ma docked ship at "X1-A1"[0m                                                [1;30m# ship_steps.go:765 -> *shipContext[0m
    [32mWhen[0m [32mI attempt to arrive the ship[0m                                             [1;30m# ship_steps.go:780 -> *shipContext[0m
    [32mThen[0m [32mthe operation should fail with error "ship must be in transit to arrive"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Ensure_in_orbit_from_docked_transitions_to_orbit

  [1;37mScenario:[0m Ensure in orbit from docked transitions to orbit [1;30m# features/domain/navigation/ship_entity.feature:115[0m
    [32mGiven[0m [32ma docked ship at "X1-A1"[0m                           [1;30m# ship_steps.go:765 -> *shipContext[0m
    [32mWhen[0m [32mI ensure the ship is in orbit[0m                       [1;30m# ship_steps.go:781 -> *shipContext[0m
    [32mThen[0m [32mthe state change result should be true[0m              [1;30m# ship_steps.go:783 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should be in orbit[0m                          [1;30m# ship_steps.go:762 -> *shipContext[0m
=== RUN   TestFeatures/Ensure_in_orbit_when_already_in_orbit_returns_false

  [1;37mScenario:[0m Ensure in orbit when already in orbit returns false [1;30m# features/domain/navigation/ship_entity.feature:121[0m
    [32mGiven[0m [32ma ship in orbit at "X1-A1"[0m                            [1;30m# ship_steps.go:766 -> *shipContext[0m
    [32mWhen[0m [32mI ensure the ship is in orbit[0m                          [1;30m# ship_steps.go:781 -> *shipContext[0m
    [32mThen[0m [32mthe state change result should be false[0m                [1;30m# ship_steps.go:783 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should be in orbit[0m                             [1;30m# ship_steps.go:762 -> *shipContext[0m
=== RUN   TestFeatures/Ensure_in_orbit_when_in_transit_raises_error

  [1;37mScenario:[0m Ensure in orbit when in transit raises error                      [1;30m# features/domain/navigation/ship_entity.feature:127[0m
    [32mGiven[0m [32ma ship in transit to "X1-B2"[0m                                        [1;30m# ship_steps.go:767 -> *shipContext[0m
    [32mWhen[0m [32mI attempt to ensure the ship is in orbit[0m                             [1;30m# ship_steps.go:782 -> *shipContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot orbit while in transit"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Ensure_docked_from_in_orbit_transitions_to_docked

  [1;37mScenario:[0m Ensure docked from in orbit transitions to docked [1;30m# features/domain/navigation/ship_entity.feature:132[0m
    [32mGiven[0m [32ma ship in orbit at "X1-A1"[0m                          [1;30m# ship_steps.go:766 -> *shipContext[0m
    [32mWhen[0m [32mI ensure the ship is docked[0m                          [1;30m# ship_steps.go:784 -> *shipContext[0m
    [32mThen[0m [32mthe state change result should be true[0m               [1;30m# ship_steps.go:783 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should be docked[0m                             [1;30m# ship_steps.go:773 -> *shipContext[0m
=== RUN   TestFeatures/Ensure_docked_when_already_docked_returns_false

  [1;37mScenario:[0m Ensure docked when already docked returns false [1;30m# features/domain/navigation/ship_entity.feature:138[0m
    [32mGiven[0m [32ma docked ship at "X1-A1"[0m                          [1;30m# ship_steps.go:765 -> *shipContext[0m
    [32mWhen[0m [32mI ensure the ship is docked[0m                        [1;30m# ship_steps.go:784 -> *shipContext[0m
    [32mThen[0m [32mthe state change result should be false[0m            [1;30m# ship_steps.go:783 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should be docked[0m                           [1;30m# ship_steps.go:773 -> *shipContext[0m
=== RUN   TestFeatures/Ensure_docked_when_in_transit_raises_error

  [1;37mScenario:[0m Ensure docked when in transit raises error                       [1;30m# features/domain/navigation/ship_entity.feature:144[0m
    [32mGiven[0m [32ma ship in transit to "X1-B2"[0m                                       [1;30m# ship_steps.go:767 -> *shipContext[0m
    [32mWhen[0m [32mI attempt to ensure the ship is docked[0m                              [1;30m# ship_steps.go:785 -> *shipContext[0m
    [32mThen[0m [32mthe operation should fail with error "cannot dock while in transit"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Consume_fuel_reduces_fuel_amount

  [1;37mScenario:[0m Consume fuel reduces fuel amount   [1;30m# features/domain/navigation/ship_entity.feature:153[0m
    [32mGiven[0m [32ma ship with 100 units of fuel[0m        [1;30m# ship_steps.go:789 -> *shipContext[0m
    [32mWhen[0m [32mthe ship consumes 30 units of fuel[0m    [1;30m# ship_steps.go:791 -> *shipContext[0m
    [32mThen[0m [32mthe ship should have 70 units of fuel[0m [1;30m# ship_steps.go:757 -> *shipContext[0m
=== RUN   TestFeatures/Consume_fuel_with_zero_amount

  [1;37mScenario:[0m Consume fuel with zero amount       [1;30m# features/domain/navigation/ship_entity.feature:158[0m
    [32mGiven[0m [32ma ship with 100 units of fuel[0m         [1;30m# ship_steps.go:789 -> *shipContext[0m
    [32mWhen[0m [32mthe ship consumes 0 units of fuel[0m      [1;30m# ship_steps.go:791 -> *shipContext[0m
    [32mThen[0m [32mthe ship should have 100 units of fuel[0m [1;30m# ship_steps.go:757 -> *shipContext[0m
=== RUN   TestFeatures/Consume_fuel_with_negative_amount_raises_error

  [1;37mScenario:[0m Consume fuel with negative amount raises error                     [1;30m# features/domain/navigation/ship_entity.feature:163[0m
    [32mGiven[0m [32ma ship with 100 units of fuel[0m                                        [1;30m# ship_steps.go:789 -> *shipContext[0m
    [32mWhen[0m [32mI attempt to consume -10 units of fuel[0m                                [1;30m# value_object_steps.go:494 -> *valueObjectContext[0m
    [31mThen[0m [31mthe operation should fail with error "fuel amount cannot be negative"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
    [1;31mexpected error containing 'fuel amount cannot be negative' but got 'consume amount cannot be negative'[0m
    suite.go:640: expected error containing 'fuel amount cannot be negative' but got 'consume amount cannot be negative'
=== RUN   TestFeatures/Consume_fuel_more_than_available_raises_error

  [1;37mScenario:[0m Consume fuel more than available raises error         [1;30m# features/domain/navigation/ship_entity.feature:168[0m
    [32mGiven[0m [32ma ship with 100 units of fuel[0m                           [1;30m# ship_steps.go:789 -> *shipContext[0m
    [31mWhen[0m [31mI attempt to consume 150 units of fuel[0m                   [1;30m# value_object_steps.go:494 -> *valueObjectContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Fuel).Consume
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/fuel.go:42
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iAttemptToConsumeUnitsOfFuel
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:166
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe operation should fail with error "insufficient fuel"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Fuel).Consume
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/fuel.go:42
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iAttemptToConsumeUnitsOfFuel
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:166
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Consume_all_fuel

  [1;37mScenario:[0m Consume all fuel                  [1;30m# features/domain/navigation/ship_entity.feature:173[0m
    [32mGiven[0m [32ma ship with 100 units of fuel[0m       [1;30m# ship_steps.go:789 -> *shipContext[0m
    [32mWhen[0m [32mthe ship consumes 100 units of fuel[0m  [1;30m# ship_steps.go:791 -> *shipContext[0m
    [32mThen[0m [32mthe ship should have 0 units of fuel[0m [1;30m# ship_steps.go:757 -> *shipContext[0m
=== RUN   TestFeatures/Refuel_increases_fuel_amount

  [1;37mScenario:[0m Refuel increases fuel amount                [1;30m# features/domain/navigation/ship_entity.feature:178[0m
    [32mGiven[0m [32ma ship with 50 units of fuel and capacity 100[0m [1;30m# ship_steps.go:790 -> *shipContext[0m
    [32mWhen[0m [32mthe ship refuels 30 units[0m                      [1;30m# ship_steps.go:793 -> *shipContext[0m
    [32mThen[0m [32mthe ship should have 80 units of fuel[0m          [1;30m# ship_steps.go:757 -> *shipContext[0m
=== RUN   TestFeatures/Refuel_with_zero_amount

  [1;37mScenario:[0m Refuel with zero amount             [1;30m# features/domain/navigation/ship_entity.feature:183[0m
    [32mGiven[0m [32ma ship with 100 units of fuel[0m         [1;30m# ship_steps.go:789 -> *shipContext[0m
    [32mWhen[0m [32mthe ship refuels 0 units[0m               [1;30m# ship_steps.go:793 -> *shipContext[0m
    [32mThen[0m [32mthe ship should have 100 units of fuel[0m [1;30m# ship_steps.go:757 -> *shipContext[0m
=== RUN   TestFeatures/Refuel_with_negative_amount_raises_error

  [1;37mScenario:[0m Refuel with negative amount raises error                           [1;30m# features/domain/navigation/ship_entity.feature:188[0m
    [32mGiven[0m [32ma ship with 100 units of fuel[0m                                        [1;30m# ship_steps.go:789 -> *shipContext[0m
    [32mWhen[0m [32mI attempt to refuel -10 units[0m                                         [1;30m# ship_steps.go:794 -> *shipContext[0m
    [32mThen[0m [32mthe operation should fail with error "fuel amount cannot be negative"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Refuel_caps_at_capacity

  [1;37mScenario:[0m Refuel caps at capacity                     [1;30m# features/domain/navigation/ship_entity.feature:193[0m
    [32mGiven[0m [32ma ship with 50 units of fuel and capacity 100[0m [1;30m# ship_steps.go:790 -> *shipContext[0m
    [32mWhen[0m [32mthe ship refuels 80 units[0m                      [1;30m# ship_steps.go:793 -> *shipContext[0m
    [32mThen[0m [32mthe ship should have 100 units of fuel[0m         [1;30m# ship_steps.go:757 -> *shipContext[0m
=== RUN   TestFeatures/Refuel_to_full_when_partially_filled

  [1;37mScenario:[0m Refuel to full when partially filled        [1;30m# features/domain/navigation/ship_entity.feature:198[0m
    [32mGiven[0m [32ma ship with 50 units of fuel and capacity 100[0m [1;30m# ship_steps.go:790 -> *shipContext[0m
    [32mWhen[0m [32mthe ship refuels to full[0m                       [1;30m# ship_steps.go:795 -> *shipContext[0m
    [32mThen[0m [32mthe fuel added should be 50 units[0m              [1;30m# ship_steps.go:796 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should have 100 units of fuel[0m          [1;30m# ship_steps.go:757 -> *shipContext[0m
=== RUN   TestFeatures/Refuel_to_full_when_already_full

  [1;37mScenario:[0m Refuel to full when already full             [1;30m# features/domain/navigation/ship_entity.feature:204[0m
    [32mGiven[0m [32ma ship with 100 units of fuel and capacity 100[0m [1;30m# ship_steps.go:790 -> *shipContext[0m
    [32mWhen[0m [32mthe ship refuels to full[0m                        [1;30m# ship_steps.go:795 -> *shipContext[0m
    [32mThen[0m [32mthe fuel added should be 0 units[0m                [1;30m# ship_steps.go:796 -> *shipContext[0m
    [32mAnd[0m [32mthe ship should have 100 units of fuel[0m           [1;30m# ship_steps.go:757 -> *shipContext[0m
=== RUN   TestFeatures/Can_navigate_to_nearby_destination_with_enough_fuel

  [1;37mScenario:[0m Can navigate to nearby destination with enough fuel           [1;30m# features/domain/navigation/ship_entity.feature:214[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0) and 100 units of fuel[0m [1;30m# ship_steps.go:799 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (100, 0)[0m                        [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI check if the ship can navigate to "X1-B2"[0m                      [1;30m# ship_steps.go:802 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m                                        [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Cannot_navigate_to_destination_without_enough_fuel

  [1;37mScenario:[0m Cannot navigate to destination without enough fuel          [1;30m# features/domain/navigation/ship_entity.feature:220[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0) and 0 units of fuel[0m [1;30m# ship_steps.go:799 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-C3" at coordinates (200, 0)[0m                      [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI check if the ship can navigate to "X1-C3"[0m                    [1;30m# ship_steps.go:802 -> *shipContext[0m
    [32mThen[0m [32mthe result should be false[0m                                     [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Can_navigate_to_same_location

  [1;37mScenario:[0m Can navigate to same location                                 [1;30m# features/domain/navigation/ship_entity.feature:226[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0) and 100 units of fuel[0m [1;30m# ship_steps.go:799 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship can navigate to "X1-A1"[0m                      [1;30m# ship_steps.go:802 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m                                        [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_fuel_for_trip_with_cruise_mode

  [1;37mScenario:[0m Calculate fuel for trip with cruise mode           [1;30m# features/domain/navigation/ship_entity.feature:231[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0)[0m            [1;30m# ship_steps.go:804 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (100, 0)[0m             [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate fuel required to "X1-B2" with CRUISE mode[0m [1;30m# ship_steps.go:805 -> *shipContext[0m
    [32mThen[0m [32mthe fuel required should be 100 units[0m                 [1;30m# ship_steps.go:806 -> *shipContext[0m
=== RUN   TestFeatures/Calculate_fuel_for_trip_with_drift_mode

  [1;37mScenario:[0m Calculate fuel for trip with drift mode           [1;30m# features/domain/navigation/ship_entity.feature:237[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0)[0m           [1;30m# ship_steps.go:804 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (100, 0)[0m            [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate fuel required to "X1-B2" with DRIFT mode[0m [1;30m# ship_steps.go:805 -> *shipContext[0m
    [32mThen[0m [32mthe fuel required should be 1 units[0m                  [1;30m# ship_steps.go:806 -> *shipContext[0m
=== RUN   TestFeatures/Calculate_fuel_for_trip_with_burn_mode

  [1;37mScenario:[0m Calculate fuel for trip with burn mode           [1;30m# features/domain/navigation/ship_entity.feature:243[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0)[0m          [1;30m# ship_steps.go:804 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (100, 0)[0m           [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate fuel required to "X1-B2" with BURN mode[0m [1;30m# ship_steps.go:805 -> *shipContext[0m
    [32mThen[0m [32mthe fuel required should be 200 units[0m               [1;30m# ship_steps.go:806 -> *shipContext[0m
=== RUN   TestFeatures/Needs_refuel_for_journey_with_low_fuel

  [1;37mScenario:[0m Needs refuel for journey with low fuel                       [1;30m# features/domain/navigation/ship_entity.feature:249[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0) and 10 units of fuel[0m [1;30m# ship_steps.go:799 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-C3" at coordinates (200, 0)[0m                       [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI check if the ship needs refuel for journey to "X1-C3"[0m         [1;30m# ship_steps.go:807 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m                                       [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Does_not_need_refuel_with_enough_fuel_and_zero_safety_margin

  [1;37mScenario:[0m Does not need refuel with enough fuel and zero safety margin                [1;30m# features/domain/navigation/ship_entity.feature:255[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0) and 100 units of fuel[0m               [1;30m# ship_steps.go:799 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (100, 0)[0m                                      [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI check if the ship needs refuel for journey to "X1-B2" with safety margin 0.0[0m [1;30m# ship_steps.go:808 -> *shipContext[0m
    [32mThen[0m [32mthe result should be false[0m                                                     [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_travel_time_with_cruise_mode

  [1;37mScenario:[0m Calculate travel time with cruise mode                      [1;30m# features/domain/navigation/ship_entity.feature:261[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0) and engine speed 30[0m [1;30m# ship_steps.go:810 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (100, 0)[0m                      [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate travel time to "X1-B2" with CRUISE mode[0m            [1;30m# ship_steps.go:812 -> *shipContext[0m
    [32mThen[0m [32mthe travel time should be 103 seconds[0m                          [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_travel_time_with_drift_mode

  [1;37mScenario:[0m Calculate travel time with drift mode                       [1;30m# features/domain/navigation/ship_entity.feature:267[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0) and engine speed 30[0m [1;30m# ship_steps.go:810 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (100, 0)[0m                      [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate travel time to "X1-B2" with DRIFT mode[0m             [1;30m# ship_steps.go:812 -> *shipContext[0m
    [32mThen[0m [32mthe travel time should be 86 seconds[0m                           [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_travel_time_with_burn_mode

  [1;37mScenario:[0m Calculate travel time with burn mode                        [1;30m# features/domain/navigation/ship_entity.feature:273[0m
    [32mGiven[0m [32ma ship at "X1-A1" with coordinates (0, 0) and engine speed 30[0m [1;30m# ship_steps.go:810 -> *shipContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (100, 0)[0m                      [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate travel time to "X1-B2" with BURN mode[0m              [1;30m# ship_steps.go:812 -> *shipContext[0m
    [32mThen[0m [32mthe travel time should be 50 seconds[0m                           [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Select_optimal_flight_mode_with_high_fuel

  [1;37mScenario:[0m Select optimal flight mode with high fuel   [1;30m# features/domain/navigation/ship_entity.feature:279[0m
    [32mGiven[0m [32ma ship with 100 units of fuel at distance 100[0m [1;30m# ship_steps.go:814 -> *shipContext[0m
    [32mWhen[0m [32mI select optimal flight mode for distance 100[0m  [1;30m# ship_steps.go:815 -> *shipContext[0m
    [31mThen[0m [31mthe selected mode should be BURN[0m               [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
    [1;31mexpected mode 'BURN' but got 'CRUISE'[0m
    suite.go:640: expected mode 'BURN' but got 'CRUISE'
=== RUN   TestFeatures/Select_optimal_flight_mode_with_low_fuel

  [1;37mScenario:[0m Select optimal flight mode with low fuel   [1;30m# features/domain/navigation/ship_entity.feature:284[0m
    [32mGiven[0m [32ma ship with 10 units of fuel at distance 100[0m [1;30m# ship_steps.go:814 -> *shipContext[0m
    [32mWhen[0m [32mI select optimal flight mode for distance 100[0m [1;30m# ship_steps.go:815 -> *shipContext[0m
    [31mThen[0m [31mthe selected mode should be DRIFT[0m             [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
    [1;31mexpected mode 'DRIFT' but got 'CRUISE'[0m
    suite.go:640: expected mode 'DRIFT' but got 'CRUISE'
=== RUN   TestFeatures/Select_optimal_flight_mode_with_medium_fuel

  [1;37mScenario:[0m Select optimal flight mode with medium fuel [1;30m# features/domain/navigation/ship_entity.feature:289[0m
    [31mGiven[0m [31ma ship with 104 units of fuel at distance 100[0m [1;30m# ship_steps.go:814 -> *shipContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/navigation.(*Ship).validate
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/navigation/ship.go:95
github.com/andrescamacho/spacetraders-go/internal/domain/navigation.NewShip
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/navigation/ship.go:75
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*shipContext).aShipWithUnitsOfFuelAtDistance
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/ship_steps.go:615
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mWhen[0m [36mI select optimal flight mode for distance 100[0m  [1;30m# ship_steps.go:815 -> *shipContext[0m
    [36mThen[0m [36mthe selected mode should be CRUISE[0m             [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/navigation.(*Ship).validate
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/navigation/ship.go:95
        github.com/andrescamacho/spacetraders-go/internal/domain/navigation.NewShip
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/navigation/ship.go:75
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*shipContext).aShipWithUnitsOfFuelAtDistance
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/ship_steps.go:615
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Has_cargo_space_with_empty_cargo

  [1;37mScenario:[0m Has cargo space with empty cargo              [1;30m# features/domain/navigation/ship_entity.feature:298[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 0[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship has cargo space for 1 units[0m  [1;30m# ship_steps.go:820 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m                        [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Has_cargo_space_with_partial_cargo

  [1;37mScenario:[0m Has cargo space with partial cargo             [1;30m# features/domain/navigation/ship_entity.feature:303[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 20[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship has cargo space for 1 units[0m   [1;30m# ship_steps.go:820 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m                         [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Has_cargo_space_with_full_cargo

  [1;37mScenario:[0m Has cargo space with full cargo                [1;30m# features/domain/navigation/ship_entity.feature:308[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 40[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship has cargo space for 1 units[0m   [1;30m# ship_steps.go:820 -> *shipContext[0m
    [32mThen[0m [32mthe result should be false[0m                        [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Has_cargo_space_with_specific_units

  [1;37mScenario:[0m Has cargo space with specific units            [1;30m# features/domain/navigation/ship_entity.feature:313[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 35[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship has cargo space for 5 units[0m   [1;30m# ship_steps.go:820 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m                         [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Has_cargo_space_with_specific_units_exceeding_available

  [1;37mScenario:[0m Has cargo space with specific units exceeding available [1;30m# features/domain/navigation/ship_entity.feature:318[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 35[0m          [1;30m# ship_steps.go:819 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship has cargo space for 6 units[0m            [1;30m# ship_steps.go:820 -> *shipContext[0m
    [32mThen[0m [32mthe result should be false[0m                                 [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Available_cargo_space_with_empty_cargo

  [1;37mScenario:[0m Available cargo space with empty cargo        [1;30m# features/domain/navigation/ship_entity.feature:323[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 0[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [32mWhen[0m [32mI check available cargo space[0m                    [1;30m# ship_steps.go:821 -> *shipContext[0m
    [32mThen[0m [32mthe available space should be 40 units[0m           [1;30m# ship_steps.go:822 -> *shipContext[0m
=== RUN   TestFeatures/Available_cargo_space_with_partial_cargo

  [1;37mScenario:[0m Available cargo space with partial cargo       [1;30m# features/domain/navigation/ship_entity.feature:328[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 25[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [32mWhen[0m [32mI check available cargo space[0m                     [1;30m# ship_steps.go:821 -> *shipContext[0m
    [32mThen[0m [32mthe available space should be 15 units[0m            [1;30m# ship_steps.go:822 -> *shipContext[0m
=== RUN   TestFeatures/Available_cargo_space_with_full_cargo

  [1;37mScenario:[0m Available cargo space with full cargo          [1;30m# features/domain/navigation/ship_entity.feature:333[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 40[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [32mWhen[0m [32mI check available cargo space[0m                     [1;30m# ship_steps.go:821 -> *shipContext[0m
    [32mThen[0m [32mthe available space should be 0 units[0m             [1;30m# ship_steps.go:822 -> *shipContext[0m
=== RUN   TestFeatures/Is_cargo_empty_when_empty

  [1;37mScenario:[0m Is cargo empty when empty                     [1;30m# features/domain/navigation/ship_entity.feature:338[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 0[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [31mWhen[0m [31mI check if cargo is empty[0m                        [1;30m# value_object_steps.go:544 -> *valueObjectContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsEmpty
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:108
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsEmpty
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:434
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe result should be true[0m                        [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsEmpty
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:108
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsEmpty
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:434
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Is_cargo_empty_when_not_empty

  [1;37mScenario:[0m Is cargo empty when not empty                 [1;30m# features/domain/navigation/ship_entity.feature:343[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 1[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [31mWhen[0m [31mI check if cargo is empty[0m                        [1;30m# value_object_steps.go:544 -> *valueObjectContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsEmpty
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:108
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsEmpty
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:434
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe result should be false[0m                       [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsEmpty
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:108
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsEmpty
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:434
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Is_cargo_full_when_full

  [1;37mScenario:[0m Is cargo full when full                        [1;30m# features/domain/navigation/ship_entity.feature:348[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 40[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [31mWhen[0m [31mI check if cargo is full[0m                          [1;30m# value_object_steps.go:545 -> *valueObjectContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsFull
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:113
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsFull
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:439
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe result should be true[0m                         [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsFull
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:113
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsFull
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:439
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Is_cargo_full_when_not_full

  [1;37mScenario:[0m Is cargo full when not full                   [1;30m# features/domain/navigation/ship_entity.feature:353[0m
    [32mGiven[0m [32ma ship with cargo capacity 40 and cargo units 0[0m [1;30m# ship_steps.go:819 -> *shipContext[0m
    [31mWhen[0m [31mI check if cargo is full[0m                         [1;30m# value_object_steps.go:545 -> *valueObjectContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsFull
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:113
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsFull
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:439
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe result should be false[0m                       [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsFull
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:113
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsFull
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:439
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Is_docked_when_docked

  [1;37mScenario:[0m Is docked when docked      [1;30m# features/domain/navigation/ship_entity.feature:362[0m
    [32mGiven[0m [32ma docked ship at "X1-A1"[0m     [1;30m# ship_steps.go:765 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship is docked[0m [1;30m# ship_steps.go:828 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m     [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_docked_when_in_orbit

  [1;37mScenario:[0m Is docked when in orbit    [1;30m# features/domain/navigation/ship_entity.feature:367[0m
    [32mGiven[0m [32ma ship in orbit at "X1-A1"[0m   [1;30m# ship_steps.go:766 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship is docked[0m [1;30m# ship_steps.go:828 -> *shipContext[0m
    [32mThen[0m [32mthe result should be false[0m    [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_in_orbit_when_in_orbit

  [1;37mScenario:[0m Is in orbit when in orbit    [1;30m# features/domain/navigation/ship_entity.feature:372[0m
    [32mGiven[0m [32ma ship in orbit at "X1-A1"[0m     [1;30m# ship_steps.go:766 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship is in orbit[0m [1;30m# ship_steps.go:829 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m       [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_in_orbit_when_docked

  [1;37mScenario:[0m Is in orbit when docked      [1;30m# features/domain/navigation/ship_entity.feature:377[0m
    [32mGiven[0m [32ma docked ship at "X1-A1"[0m       [1;30m# ship_steps.go:765 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship is in orbit[0m [1;30m# ship_steps.go:829 -> *shipContext[0m
    [32mThen[0m [32mthe result should be false[0m      [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_in_transit_when_in_transit

  [1;37mScenario:[0m Is in transit when in transit  [1;30m# features/domain/navigation/ship_entity.feature:382[0m
    [32mGiven[0m [32ma ship in transit to "X1-B2"[0m     [1;30m# ship_steps.go:767 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship is in transit[0m [1;30m# ship_steps.go:830 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m         [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_in_transit_when_docked

  [1;37mScenario:[0m Is in transit when docked      [1;30m# features/domain/navigation/ship_entity.feature:387[0m
    [32mGiven[0m [32ma docked ship at "X1-A1"[0m         [1;30m# ship_steps.go:765 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship is in transit[0m [1;30m# ship_steps.go:830 -> *shipContext[0m
    [32mThen[0m [32mthe result should be false[0m        [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_at_location_when_at_location

  [1;37mScenario:[0m Is at location when at location         [1;30m# features/domain/navigation/ship_entity.feature:392[0m
    [32mGiven[0m [32ma ship at "X1-A1"[0m                         [1;30m# ship_steps.go:827 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship is at location "X1-A1"[0m [1;30m# ship_steps.go:831 -> *shipContext[0m
    [32mThen[0m [32mthe result should be true[0m                  [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_at_location_when_not_at_location

  [1;37mScenario:[0m Is at location when not at location     [1;30m# features/domain/navigation/ship_entity.feature:397[0m
    [32mGiven[0m [32ma ship at "X1-A1"[0m                         [1;30m# ship_steps.go:827 -> *shipContext[0m
    [32mWhen[0m [32mI check if the ship is at location "X1-B2"[0m [1;30m# ship_steps.go:831 -> *shipContext[0m
    [32mThen[0m [32mthe result should be false[0m                 [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Should_refuel_opportunistically_when_at_fuel_station_with_low_fuel

  [1;37mScenario:[0m Should refuel opportunistically when at fuel station with low fuel         [1;30m# features/domain/navigation/ship_entity.feature:406[0m
    [33mGiven[0m [33ma ship at "X1-A1" with 30 units of fuel and capacity 100[0m
    [33mAnd[0m [33mwaypoint "X1-A1" has trait "MARKETPLACE" and fuel available[0m
    [33mWhen[0m [33mI check if ship should refuel opportunistically at "X1-A1" with threshold 0.5[0m
    [36mThen[0m [36mthe result should be true[0m                                                     [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Should_not_refuel_opportunistically_when_fuel_above_threshold

  [1;37mScenario:[0m Should not refuel opportunistically when fuel above threshold              [1;30m# features/domain/navigation/ship_entity.feature:412[0m
    [33mGiven[0m [33ma ship at "X1-A1" with 60 units of fuel and capacity 100[0m
    [33mAnd[0m [33mwaypoint "X1-A1" has trait "MARKETPLACE" and fuel available[0m
    [33mWhen[0m [33mI check if ship should refuel opportunistically at "X1-A1" with threshold 0.5[0m
    [36mThen[0m [36mthe result should be false[0m                                                    [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Should_not_refuel_opportunistically_when_no_fuel_available_at_waypoint

  [1;37mScenario:[0m Should not refuel opportunistically when no fuel available at waypoint     [1;30m# features/domain/navigation/ship_entity.feature:418[0m
    [33mGiven[0m [33ma ship at "X1-A1" with 30 units of fuel and capacity 100[0m
    [33mAnd[0m [33mwaypoint "X1-A1" has no fuel available[0m
    [33mWhen[0m [33mI check if ship should refuel opportunistically at "X1-A1" with threshold 0.5[0m
    [36mThen[0m [36mthe result should be false[0m                                                    [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Should_prevent_drift_mode_when_fuel_below_threshold

  [1;37mScenario:[0m Should prevent drift mode when fuel below threshold       [1;30m# features/domain/navigation/ship_entity.feature:424[0m
    [32mGiven[0m [32ma ship with 40 units of fuel and capacity 100[0m               [1;30m# ship_steps.go:790 -> *shipContext[0m
    [33mAnd[0m [33ma route segment requiring 50 units of fuel in DRIFT mode[0m
    [33mWhen[0m [33mI check if ship should prevent drift mode with threshold 0.5[0m
    [36mThen[0m [36mthe result should be true[0m                                    [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Should_not_prevent_drift_mode_when_fuel_above_threshold

  [1;37mScenario:[0m Should not prevent drift mode when fuel above threshold   [1;30m# features/domain/navigation/ship_entity.feature:430[0m
    [32mGiven[0m [32ma ship with 60 units of fuel and capacity 100[0m               [1;30m# ship_steps.go:790 -> *shipContext[0m
    [33mAnd[0m [33ma route segment requiring 50 units of fuel in DRIFT mode[0m
    [33mWhen[0m [33mI check if ship should prevent drift mode with threshold 0.5[0m
    [36mThen[0m [36mthe result should be false[0m                                   [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Should_not_prevent_drift_mode_when_not_using_drift_flight_mode

  [1;37mScenario:[0m Should not prevent drift mode when not using drift flight mode [1;30m# features/domain/navigation/ship_entity.feature:436[0m
    [32mGiven[0m [32ma ship with 40 units of fuel and capacity 100[0m                    [1;30m# ship_steps.go:790 -> *shipContext[0m
    [33mAnd[0m [33ma route segment requiring 50 units of fuel in CRUISE mode[0m
    [33mWhen[0m [33mI check if ship should prevent drift mode with threshold 0.5[0m
    [36mThen[0m [36mthe result should be false[0m                                        [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m

[1;37mFeature:[0m Cargo Value Object
  As a cargo management system
  I want to work with immutable cargo value objects
  So that cargo operations are safe and predictable
=== RUN   TestFeatures/Create_cargo_item_with_valid_data

  [1;37mScenario:[0m Create cargo item with valid data                                    [1;30m# features/domain/shared/cargo_value_object.feature:10[0m
    [32mWhen[0m [32mI create a cargo item with symbol "IRON_ORE", name "Iron Ore", units 10[0m [1;30m# value_object_steps.go:508 -> *valueObjectContext[0m
    [32mThen[0m [32mthe cargo item should have symbol "IRON_ORE"[0m                            [1;30m# value_object_steps.go:513 -> *valueObjectContext[0m
    [32mAnd[0m [32mthe cargo item should have name "Iron Ore"[0m                               [1;30m# value_object_steps.go:514 -> *valueObjectContext[0m
    [32mAnd[0m [32mthe cargo item should have units 10[0m                                      [1;30m# value_object_steps.go:515 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_cargo_item_with_empty_symbol_fails

  [1;37mScenario:[0m Create cargo item with empty symbol fails                              [1;30m# features/domain/shared/cargo_value_object.feature:16[0m
    [32mWhen[0m [32mI attempt to create a cargo item with empty symbol[0m                        [1;30m# value_object_steps.go:510 -> *valueObjectContext[0m
    [32mThen[0m [32mcargo item creation should fail with error "cargo symbol cannot be empty"[0m [1;30m# value_object_steps.go:512 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_cargo_item_with_negative_units_fails

  [1;37mScenario:[0m Create cargo item with negative units fails                              [1;30m# features/domain/shared/cargo_value_object.feature:20[0m
    [32mWhen[0m [32mI attempt to create a cargo item with units -5[0m                              [1;30m# value_object_steps.go:511 -> *valueObjectContext[0m
    [32mThen[0m [32mcargo item creation should fail with error "cargo units cannot be negative"[0m [1;30m# value_object_steps.go:512 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_cargo_item_with_zero_units_succeeds

  [1;37mScenario:[0m Create cargo item with zero units succeeds                          [1;30m# features/domain/shared/cargo_value_object.feature:24[0m
    [32mWhen[0m [32mI create a cargo item with symbol "IRON_ORE", name "Iron Ore", units 0[0m [1;30m# value_object_steps.go:508 -> *valueObjectContext[0m
    [32mThen[0m [32mthe cargo item should have units 0[0m                                     [1;30m# value_object_steps.go:515 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_cargo_with_valid_data

  [1;37mScenario:[0m Create cargo with valid data                          [1;30m# features/domain/shared/cargo_value_object.feature:32[0m
    [32mGiven[0m [32ma cargo item with symbol "IRON_ORE" and units 10[0m        [1;30m# value_object_steps.go:518 -> *valueObjectContext[0m
    [32mWhen[0m [32mI create cargo with capacity 40, units 10, and inventory[0m [1;30m# value_object_steps.go:519 -> *valueObjectContext[0m
    [32mThen[0m [32mthe cargo should have capacity 40[0m                        [1;30m# value_object_steps.go:525 -> *valueObjectContext[0m
    [32mAnd[0m [32mthe cargo should have units 10[0m                            [1;30m# value_object_steps.go:526 -> *valueObjectContext[0m
    [32mAnd[0m [32mthe cargo inventory should contain 1 items[0m                [1;30m# value_object_steps.go:527 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_empty_cargo_succeeds

  [1;37mScenario:[0m Create empty cargo succeeds                                [1;30m# features/domain/shared/cargo_value_object.feature:39[0m
    [32mWhen[0m [32mI create cargo with capacity 40, units 0, and empty inventory[0m [1;30m# value_object_steps.go:520 -> *valueObjectContext[0m
    [32mThen[0m [32mthe cargo should have capacity 40[0m                             [1;30m# value_object_steps.go:525 -> *valueObjectContext[0m
    [32mAnd[0m [32mthe cargo should have units 0[0m                                  [1;30m# value_object_steps.go:526 -> *valueObjectContext[0m
    [32mAnd[0m [32mthe cargo should be empty[0m                                      [1;30m# value_object_steps.go:528 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_cargo_with_negative_units_fails

  [1;37mScenario:[0m Create cargo with negative units fails                              [1;30m# features/domain/shared/cargo_value_object.feature:45[0m
    [32mWhen[0m [32mI attempt to create cargo with units -5[0m                                [1;30m# value_object_steps.go:521 -> *valueObjectContext[0m
    [32mThen[0m [32mcargo creation should fail with error "cargo units cannot be negative"[0m [1;30m# value_object_steps.go:524 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_cargo_with_negative_capacity_fails

  [1;37mScenario:[0m Create cargo with negative capacity fails                              [1;30m# features/domain/shared/cargo_value_object.feature:49[0m
    [32mWhen[0m [32mI attempt to create cargo with capacity -10[0m                               [1;30m# value_object_steps.go:522 -> *valueObjectContext[0m
    [32mThen[0m [32mcargo creation should fail with error "cargo capacity cannot be negative"[0m [1;30m# value_object_steps.go:524 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_cargo_with_units_exceeding_capacity_fails

  [1;37mScenario:[0m Create cargo with units exceeding capacity fails                       [1;30m# features/domain/shared/cargo_value_object.feature:53[0m
    [32mWhen[0m [32mI attempt to create cargo with capacity 40 and units 50[0m                   [1;30m# value_object_steps.go:523 -> *valueObjectContext[0m
    [32mThen[0m [32mcargo creation should fail with error "cargo units 50 exceed capacity 40"[0m [1;30m# value_object_steps.go:524 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_cargo_with_mismatched_inventory_sum_fails

  [1;37mScenario:[0m Create cargo with mismatched inventory sum fails                        [1;30m# features/domain/shared/cargo_value_object.feature:57[0m
    [32mGiven[0m [32ma cargo item with symbol "IRON_ORE" and units 10[0m                          [1;30m# value_object_steps.go:518 -> *valueObjectContext[0m
    [33mWhen[0m [33mI attempt to create cargo with capacity 40, units 20, and inventory[0m
    [36mThen[0m [36mcargo creation should fail with error "inventory sum 10 != total units 20"[0m [1;30m# value_object_steps.go:524 -> *valueObjectContext[0m
=== RUN   TestFeatures/Has_item_returns_true_when_item_exists

  [1;37mScenario:[0m Has item returns true when item exists             [1;30m# features/domain/shared/cargo_value_object.feature:66[0m
    [32mGiven[0m [32mcargo with items:[0m                                    [1;30m# value_object_steps.go:531 -> *valueObjectContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m10[0m    |
      | [36mCOPPER[0m   | [36m5[0m     |
    [32mWhen[0m [32mI check if cargo has item "IRON_ORE" with min units 5[0m [1;30m# value_object_steps.go:532 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be true[0m                             [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Has_item_returns_false_when_insufficient_units

  [1;37mScenario:[0m Has item returns false when insufficient units      [1;30m# features/domain/shared/cargo_value_object.feature:74[0m
    [32mGiven[0m [32mcargo with items:[0m                                     [1;30m# value_object_steps.go:531 -> *valueObjectContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m10[0m    |
    [32mWhen[0m [32mI check if cargo has item "IRON_ORE" with min units 15[0m [1;30m# value_object_steps.go:532 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be false[0m                             [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Has_item_returns_false_when_item_not_present

  [1;37mScenario:[0m Has item returns false when item not present     [1;30m# features/domain/shared/cargo_value_object.feature:81[0m
    [32mGiven[0m [32mcargo with items:[0m                                  [1;30m# value_object_steps.go:531 -> *valueObjectContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m10[0m    |
    [32mWhen[0m [32mI check if cargo has item "COPPER" with min units 1[0m [1;30m# value_object_steps.go:532 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be false[0m                          [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Get_item_units_returns_correct_amount

  [1;37mScenario:[0m Get item units returns correct amount [1;30m# features/domain/shared/cargo_value_object.feature:88[0m
    [32mGiven[0m [32mcargo with items:[0m                       [1;30m# value_object_steps.go:531 -> *valueObjectContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m10[0m    |
      | [36mCOPPER[0m   | [36m5[0m     |
    [32mWhen[0m [32mI get units of item "IRON_ORE"[0m           [1;30m# value_object_steps.go:533 -> *valueObjectContext[0m
    [32mThen[0m [32mthe item units should be 10[0m              [1;30m# value_object_steps.go:534 -> *valueObjectContext[0m
=== RUN   TestFeatures/Get_item_units_returns_zero_for_non-existent_item

  [1;37mScenario:[0m Get item units returns zero for non-existent item [1;30m# features/domain/shared/cargo_value_object.feature:96[0m
    [32mGiven[0m [32mcargo with items:[0m                                   [1;30m# value_object_steps.go:531 -> *valueObjectContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m10[0m    |
    [32mWhen[0m [32mI get units of item "GOLD"[0m                           [1;30m# value_object_steps.go:533 -> *valueObjectContext[0m
    [32mThen[0m [32mthe item units should be 0[0m                           [1;30m# value_object_steps.go:534 -> *valueObjectContext[0m
=== RUN   TestFeatures/Has_items_other_than_specific_symbol

  [1;37mScenario:[0m Has items other than specific symbol          [1;30m# features/domain/shared/cargo_value_object.feature:103[0m
    [32mGiven[0m [32mcargo with items:[0m                               [1;30m# value_object_steps.go:531 -> *valueObjectContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m10[0m    |
      | [36mCOPPER[0m   | [36m5[0m     |
    [32mWhen[0m [32mI check if cargo has items other than "IRON_ORE"[0m [1;30m# value_object_steps.go:535 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be true[0m                        [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Has_no_items_other_than_specific_symbol

  [1;37mScenario:[0m Has no items other than specific symbol       [1;30m# features/domain/shared/cargo_value_object.feature:111[0m
    [32mGiven[0m [32mcargo with items:[0m                               [1;30m# value_object_steps.go:531 -> *valueObjectContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m10[0m    |
    [32mWhen[0m [32mI check if cargo has items other than "IRON_ORE"[0m [1;30m# value_object_steps.go:535 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be false[0m                       [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_available_capacity_with_empty_cargo

  [1;37mScenario:[0m Calculate available capacity with empty cargo [1;30m# features/domain/shared/cargo_value_object.feature:122[0m
    [32mGiven[0m [32mcargo with capacity 40 and units 0[0m              [1;30m# value_object_steps.go:539 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate available capacity[0m                   [1;30m# value_object_steps.go:540 -> *valueObjectContext[0m
    [32mThen[0m [32mthe available capacity should be 40[0m              [1;30m# value_object_steps.go:541 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_available_capacity_with_partial_cargo

  [1;37mScenario:[0m Calculate available capacity with partial cargo [1;30m# features/domain/shared/cargo_value_object.feature:127[0m
    [32mGiven[0m [32mcargo with capacity 40 and units 25[0m               [1;30m# value_object_steps.go:539 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate available capacity[0m                     [1;30m# value_object_steps.go:540 -> *valueObjectContext[0m
    [32mThen[0m [32mthe available capacity should be 15[0m                [1;30m# value_object_steps.go:541 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_available_capacity_with_full_cargo

  [1;37mScenario:[0m Calculate available capacity with full cargo [1;30m# features/domain/shared/cargo_value_object.feature:132[0m
    [32mGiven[0m [32mcargo with capacity 40 and units 40[0m            [1;30m# value_object_steps.go:539 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate available capacity[0m                  [1;30m# value_object_steps.go:540 -> *valueObjectContext[0m
    [32mThen[0m [32mthe available capacity should be 0[0m              [1;30m# value_object_steps.go:541 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_empty_returns_true_when_no_cargo

  [1;37mScenario:[0m Is empty returns true when no cargo [1;30m# features/domain/shared/cargo_value_object.feature:141[0m
    [32mGiven[0m [32mcargo with capacity 40 and units 0[0m    [1;30m# value_object_steps.go:539 -> *valueObjectContext[0m
    [32mWhen[0m [32mI check if cargo is empty[0m              [1;30m# value_object_steps.go:544 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be true[0m              [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_empty_returns_false_when_cargo_present

  [1;37mScenario:[0m Is empty returns false when cargo present [1;30m# features/domain/shared/cargo_value_object.feature:146[0m
    [32mGiven[0m [32mcargo with capacity 40 and units 1[0m          [1;30m# value_object_steps.go:539 -> *valueObjectContext[0m
    [32mWhen[0m [32mI check if cargo is empty[0m                    [1;30m# value_object_steps.go:544 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be false[0m                   [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_full_returns_true_when_at_capacity

  [1;37mScenario:[0m Is full returns true when at capacity [1;30m# features/domain/shared/cargo_value_object.feature:151[0m
    [32mGiven[0m [32mcargo with capacity 40 and units 40[0m     [1;30m# value_object_steps.go:539 -> *valueObjectContext[0m
    [32mWhen[0m [32mI check if cargo is full[0m                 [1;30m# value_object_steps.go:545 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be true[0m                [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_full_returns_false_when_below_capacity

  [1;37mScenario:[0m Is full returns false when below capacity [1;30m# features/domain/shared/cargo_value_object.feature:156[0m
    [32mGiven[0m [32mcargo with capacity 40 and units 39[0m         [1;30m# value_object_steps.go:539 -> *valueObjectContext[0m
    [32mWhen[0m [32mI check if cargo is full[0m                     [1;30m# value_object_steps.go:545 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be false[0m                   [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_full_returns_false_when_empty

  [1;37mScenario:[0m Is full returns false when empty [1;30m# features/domain/shared/cargo_value_object.feature:161[0m
    [32mGiven[0m [32mcargo with capacity 40 and units 0[0m [1;30m# value_object_steps.go:539 -> *valueObjectContext[0m
    [32mWhen[0m [32mI check if cargo is full[0m            [1;30m# value_object_steps.go:545 -> *valueObjectContext[0m
    [32mThen[0m [32mthe result should be false[0m          [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Get_other_items_from_cargo_with_multiple_types

  [1;37mScenario:[0m Get other items from cargo with multiple types      [1;30m# features/domain/shared/cargo_value_object.feature:170[0m
    [32mGiven[0m [32mcargo with items:[0m                                     [1;30m# value_object_steps.go:531 -> *valueObjectContext[0m
      | [36msymbol[0m       | [36munits[0m |
      | [36mIRON_ORE[0m     | [36m50[0m    |
      | [36mCOPPER_ORE[0m   | [36m25[0m    |
      | [36mALUMINUM_ORE[0m | [36m10[0m    |
    [32mWhen[0m [32mI get other items excluding "IRON_ORE"[0m                 [1;30m# value_object_steps.go:548 -> *valueObjectContext[0m
    [32mThen[0m [32mI should have 2 other cargo items[0m                      [1;30m# value_object_steps.go:549 -> *valueObjectContext[0m
    [32mAnd[0m [32mother items should contain "COPPER_ORE" with 25 units[0m   [1;30m# value_object_steps.go:550 -> *valueObjectContext[0m
    [32mAnd[0m [32mother items should contain "ALUMINUM_ORE" with 10 units[0m [1;30m# value_object_steps.go:550 -> *valueObjectContext[0m
=== RUN   TestFeatures/Get_other_items_returns_empty_when_only_specified_item_exists

  [1;37mScenario:[0m Get other items returns empty when only specified item exists [1;30m# features/domain/shared/cargo_value_object.feature:181[0m
    [32mGiven[0m [32mcargo with items:[0m                                               [1;30m# value_object_steps.go:531 -> *valueObjectContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m50[0m    |
    [32mWhen[0m [32mI get other items excluding "IRON_ORE"[0m                           [1;30m# value_object_steps.go:548 -> *valueObjectContext[0m
    [32mThen[0m [32mI should have 0 other cargo items[0m                                [1;30m# value_object_steps.go:549 -> *valueObjectContext[0m
=== RUN   TestFeatures/Get_other_items_from_empty_cargo

  [1;37mScenario:[0m Get other items from empty cargo    [1;30m# features/domain/shared/cargo_value_object.feature:188[0m
    [32mGiven[0m [32mcargo with capacity 100 and units 0[0m   [1;30m# value_object_steps.go:539 -> *valueObjectContext[0m
    [32mWhen[0m [32mI get other items excluding "IRON_ORE"[0m [1;30m# value_object_steps.go:548 -> *valueObjectContext[0m
    [32mThen[0m [32mI should have 0 other cargo items[0m      [1;30m# value_object_steps.go:549 -> *valueObjectContext[0m

[1;37mFeature:[0m Flight Mode Value Object
  As a navigation system
  I want to calculate fuel costs and travel times for different flight modes
  So that I can optimize ship navigation
=== RUN   TestFeatures/Calculate_cruise_mode_fuel_cost

  [1;37mScenario:[0m Calculate cruise mode fuel cost                        [1;30m# features/domain/shared/flight_mode_value_object.feature:10[0m
    [32mWhen[0m [32mI calculate fuel cost for CRUISE mode with distance 100.0[0m [1;30m# value_object_steps.go:498 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel cost should be 100[0m                               [1;30m# value_object_steps.go:499 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_drift_mode_fuel_cost

  [1;37mScenario:[0m Calculate drift mode fuel cost                        [1;30m# features/domain/shared/flight_mode_value_object.feature:14[0m
    [32mWhen[0m [32mI calculate fuel cost for DRIFT mode with distance 100.0[0m [1;30m# value_object_steps.go:498 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel cost should be 1[0m                                [1;30m# value_object_steps.go:499 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_burn_mode_fuel_cost

  [1;37mScenario:[0m Calculate burn mode fuel cost                        [1;30m# features/domain/shared/flight_mode_value_object.feature:18[0m
    [32mWhen[0m [32mI calculate fuel cost for BURN mode with distance 100.0[0m [1;30m# value_object_steps.go:498 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel cost should be 200[0m                             [1;30m# value_object_steps.go:499 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_stealth_mode_fuel_cost

  [1;37mScenario:[0m Calculate stealth mode fuel cost                        [1;30m# features/domain/shared/flight_mode_value_object.feature:22[0m
    [32mWhen[0m [32mI calculate fuel cost for STEALTH mode with distance 100.0[0m [1;30m# value_object_steps.go:498 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel cost should be 100[0m                                [1;30m# value_object_steps.go:499 -> *valueObjectContext[0m
=== RUN   TestFeatures/Fuel_cost_for_zero_distance_is_zero

  [1;37mScenario:[0m Fuel cost for zero distance is zero                  [1;30m# features/domain/shared/flight_mode_value_object.feature:26[0m
    [32mWhen[0m [32mI calculate fuel cost for CRUISE mode with distance 0.0[0m [1;30m# value_object_steps.go:498 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel cost should be 0[0m                               [1;30m# value_object_steps.go:499 -> *valueObjectContext[0m
=== RUN   TestFeatures/Minimum_fuel_cost_is_1_for_very_small_distances

  [1;37mScenario:[0m Minimum fuel cost is 1 for very small distances      [1;30m# features/domain/shared/flight_mode_value_object.feature:30[0m
    [32mWhen[0m [32mI calculate fuel cost for CRUISE mode with distance 0.1[0m [1;30m# value_object_steps.go:498 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel cost should be 1[0m                               [1;30m# value_object_steps.go:499 -> *valueObjectContext[0m
=== RUN   TestFeatures/Drift_mode_has_minimal_fuel_consumption

  [1;37mScenario:[0m Drift mode has minimal fuel consumption                [1;30m# features/domain/shared/flight_mode_value_object.feature:34[0m
    [32mWhen[0m [32mI calculate fuel cost for DRIFT mode with distance 1000.0[0m [1;30m# value_object_steps.go:498 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel cost should be 3[0m                                 [1;30m# value_object_steps.go:499 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_cruise_mode_travel_time

  [1;37mScenario:[0m Calculate cruise mode travel time                                     [1;30m# features/domain/shared/flight_mode_value_object.feature:42[0m
    [32mWhen[0m [32mI calculate travel time for CRUISE mode with distance 100.0 and speed 30[0m [1;30m# value_object_steps.go:500 -> *valueObjectContext[0m
    [32mThen[0m [32mthe travel time should be 103 seconds[0m                                    [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_drift_mode_travel_time

  [1;37mScenario:[0m Calculate drift mode travel time                                     [1;30m# features/domain/shared/flight_mode_value_object.feature:46[0m
    [32mWhen[0m [32mI calculate travel time for DRIFT mode with distance 100.0 and speed 30[0m [1;30m# value_object_steps.go:500 -> *valueObjectContext[0m
    [32mThen[0m [32mthe travel time should be 86 seconds[0m                                    [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_burn_mode_travel_time

  [1;37mScenario:[0m Calculate burn mode travel time                                     [1;30m# features/domain/shared/flight_mode_value_object.feature:50[0m
    [32mWhen[0m [32mI calculate travel time for BURN mode with distance 100.0 and speed 30[0m [1;30m# value_object_steps.go:500 -> *valueObjectContext[0m
    [32mThen[0m [32mthe travel time should be 50 seconds[0m                                   [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_stealth_mode_travel_time

  [1;37mScenario:[0m Calculate stealth mode travel time                                     [1;30m# features/domain/shared/flight_mode_value_object.feature:54[0m
    [32mWhen[0m [32mI calculate travel time for STEALTH mode with distance 100.0 and speed 30[0m [1;30m# value_object_steps.go:500 -> *valueObjectContext[0m
    [32mThen[0m [32mthe travel time should be 166 seconds[0m                                     [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Travel_time_for_zero_distance_is_zero

  [1;37mScenario:[0m Travel time for zero distance is zero                               [1;30m# features/domain/shared/flight_mode_value_object.feature:58[0m
    [32mWhen[0m [32mI calculate travel time for CRUISE mode with distance 0.0 and speed 30[0m [1;30m# value_object_steps.go:500 -> *valueObjectContext[0m
    [32mThen[0m [32mthe travel time should be 0 seconds[0m                                    [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Minimum_travel_time_is_1_for_very_small_distances

  [1;37mScenario:[0m Minimum travel time is 1 for very small distances                   [1;30m# features/domain/shared/flight_mode_value_object.feature:62[0m
    [32mWhen[0m [32mI calculate travel time for CRUISE mode with distance 0.1 and speed 30[0m [1;30m# value_object_steps.go:500 -> *valueObjectContext[0m
    [32mThen[0m [32mthe travel time should be 1 seconds[0m                                    [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Higher_speed_reduces_travel_time

  [1;37mScenario:[0m Higher speed reduces travel time                                      [1;30m# features/domain/shared/flight_mode_value_object.feature:66[0m
    [32mWhen[0m [32mI calculate travel time for CRUISE mode with distance 100.0 and speed 60[0m [1;30m# value_object_steps.go:500 -> *valueObjectContext[0m
    [32mThen[0m [32mthe travel time should be 51 seconds[0m                                     [1;30m# value_object_steps.go:502 -> *valueObjectContext[0m
=== RUN   TestFeatures/Select_burn_mode_with_high_fuel_and_safety_margin

  [1;37mScenario:[0m Select burn mode with high fuel and safety margin                         [1;30m# features/domain/shared/flight_mode_value_object.feature:74[0m
    [32mWhen[0m [32mI select optimal flight mode with current fuel 100, cost 50, safety margin 4[0m [1;30m# value_object_steps.go:503 -> *valueObjectContext[0m
    [32mThen[0m [32mthe selected mode should be BURN[0m                                             [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
=== RUN   TestFeatures/Select_cruise_mode_with_medium_fuel

  [1;37mScenario:[0m Select cruise mode with medium fuel                                      [1;30m# features/domain/shared/flight_mode_value_object.feature:78[0m
    [32mWhen[0m [32mI select optimal flight mode with current fuel 54, cost 50, safety margin 4[0m [1;30m# value_object_steps.go:503 -> *valueObjectContext[0m
    [32mThen[0m [32mthe selected mode should be CRUISE[0m                                          [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
=== RUN   TestFeatures/Select_drift_mode_with_low_fuel

  [1;37mScenario:[0m Select drift mode with low fuel                                          [1;30m# features/domain/shared/flight_mode_value_object.feature:82[0m
    [32mWhen[0m [32mI select optimal flight mode with current fuel 53, cost 50, safety margin 4[0m [1;30m# value_object_steps.go:503 -> *valueObjectContext[0m
    [32mThen[0m [32mthe selected mode should be DRIFT[0m                                           [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
=== RUN   TestFeatures/Select_burn_with_exact_fuel_for_burn_plus_safety

  [1;37mScenario:[0m Select burn with exact fuel for burn plus safety                          [1;30m# features/domain/shared/flight_mode_value_object.feature:86[0m
    [32mWhen[0m [32mI select optimal flight mode with current fuel 104, cost 50, safety margin 4[0m [1;30m# value_object_steps.go:503 -> *valueObjectContext[0m
    [32mThen[0m [32mthe selected mode should be BURN[0m                                             [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
=== RUN   TestFeatures/Select_cruise_when_burn_would_exceed_safety

  [1;37mScenario:[0m Select cruise when burn would exceed safety                               [1;30m# features/domain/shared/flight_mode_value_object.feature:90[0m
    [32mWhen[0m [32mI select optimal flight mode with current fuel 103, cost 50, safety margin 4[0m [1;30m# value_object_steps.go:503 -> *valueObjectContext[0m
    [32mThen[0m [32mthe selected mode should be CRUISE[0m                                           [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
=== RUN   TestFeatures/Select_drift_when_cruise_would_exceed_safety

  [1;37mScenario:[0m Select drift when cruise would exceed safety                             [1;30m# features/domain/shared/flight_mode_value_object.feature:94[0m
    [32mWhen[0m [32mI select optimal flight mode with current fuel 53, cost 50, safety margin 4[0m [1;30m# value_object_steps.go:503 -> *valueObjectContext[0m
    [32mThen[0m [32mthe selected mode should be DRIFT[0m                                           [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
=== RUN   TestFeatures/Always_select_fastest_mode_that_maintains_safety_margin

  [1;37mScenario:[0m Always select fastest mode that maintains safety margin                   [1;30m# features/domain/shared/flight_mode_value_object.feature:98[0m
    [32mWhen[0m [32mI select optimal flight mode with current fuel 200, cost 50, safety margin 4[0m [1;30m# value_object_steps.go:503 -> *valueObjectContext[0m
    [32mThen[0m [32mthe selected mode should be BURN[0m                                             [1;30m# value_object_steps.go:505 -> *valueObjectContext[0m
=== RUN   TestFeatures/Get_cruise_mode_name

  [1;37mScenario:[0m Get cruise mode name          [1;30m# features/domain/shared/flight_mode_value_object.feature:106[0m
    [33mWhen[0m [33mI get the name of CRUISE mode[0m
    [33mThen[0m [33mthe mode name should be "CRUISE"[0m
=== RUN   TestFeatures/Get_drift_mode_name

  [1;37mScenario:[0m Get drift mode name          [1;30m# features/domain/shared/flight_mode_value_object.feature:110[0m
    [33mWhen[0m [33mI get the name of DRIFT mode[0m
    [33mThen[0m [33mthe mode name should be "DRIFT"[0m
=== RUN   TestFeatures/Get_burn_mode_name

  [1;37mScenario:[0m Get burn mode name          [1;30m# features/domain/shared/flight_mode_value_object.feature:114[0m
    [33mWhen[0m [33mI get the name of BURN mode[0m
    [33mThen[0m [33mthe mode name should be "BURN"[0m
=== RUN   TestFeatures/Get_stealth_mode_name

  [1;37mScenario:[0m Get stealth mode name          [1;30m# features/domain/shared/flight_mode_value_object.feature:118[0m
    [33mWhen[0m [33mI get the name of STEALTH mode[0m
    [33mThen[0m [33mthe mode name should be "STEALTH"[0m

[1;37mFeature:[0m Fuel Value Object
  As a navigation system
  I want to work with immutable fuel value objects
  So that fuel operations are safe and predictable
=== RUN   TestFeatures/Create_fuel_with_valid_data

  [1;37mScenario:[0m Create fuel with valid data                 [1;30m# features/domain/shared/fuel_value_object.feature:10[0m
    [32mWhen[0m [32mI create fuel with current 50 and capacity 100[0m [1;30m# value_object_steps.go:485 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel should have current 50[0m                [1;30m# value_object_steps.go:488 -> *valueObjectContext[0m
    [32mAnd[0m [32mthe fuel should have capacity 100[0m               [1;30m# value_object_steps.go:489 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_fuel_with_negative_current_fails

  [1;37mScenario:[0m Create fuel with negative current fails                             [1;30m# features/domain/shared/fuel_value_object.feature:15[0m
    [32mWhen[0m [32mI attempt to create fuel with current -10 and capacity 100[0m             [1;30m# value_object_steps.go:486 -> *valueObjectContext[0m
    [32mThen[0m [32mfuel creation should fail with error "current fuel cannot be negative"[0m [1;30m# value_object_steps.go:487 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_fuel_with_negative_capacity_fails

  [1;37mScenario:[0m Create fuel with negative capacity fails                             [1;30m# features/domain/shared/fuel_value_object.feature:19[0m
    [32mWhen[0m [32mI attempt to create fuel with current 50 and capacity -100[0m              [1;30m# value_object_steps.go:486 -> *valueObjectContext[0m
    [32mThen[0m [32mfuel creation should fail with error "fuel capacity cannot be negative"[0m [1;30m# value_object_steps.go:487 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_fuel_with_current_exceeding_capacity_fails

  [1;37mScenario:[0m Create fuel with current exceeding capacity fails                       [1;30m# features/domain/shared/fuel_value_object.feature:23[0m
    [32mWhen[0m [32mI attempt to create fuel with current 150 and capacity 100[0m                 [1;30m# value_object_steps.go:486 -> *valueObjectContext[0m
    [32mThen[0m [32mfuel creation should fail with error "current fuel cannot exceed capacity"[0m [1;30m# value_object_steps.go:487 -> *valueObjectContext[0m
=== RUN   TestFeatures/Create_fuel_at_full_capacity_succeeds

  [1;37mScenario:[0m Create fuel at full capacity succeeds        [1;30m# features/domain/shared/fuel_value_object.feature:27[0m
    [32mWhen[0m [32mI create fuel with current 100 and capacity 100[0m [1;30m# value_object_steps.go:485 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel should have current 100[0m                [1;30m# value_object_steps.go:488 -> *valueObjectContext[0m
    [33mAnd[0m [33mthe fuel should be full[0m
=== RUN   TestFeatures/Create_fuel_at_zero_capacity_succeeds

  [1;37mScenario:[0m Create fuel at zero capacity succeeds    [1;30m# features/domain/shared/fuel_value_object.feature:32[0m
    [32mWhen[0m [32mI create fuel with current 0 and capacity 0[0m [1;30m# value_object_steps.go:485 -> *valueObjectContext[0m
    [32mThen[0m [32mthe fuel should have current 0[0m              [1;30m# value_object_steps.go:488 -> *valueObjectContext[0m
    [32mAnd[0m [32mthe fuel should have capacity 0[0m              [1;30m# value_object_steps.go:489 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_fuel_percentage

  [1;37mScenario:[0m Calculate fuel percentage           [1;30m# features/domain/shared/fuel_value_object.feature:41[0m
    [32mGiven[0m [32mfuel with current 50 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate the fuel percentage[0m        [1;30m# value_object_steps.go:491 -> *valueObjectContext[0m
    [32mThen[0m [32mthe percentage should be 50.0[0m          [1;30m# value_object_steps.go:492 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_fuel_percentage_when_full

  [1;37mScenario:[0m Calculate fuel percentage when full  [1;30m# features/domain/shared/fuel_value_object.feature:46[0m
    [32mGiven[0m [32mfuel with current 100 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate the fuel percentage[0m         [1;30m# value_object_steps.go:491 -> *valueObjectContext[0m
    [32mThen[0m [32mthe percentage should be 100.0[0m          [1;30m# value_object_steps.go:492 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_fuel_percentage_when_empty

  [1;37mScenario:[0m Calculate fuel percentage when empty [1;30m# features/domain/shared/fuel_value_object.feature:51[0m
    [32mGiven[0m [32mfuel with current 0 and capacity 100[0m   [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate the fuel percentage[0m         [1;30m# value_object_steps.go:491 -> *valueObjectContext[0m
    [32mThen[0m [32mthe percentage should be 0.0[0m            [1;30m# value_object_steps.go:492 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_fuel_percentage_with_zero_capacity_returns_zero

  [1;37mScenario:[0m Calculate fuel percentage with zero capacity returns zero [1;30m# features/domain/shared/fuel_value_object.feature:56[0m
    [32mGiven[0m [32mfuel with current 0 and capacity 0[0m                          [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate the fuel percentage[0m                              [1;30m# value_object_steps.go:491 -> *valueObjectContext[0m
    [32mThen[0m [32mthe percentage should be 0.0[0m                                 [1;30m# value_object_steps.go:492 -> *valueObjectContext[0m
=== RUN   TestFeatures/Consume_fuel_returns_new_fuel_object

  [1;37mScenario:[0m Consume fuel returns new fuel object [1;30m# features/domain/shared/fuel_value_object.feature:65[0m
    [32mGiven[0m [32mfuel with current 100 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI consume 30 units of fuel[0m              [1;30m# value_object_steps.go:493 -> *valueObjectContext[0m
    [32mThen[0m [32mthe new fuel should have current 70[0m     [1;30m# value_object_steps.go:495 -> *valueObjectContext[0m
    [33mAnd[0m [33mthe new fuel should have capacity 100[0m
=== RUN   TestFeatures/Consume_negative_fuel_fails

  [1;37mScenario:[0m Consume negative fuel fails                                           [1;30m# features/domain/shared/fuel_value_object.feature:71[0m
    [32mGiven[0m [32mfuel with current 100 and capacity 100[0m                                  [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI attempt to consume -10 units of fuel[0m                                   [1;30m# value_object_steps.go:494 -> *valueObjectContext[0m
    [32mThen[0m [32mthe operation should fail with error "consume amount cannot be negative"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Consume_more_fuel_than_available_sets_to_zero

  [1;37mScenario:[0m Consume more fuel than available sets to zero [1;30m# features/domain/shared/fuel_value_object.feature:76[0m
    [32mGiven[0m [32mfuel with current 50 and capacity 100[0m           [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI consume 80 units of fuel[0m                       [1;30m# value_object_steps.go:493 -> *valueObjectContext[0m
    [32mThen[0m [32mthe new fuel should have current 0[0m               [1;30m# value_object_steps.go:495 -> *valueObjectContext[0m
=== RUN   TestFeatures/Consume_all_fuel#01

  [1;37mScenario:[0m Consume all fuel                     [1;30m# features/domain/shared/fuel_value_object.feature:81[0m
    [32mGiven[0m [32mfuel with current 100 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI consume 100 units of fuel[0m             [1;30m# value_object_steps.go:493 -> *valueObjectContext[0m
    [32mThen[0m [32mthe new fuel should have current 0[0m      [1;30m# value_object_steps.go:495 -> *valueObjectContext[0m
=== RUN   TestFeatures/Consume_zero_fuel_returns_same_values

  [1;37mScenario:[0m Consume zero fuel returns same values [1;30m# features/domain/shared/fuel_value_object.feature:86[0m
    [32mGiven[0m [32mfuel with current 50 and capacity 100[0m   [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI consume 0 units of fuel[0m                [1;30m# value_object_steps.go:493 -> *valueObjectContext[0m
    [32mThen[0m [32mthe new fuel should have current 50[0m      [1;30m# value_object_steps.go:495 -> *valueObjectContext[0m
=== RUN   TestFeatures/Original_fuel_object_is_unchanged_after_consume

  [1;37mScenario:[0m Original fuel object is unchanged after consume [1;30m# features/domain/shared/fuel_value_object.feature:91[0m
    [32mGiven[0m [32mfuel with current 100 and capacity 100[0m            [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [32mWhen[0m [32mI consume 30 units of fuel[0m                         [1;30m# value_object_steps.go:493 -> *valueObjectContext[0m
    [33mThen[0m [33mthe original fuel should still have current 100[0m
=== RUN   TestFeatures/Add_fuel_returns_new_fuel_object

  [1;37mScenario:[0m Add fuel returns new fuel object    [1;30m# features/domain/shared/fuel_value_object.feature:100[0m
    [32mGiven[0m [32mfuel with current 50 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI add 30 units of fuel[0m
    [36mThen[0m [36mthe new fuel should have current 80[0m    [1;30m# value_object_steps.go:495 -> *valueObjectContext[0m
    [33mAnd[0m [33mthe new fuel should have capacity 100[0m
=== RUN   TestFeatures/Add_negative_fuel_fails

  [1;37mScenario:[0m Add negative fuel fails                                           [1;30m# features/domain/shared/fuel_value_object.feature:106[0m
    [32mGiven[0m [32mfuel with current 50 and capacity 100[0m                               [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI attempt to add -10 units of fuel[0m
    [36mThen[0m [36mthe operation should fail with error "add amount cannot be negative"[0m [1;30m# container_steps.go:698 -> *containerContext[0m
=== RUN   TestFeatures/Add_fuel_caps_at_capacity

  [1;37mScenario:[0m Add fuel caps at capacity           [1;30m# features/domain/shared/fuel_value_object.feature:111[0m
    [32mGiven[0m [32mfuel with current 80 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI add 50 units of fuel[0m
    [36mThen[0m [36mthe new fuel should have current 100[0m   [1;30m# value_object_steps.go:495 -> *valueObjectContext[0m
=== RUN   TestFeatures/Add_fuel_to_empty_tank

  [1;37mScenario:[0m Add fuel to empty tank             [1;30m# features/domain/shared/fuel_value_object.feature:116[0m
    [32mGiven[0m [32mfuel with current 0 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI add 100 units of fuel[0m
    [36mThen[0m [36mthe new fuel should have current 100[0m  [1;30m# value_object_steps.go:495 -> *valueObjectContext[0m
=== RUN   TestFeatures/Add_zero_fuel_returns_same_values

  [1;37mScenario:[0m Add zero fuel returns same values   [1;30m# features/domain/shared/fuel_value_object.feature:121[0m
    [32mGiven[0m [32mfuel with current 50 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI add 0 units of fuel[0m
    [36mThen[0m [36mthe new fuel should have current 50[0m    [1;30m# value_object_steps.go:495 -> *valueObjectContext[0m
=== RUN   TestFeatures/Original_fuel_object_is_unchanged_after_add

  [1;37mScenario:[0m Original fuel object is unchanged after add [1;30m# features/domain/shared/fuel_value_object.feature:126[0m
    [32mGiven[0m [32mfuel with current 50 and capacity 100[0m         [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI add 30 units of fuel[0m
    [33mThen[0m [33mthe original fuel should still have current 50[0m
=== RUN   TestFeatures/Can_travel_with_sufficient_fuel

  [1;37mScenario:[0m Can travel with sufficient fuel                             [1;30m# features/domain/shared/fuel_value_object.feature:135[0m
    [32mGiven[0m [32mfuel with current 100 and capacity 100[0m                        [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if fuel can travel requiring 50 with safety margin 0.1[0m
    [36mThen[0m [36mthe result should be true[0m                                      [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Cannot_travel_with_insufficient_fuel

  [1;37mScenario:[0m Cannot travel with insufficient fuel                        [1;30m# features/domain/shared/fuel_value_object.feature:140[0m
    [32mGiven[0m [32mfuel with current 50 and capacity 100[0m                         [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if fuel can travel requiring 50 with safety margin 0.1[0m
    [36mThen[0m [36mthe result should be false[0m                                     [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Can_travel_with_exact_fuel_and_no_safety_margin

  [1;37mScenario:[0m Can travel with exact fuel and no safety margin             [1;30m# features/domain/shared/fuel_value_object.feature:145[0m
    [32mGiven[0m [32mfuel with current 50 and capacity 100[0m                         [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if fuel can travel requiring 50 with safety margin 0.0[0m
    [36mThen[0m [36mthe result should be true[0m                                      [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Cannot_travel_with_exact_fuel_but_with_safety_margin

  [1;37mScenario:[0m Cannot travel with exact fuel but with safety margin        [1;30m# features/domain/shared/fuel_value_object.feature:150[0m
    [32mGiven[0m [32mfuel with current 55 and capacity 100[0m                         [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if fuel can travel requiring 50 with safety margin 0.1[0m
    [36mThen[0m [36mthe result should be true[0m                                      [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_full_when_at_capacity

  [1;37mScenario:[0m Is full when at capacity             [1;30m# features/domain/shared/fuel_value_object.feature:159[0m
    [32mGiven[0m [32mfuel with current 100 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if fuel is full[0m
    [36mThen[0m [36mthe result should be true[0m               [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_not_full_when_below_capacity

  [1;37mScenario:[0m Is not full when below capacity     [1;30m# features/domain/shared/fuel_value_object.feature:164[0m
    [32mGiven[0m [32mfuel with current 99 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if fuel is full[0m
    [36mThen[0m [36mthe result should be false[0m             [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Is_not_full_when_empty

  [1;37mScenario:[0m Is not full when empty             [1;30m# features/domain/shared/fuel_value_object.feature:169[0m
    [32mGiven[0m [32mfuel with current 0 and capacity 100[0m [1;30m# value_object_steps.go:490 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if fuel is full[0m
    [36mThen[0m [36mthe result should be false[0m            [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m

[1;37mFeature:[0m Waypoint Value Object
  As a navigation system
  I want to work with immutable waypoint value objects
  So that I can safely share location data across the system
=== RUN   TestFeatures/Create_waypoint_with_valid_data

  [1;37mScenario:[0m Create waypoint with valid data                    [1;30m# features/domain/shared/waypoint_value_object.feature:10[0m
    [32mWhen[0m [32mI create a waypoint with symbol "X1-A1", x 0.0, y 0.0[0m [1;30m# value_object_steps.go:475 -> *valueObjectContext[0m
    [32mThen[0m [32mthe waypoint should have symbol "X1-A1"[0m               [1;30m# value_object_steps.go:478 -> *valueObjectContext[0m
    [33mAnd[0m [33mthe waypoint should have x coordinate 0.0[0m
    [33mAnd[0m [33mthe waypoint should have y coordinate 0.0[0m
=== RUN   TestFeatures/Create_waypoint_with_empty_symbol_fails

  [1;37mScenario:[0m Create waypoint with empty symbol fails                 [1;30m# features/domain/shared/waypoint_value_object.feature:16[0m
    [32mWhen[0m [32mI attempt to create a waypoint with empty symbol[0m           [1;30m# value_object_steps.go:476 -> *valueObjectContext[0m
    [32mThen[0m [32mwaypoint creation should fail with error "cannot be empty"[0m [1;30m# value_object_steps.go:477 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_distance_between_two_waypoints

  [1;37mScenario:[0m Calculate distance between two waypoints   [1;30m# features/domain/shared/waypoint_value_object.feature:24[0m
    [32mGiven[0m [32ma waypoint "X1-A1" at coordinates (0.0, 0.0)[0m [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (3.0, 4.0)[0m   [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate distance from "X1-A1" to "X1-B2"[0m  [1;30m# value_object_steps.go:480 -> *valueObjectContext[0m
    [32mThen[0m [32mthe distance should be 5.0[0m                    [1;30m# value_object_steps.go:481 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_distance_to_same_waypoint_is_zero

  [1;37mScenario:[0m Calculate distance to same waypoint is zero [1;30m# features/domain/shared/waypoint_value_object.feature:30[0m
    [32mGiven[0m [32ma waypoint "X1-A1" at coordinates (0.0, 0.0)[0m  [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate distance from "X1-A1" to "X1-A1"[0m   [1;30m# value_object_steps.go:480 -> *valueObjectContext[0m
    [32mThen[0m [32mthe distance should be 0.0[0m                     [1;30m# value_object_steps.go:481 -> *valueObjectContext[0m
=== RUN   TestFeatures/Calculate_distance_with_negative_coordinates

  [1;37mScenario:[0m Calculate distance with negative coordinates   [1;30m# features/domain/shared/waypoint_value_object.feature:35[0m
    [32mGiven[0m [32ma waypoint "X1-A1" at coordinates (-10.0, -20.0)[0m [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (10.0, 20.0)[0m     [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate distance from "X1-A1" to "X1-B2"[0m      [1;30m# value_object_steps.go:480 -> *valueObjectContext[0m
    [32mThen[0m [32mthe distance should be approximately 44.72[0m        [1;30m# value_object_steps.go:482 -> *valueObjectContext[0m
=== RUN   TestFeatures/Distance_calculation_is_symmetric

  [1;37mScenario:[0m Distance calculation is symmetric          [1;30m# features/domain/shared/waypoint_value_object.feature:41[0m
    [32mGiven[0m [32ma waypoint "X1-A1" at coordinates (0.0, 0.0)[0m [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" at coordinates (100.0, 0.0)[0m [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [32mWhen[0m [32mI calculate distance from "X1-A1" to "X1-B2"[0m  [1;30m# value_object_steps.go:480 -> *valueObjectContext[0m
    [32mAnd[0m [32mI calculate distance from "X1-B2" to "X1-A1"[0m   [1;30m# value_object_steps.go:480 -> *valueObjectContext[0m
    [33mThen[0m [33mboth distances should be equal[0m
=== RUN   TestFeatures/Check_if_waypoint_is_orbital_of_another

  [1;37mScenario:[0m Check if waypoint is orbital of another    [1;30m# features/domain/shared/waypoint_value_object.feature:52[0m
    [33mGiven[0m [33ma waypoint "X1-A1" with orbitals ["X1-A1-B"][0m
    [36mAnd[0m [36ma waypoint "X1-A1-B" at coordinates (0.0, 0.0)[0m [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if "X1-A1-B" is orbital of "X1-A1"[0m
    [36mThen[0m [36mthe result should be true[0m                     [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Check_waypoint_is_not_orbital_of_unrelated_waypoint

  [1;37mScenario:[0m Check waypoint is not orbital of unrelated waypoint [1;30m# features/domain/shared/waypoint_value_object.feature:58[0m
    [33mGiven[0m [33ma waypoint "X1-A1" with orbitals ["X1-A1-B"][0m
    [36mAnd[0m [36ma waypoint "X1-C3" at coordinates (0.0, 0.0)[0m            [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if "X1-C3" is orbital of "X1-A1"[0m
    [36mThen[0m [36mthe result should be false[0m                             [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m
=== RUN   TestFeatures/Orbital_relationship_is_bidirectional

  [1;37mScenario:[0m Orbital relationship is bidirectional      [1;30m# features/domain/shared/waypoint_value_object.feature:64[0m
    [33mGiven[0m [33ma waypoint "X1-A1" with orbitals ["X1-A1-B"][0m
    [36mAnd[0m [36ma waypoint "X1-A1-B" at coordinates (0.0, 0.0)[0m [1;30m# value_object_steps.go:479 -> *valueObjectContext[0m
    [33mWhen[0m [33mI check if "X1-A1" is orbital of "X1-A1-B"[0m
    [36mThen[0m [36mthe result should be true[0m                     [1;30m# value_object_steps.go:536 -> *valueObjectContext[0m

[1;37mFeature:[0m Market Entity
=== RUN   TestFeatures/Create_valid_market_with_trade_goods

  [1;37mScenario:[0m Create valid market with trade goods                          [1;30m# features/domain/trading/market_entity.feature:3[0m
    [32mGiven[0m [32ma market at waypoint "X1-GZ7-A1"[0m                                [1;30m# market_steps.go:263 -> *marketContext[0m
    [32mAnd[0m [32mthe market sells "IRON_ORE" at 50 credits with trade volume 100[0m   [1;30m# market_steps.go:264 -> *marketContext[0m
    [32mAnd[0m [32mthe market sells "COPPER_ORE" at 75 credits with trade volume 200[0m [1;30m# market_steps.go:264 -> *marketContext[0m
    [32mWhen[0m [32mI create the market[0m                                              [1;30m# market_steps.go:269 -> *marketContext[0m
    [32mThen[0m [32mthe market should be created successfully[0m                        [1;30m# market_steps.go:277 -> *marketContext[0m
    [32mAnd[0m [32mthe waypoint should be "X1-GZ7-A1"[0m                                [1;30m# market_steps.go:278 -> *marketContext[0m
    [31mAnd[0m [31mthe market should have 2 trade goods[0m                              [1;30m# scouting_market_steps.go:67 -> *scoutingMarketContext[0m
    [1;31mmarket should not be nil[0m
    suite.go:640: market should not be nil
=== RUN   TestFeatures/Create_valid_market_with_no_trade_goods

  [1;37mScenario:[0m Create valid market with no trade goods [1;30m# features/domain/trading/market_entity.feature:12[0m
    [32mGiven[0m [32ma market at waypoint "X1-GZ7-A1"[0m          [1;30m# market_steps.go:263 -> *marketContext[0m
    [32mWhen[0m [32mI create the market with no trade goods[0m    [1;30m# market_steps.go:270 -> *marketContext[0m
    [32mThen[0m [32mthe market should be created successfully[0m  [1;30m# market_steps.go:277 -> *marketContext[0m
    [31mAnd[0m [31mthe market should have 0 trade goods[0m        [1;30m# scouting_market_steps.go:67 -> *scoutingMarketContext[0m
    [1;31mmarket should not be nil[0m
    suite.go:640: market should not be nil
=== RUN   TestFeatures/Cannot_create_market_with_empty_waypoint_symbol

  [1;37mScenario:[0m Cannot create market with empty waypoint symbol      [1;30m# features/domain/trading/market_entity.feature:18[0m
    [32mGiven[0m [32ma market at waypoint ""[0m                                [1;30m# market_steps.go:263 -> *marketContext[0m
    [32mWhen[0m [32mI try to create the market[0m                              [1;30m# market_steps.go:271 -> *marketContext[0m
    [31mThen[0m [31mI should get an error "waypoint symbol cannot be empty"[0m [1;30m# contract_steps.go:421 -> *contractContext[0m
    [1;31mexpected error 'waypoint symbol cannot be empty', got nil[0m
    suite.go:640: expected error 'waypoint symbol cannot be empty', got nil
=== RUN   TestFeatures/Get_existing_trade_good

  [1;37mScenario:[0m Get existing trade good              [1;30m# features/domain/trading/market_entity.feature:23[0m
    [32mGiven[0m [32ma market with "IRON_ORE" at 50 credits[0m [1;30m# market_steps.go:265 -> *marketContext[0m
    [32mWhen[0m [32mI get trade good "IRON_ORE"[0m             [1;30m# market_steps.go:272 -> *marketContext[0m
    [32mThen[0m [32mI should find the trade good[0m            [1;30m# market_steps.go:281 -> *marketContext[0m
    [32mAnd[0m [32mthe sell price should be 50 credits[0m      [1;30m# market_steps.go:282 -> *marketContext[0m
=== RUN   TestFeatures/Get_non-existent_trade_good

  [1;37mScenario:[0m Get non-existent trade good          [1;30m# features/domain/trading/market_entity.feature:29[0m
    [32mGiven[0m [32ma market with "IRON_ORE" at 50 credits[0m [1;30m# market_steps.go:265 -> *marketContext[0m
    [32mWhen[0m [32mI get trade good "COPPER_ORE"[0m           [1;30m# market_steps.go:272 -> *marketContext[0m
    [32mThen[0m [32mI should not find the trade good[0m        [1;30m# market_steps.go:283 -> *marketContext[0m
=== RUN   TestFeatures/Get_transaction_limit_for_existing_good

  [1;37mScenario:[0m Get transaction limit for existing good      [1;30m# features/domain/trading/market_entity.feature:34[0m
    [32mGiven[0m [32ma market with "IRON_ORE" with trade volume 150[0m [1;30m# market_steps.go:266 -> *marketContext[0m
    [32mWhen[0m [32mI get transaction limit for "IRON_ORE"[0m          [1;30m# market_steps.go:273 -> *marketContext[0m
    [32mThen[0m [32mthe transaction limit should be 150[0m             [1;30m# market_steps.go:284 -> *marketContext[0m
=== RUN   TestFeatures/Get_transaction_limit_for_non-existent_good_returns_unlimited

  [1;37mScenario:[0m Get transaction limit for non-existent good returns unlimited [1;30m# features/domain/trading/market_entity.feature:39[0m
    [32mGiven[0m [32ma market with "IRON_ORE" with trade volume 150[0m                  [1;30m# market_steps.go:266 -> *marketContext[0m
    [32mWhen[0m [32mI get transaction limit for "COPPER_ORE"[0m                         [1;30m# market_steps.go:273 -> *marketContext[0m
    [32mThen[0m [32mthe transaction limit should be 999999[0m                           [1;30m# market_steps.go:284 -> *marketContext[0m
=== RUN   TestFeatures/Check_market_has_good_(true)

  [1;37mScenario:[0m Check market has good (true)         [1;30m# features/domain/trading/market_entity.feature:44[0m
    [32mGiven[0m [32ma market with "IRON_ORE" at 50 credits[0m [1;30m# market_steps.go:265 -> *marketContext[0m
    [32mWhen[0m [32mI check if market has "IRON_ORE"[0m        [1;30m# market_steps.go:274 -> *marketContext[0m
    [32mThen[0m [32mthe market should have the good[0m         [1;30m# market_steps.go:285 -> *marketContext[0m
=== RUN   TestFeatures/Check_market_has_good_(false)

  [1;37mScenario:[0m Check market has good (false)        [1;30m# features/domain/trading/market_entity.feature:49[0m
    [32mGiven[0m [32ma market with "IRON_ORE" at 50 credits[0m [1;30m# market_steps.go:265 -> *marketContext[0m
    [32mWhen[0m [32mI check if market has "COPPER_ORE"[0m      [1;30m# market_steps.go:274 -> *marketContext[0m
    [32mThen[0m [32mthe market should not have the good[0m     [1;30m# market_steps.go:286 -> *marketContext[0m

[1;37mFeature:[0m Accept Contract Command
=== RUN   TestFeatures/Accept_unaccepted_contract

2025/11/13 17:12:56 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/player_repository.go:25 [35;1mrecord not found
[0m[33m[0.169ms] [34;1m[rows:0][0m SELECT * FROM `players` WHERE player_id = 1 ORDER BY `players`.`player_id` LIMIT 1

  [1;37mScenario:[0m Accept unaccepted contract                                     [1;30m# features/application/accept_contract.feature:3[0m
    [32mGiven[0m [32man unaccepted contract "CONTRACT-1" for player 1 in the database[0m [1;30m# accept_contract_steps.go:357 -> *acceptContractContext[0m
    [32mWhen[0m [32mI execute accept contract command for "CONTRACT-1" with player 1[0m  [1;30m# accept_contract_steps.go:362 -> *acceptContractContext[0m
    [32mThen[0m [32mthe command should succeed[0m                                        [1;30m# accept_contract_steps.go:366 -> *acceptContractContext[0m
    [32mAnd[0m [32mthe contract should be marked as accepted[0m                          [1;30m# accept_contract_steps.go:367 -> *acceptContractContext[0m
    [32mAnd[0m [32mthe contract should still not be fulfilled[0m                         [1;30m# accept_contract_steps.go:368 -> *acceptContractContext[0m
=== RUN   TestFeatures/Accept_already_accepted_contract

2025/11/13 17:12:56 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/player_repository.go:25 [35;1mrecord not found
[0m[33m[0.016ms] [34;1m[rows:0][0m SELECT * FROM `players` WHERE player_id = 1 ORDER BY `players`.`player_id` LIMIT 1

  [1;37mScenario:[0m Accept already accepted contract                                       [1;30m# features/application/accept_contract.feature:10[0m
    [32mGiven[0m [32man accepted contract "CONTRACT-2" for player 1 in the database[0m           [1;30m# accept_contract_steps.go:358 -> *acceptContractContext[0m
    [32mWhen[0m [32mI try to execute accept contract command for "CONTRACT-2" with player 1[0m   [1;30m# accept_contract_steps.go:363 -> *acceptContractContext[0m
    [32mThen[0m [32mthe command should return an error containing "contract already accepted"[0m [1;30m# accept_contract_steps.go:369 -> *acceptContractContext[0m
=== RUN   TestFeatures/Accept_non-existent_contract

2025/11/13 17:12:56 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/player_repository.go:25 [35;1mrecord not found
[0m[33m[0.014ms] [34;1m[rows:0][0m SELECT * FROM `players` WHERE player_id = 1 ORDER BY `players`.`player_id` LIMIT 1

  [1;37mScenario:[0m Accept non-existent contract                                           [1;30m# features/application/accept_contract.feature:15[0m
    [32mGiven[0m [32ma player with ID 1 exists in the database[0m                                [1;30m# accept_contract_steps.go:356 -> *acceptContractContext[0m

2025/11/13 17:12:56 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/contract_repository.go:26 [35;1mrecord not found
[0m[33m[0.014ms] [34;1m[rows:0][0m SELECT * FROM `contracts` WHERE contract_id = "NON-EXISTENT" AND player_id = 1 ORDER BY `contracts`.`contract_id` LIMIT 1
    [32mWhen[0m [32mI try to execute accept contract command for "NON-EXISTENT" with player 1[0m [1;30m# accept_contract_steps.go:363 -> *acceptContractContext[0m
    [32mThen[0m [32mthe command should return an error containing "contract not found"[0m        [1;30m# accept_contract_steps.go:369 -> *acceptContractContext[0m
=== RUN   TestFeatures/Accept_contract_with_API_integration

2025/11/13 17:12:56 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/player_repository.go:25 [35;1mrecord not found
[0m[33m[0.018ms] [34;1m[rows:0][0m SELECT * FROM `players` WHERE player_id = 1 ORDER BY `players`.`player_id` LIMIT 1

  [1;37mScenario:[0m Accept contract with API integration                           [1;30m# features/application/accept_contract.feature:20[0m
    [32mGiven[0m [32man unaccepted contract "CONTRACT-3" for player 1 in the database[0m [1;30m# accept_contract_steps.go:357 -> *acceptContractContext[0m
    [32mAnd[0m [32mthe API will successfully accept the contract[0m                      [1;30m# accept_contract_steps.go:359 -> *acceptContractContext[0m
    [32mWhen[0m [32mI execute accept contract command for "CONTRACT-3" with player 1[0m  [1;30m# accept_contract_steps.go:362 -> *acceptContractContext[0m
    [32mThen[0m [32mthe command should succeed[0m                                        [1;30m# accept_contract_steps.go:366 -> *acceptContractContext[0m
    [32mAnd[0m [32mthe contract should be persisted with accepted status[0m              [1;30m# accept_contract_steps.go:370 -> *acceptContractContext[0m

[1;37mFeature:[0m Batch Contract Workflow
  As a space trader
  I want to execute automated contract workflows in batches
  So that I can efficiently complete multiple contracts with minimal manual intervention
=== RUN   TestFeatures/Single_contract_workflow_end-to-end

  [1;37mBackground:[0m
    [32mGiven[0m [32ma mediator is configured with all contract handlers[0m             [1;30m# batch_contract_workflow_steps.go:615 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma player with ID 1 exists with agent "TEST-AGENT"[0m                 [1;30m# batch_contract_workflow_steps.go:616 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma system "X1-TEST" exists with multiple waypoints[0m                 [1;30m# batch_contract_workflow_steps.go:617 -> *batchContractWorkflowContext[0m

  [1;37mScenario:[0m Single contract workflow end-to-end                           [1;30m# features/application/batch_contract_workflow.feature:11[0m
    [32mGiven[0m [32ma ship "SHIP-1" owned by player 1 at waypoint "X1-TEST-A1"[0m      [1;30m# batch_contract_workflow_steps.go:618 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has 100 cargo capacity[0m                          [1;30m# batch_contract_workflow_steps.go:619 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mno active contracts exist for player 1[0m                            [1;30m# batch_contract_workflow_steps.go:620 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma market at "X1-TEST-B1" sells "IRON_ORE" for 50 credits per unit[0m [1;30m# batch_contract_workflow_steps.go:621 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mwaypoint "X1-TEST-C1" exists as a delivery destination[0m            [1;30m# batch_contract_workflow_steps.go:622 -> *batchContractWorkflowContext[0m
    [32mWhen[0m [32mI execute batch contract workflow with:[0m                          [1;30m# batch_contract_workflow_steps.go:633 -> *batchContractWorkflowContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36miterations[0m  | [36m1[0m      |
      | [36mplayer_id[0m   | [36m1[0m      |
    [32mThen[0m [32mthe workflow result should show:[0m                                 [1;30m# batch_contract_workflow_steps.go:636 -> *batchContractWorkflowContext[0m
      | [36mnegotiated[0m | [36m1[0m |
      | [36maccepted[0m   | [36m1[0m |
      | [36mfulfilled[0m  | [36m1[0m |
      | [36mfailed[0m     | [36m0[0m |
    [32mAnd[0m [32mno errors should be recorded[0m                                      [1;30m# batch_contract_workflow_steps.go:637 -> *batchContractWorkflowContext[0m
=== RUN   TestFeatures/Resume_existing_active_contract_(idempotency)

  [1;37mScenario:[0m Resume existing active contract (idempotency)                 [1;30m# features/application/batch_contract_workflow.feature:28[0m
    [32mGiven[0m [32ma ship "SHIP-1" owned by player 1 at waypoint "X1-TEST-A1"[0m      [1;30m# batch_contract_workflow_steps.go:618 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has 100 cargo capacity[0m                          [1;30m# batch_contract_workflow_steps.go:619 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32man existing active contract "CONTRACT-1" for player 1 requiring:[0m  [1;30m# batch_contract_workflow_steps.go:623 -> *batchContractWorkflowContext[0m
      | [36mtrade_symbol[0m       | [36mIRON_ORE[0m   |
      | [36munits_required[0m     | [36m100[0m        |
      | [36munits_fulfilled[0m    | [36m0[0m          |
      | [36mdestination_symbol[0m | [36mX1-TEST-C1[0m |
    [32mAnd[0m [32ma market at "X1-TEST-B1" sells "IRON_ORE" for 50 credits per unit[0m [1;30m# batch_contract_workflow_steps.go:621 -> *batchContractWorkflowContext[0m
    [32mWhen[0m [32mI execute batch contract workflow with:[0m                          [1;30m# batch_contract_workflow_steps.go:633 -> *batchContractWorkflowContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36miterations[0m  | [36m1[0m      |
      | [36mplayer_id[0m   | [36m1[0m      |
    [32mThen[0m [32mthe workflow result should show:[0m                                 [1;30m# batch_contract_workflow_steps.go:636 -> *batchContractWorkflowContext[0m
      | [36mnegotiated[0m | [36m0[0m |
      | [36maccepted[0m   | [36m1[0m |
      | [36mfulfilled[0m  | [36m1[0m |
      | [36mfailed[0m     | [36m0[0m |
    [32mAnd[0m [32mthe existing contract "CONTRACT-1" should be fulfilled[0m            [1;30m# batch_contract_workflow_steps.go:638 -> *batchContractWorkflowContext[0m
=== RUN   TestFeatures/Multi-trip_delivery_when_cargo_capacity_is_less_than_required_units

  [1;37mScenario:[0m Multi-trip delivery when cargo capacity is less than required units      [1;30m# features/application/batch_contract_workflow.feature:48[0m
    [32mGiven[0m [32ma ship "SHIP-1" owned by player 1 at waypoint "X1-TEST-A1"[0m                 [1;30m# batch_contract_workflow_steps.go:618 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has 100 cargo capacity[0m                                     [1;30m# batch_contract_workflow_steps.go:619 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mno active contracts exist for player 1[0m                                       [1;30m# batch_contract_workflow_steps.go:620 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma contract requiring 200 units of "IRON_ORE" to be delivered to "X1-TEST-C1"[0m [1;30m# batch_contract_workflow_steps.go:624 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma market at "X1-TEST-B1" sells "IRON_ORE" for 50 credits per unit[0m            [1;30m# batch_contract_workflow_steps.go:621 -> *batchContractWorkflowContext[0m
    [32mWhen[0m [32mI execute batch contract workflow with:[0m                                     [1;30m# batch_contract_workflow_steps.go:633 -> *batchContractWorkflowContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36miterations[0m  | [36m1[0m      |
      | [36mplayer_id[0m   | [36m1[0m      |
    [32mThen[0m [32mthe workflow result should show:[0m                                            [1;30m# batch_contract_workflow_steps.go:636 -> *batchContractWorkflowContext[0m
      | [36mnegotiated[0m | [36m1[0m |
      | [36maccepted[0m   | [36m1[0m |
      | [36mfulfilled[0m  | [36m1[0m |
      | [36mfailed[0m     | [36m0[0m |
    [32mAnd[0m [32mthe workflow should have executed 2 trips[0m                                    [1;30m# batch_contract_workflow_steps.go:639 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mall 200 units should be delivered[0m                                            [1;30m# batch_contract_workflow_steps.go:640 -> *batchContractWorkflowContext[0m
=== RUN   TestFeatures/Jettison_wrong_cargo_before_purchase_when_cargo_is_full

  [1;37mScenario:[0m Jettison wrong cargo before purchase when cargo is full                  [1;30m# features/application/batch_contract_workflow.feature:66[0m
    [32mGiven[0m [32ma ship "SHIP-1" owned by player 1 at waypoint "X1-TEST-A1"[0m                 [1;30m# batch_contract_workflow_steps.go:618 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has 100 cargo capacity[0m                                     [1;30m# batch_contract_workflow_steps.go:619 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has cargo:[0m                                                 [1;30m# batch_contract_workflow_steps.go:625 -> *batchContractWorkflowContext[0m
      | [36msymbol[0m     | [36munits[0m |
      | [36mCOPPER_ORE[0m | [36m50[0m    |
    [32mAnd[0m [32mno active contracts exist for player 1[0m                                       [1;30m# batch_contract_workflow_steps.go:620 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma contract requiring 100 units of "IRON_ORE" to be delivered to "X1-TEST-C1"[0m [1;30m# batch_contract_workflow_steps.go:624 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma market at "X1-TEST-B1" sells "IRON_ORE" for 50 credits per unit[0m            [1;30m# batch_contract_workflow_steps.go:621 -> *batchContractWorkflowContext[0m
    [32mWhen[0m [32mI execute batch contract workflow with:[0m                                     [1;30m# batch_contract_workflow_steps.go:633 -> *batchContractWorkflowContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36miterations[0m  | [36m1[0m      |
      | [36mplayer_id[0m   | [36m1[0m      |
    [32mThen[0m [32mthe workflow result should show:[0m                                            [1;30m# batch_contract_workflow_steps.go:636 -> *batchContractWorkflowContext[0m
      | [36mnegotiated[0m | [36m1[0m |
      | [36maccepted[0m   | [36m1[0m |
      | [36mfulfilled[0m  | [36m1[0m |
      | [36mfailed[0m     | [36m0[0m |
    [32mAnd[0m [32m"COPPER_ORE" should have been jettisoned[0m                                     [1;30m# batch_contract_workflow_steps.go:641 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32m"IRON_ORE" should have been purchased[0m                                        [1;30m# batch_contract_workflow_steps.go:642 -> *batchContractWorkflowContext[0m
=== RUN   TestFeatures/Jettison_wrong_cargo_when_ship_has_mixed_cargo_and_needs_more_space

  [1;37mScenario:[0m Jettison wrong cargo when ship has mixed cargo and needs more space      [1;30m# features/application/batch_contract_workflow.feature:87[0m
    [32mGiven[0m [32ma ship "SHIP-1" owned by player 1 at waypoint "X1-TEST-A1"[0m                 [1;30m# batch_contract_workflow_steps.go:618 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has 100 cargo capacity[0m                                     [1;30m# batch_contract_workflow_steps.go:619 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has cargo:[0m                                                 [1;30m# batch_contract_workflow_steps.go:625 -> *batchContractWorkflowContext[0m
      | [36msymbol[0m     | [36munits[0m |
      | [36mIRON_ORE[0m   | [36m30[0m    |
      | [36mCOPPER_ORE[0m | [36m40[0m    |
    [32mAnd[0m [32mno active contracts exist for player 1[0m                                       [1;30m# batch_contract_workflow_steps.go:620 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma contract requiring 100 units of "IRON_ORE" to be delivered to "X1-TEST-C1"[0m [1;30m# batch_contract_workflow_steps.go:624 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma market at "X1-TEST-B1" sells "IRON_ORE" for 50 credits per unit[0m            [1;30m# batch_contract_workflow_steps.go:621 -> *batchContractWorkflowContext[0m
    [32mWhen[0m [32mI execute batch contract workflow with:[0m                                     [1;30m# batch_contract_workflow_steps.go:633 -> *batchContractWorkflowContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36miterations[0m  | [36m1[0m      |
      | [36mplayer_id[0m   | [36m1[0m      |
    [32mThen[0m [32mthe workflow result should show:[0m                                            [1;30m# batch_contract_workflow_steps.go:636 -> *batchContractWorkflowContext[0m
      | [36mnegotiated[0m | [36m1[0m |
      | [36maccepted[0m   | [36m1[0m |
      | [36mfulfilled[0m  | [36m1[0m |
      | [36mfailed[0m     | [36m0[0m |
    [32mAnd[0m [32m"COPPER_ORE" should have been jettisoned[0m                                     [1;30m# batch_contract_workflow_steps.go:641 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32m70 units of "IRON_ORE" should have been purchased[0m                            [1;30m# batch_contract_workflow_steps.go:643 -> *batchContractWorkflowContext[0m
=== RUN   TestFeatures/Transaction_splitting_when_market_has_transaction_limits

  [1;37mScenario:[0m Transaction splitting when market has transaction limits                                [1;30m# features/application/batch_contract_workflow.feature:109[0m
    [32mGiven[0m [32ma ship "SHIP-1" owned by player 1 at waypoint "X1-TEST-A1"[0m                                [1;30m# batch_contract_workflow_steps.go:618 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has 100 cargo capacity[0m                                                    [1;30m# batch_contract_workflow_steps.go:619 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mno active contracts exist for player 1[0m                                                      [1;30m# batch_contract_workflow_steps.go:620 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma contract requiring 100 units of "IRON_ORE" to be delivered to "X1-TEST-C1"[0m                [1;30m# batch_contract_workflow_steps.go:624 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma market at "X1-TEST-B1" sells "IRON_ORE" for 50 credits per unit with transaction limit 30[0m [1;30m# batch_contract_workflow_steps.go:626 -> *batchContractWorkflowContext[0m
    [32mWhen[0m [32mI execute batch contract workflow with:[0m                                                    [1;30m# batch_contract_workflow_steps.go:633 -> *batchContractWorkflowContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36miterations[0m  | [36m1[0m      |
      | [36mplayer_id[0m   | [36m1[0m      |
    [32mThen[0m [32mthe workflow result should show:[0m                                                           [1;30m# batch_contract_workflow_steps.go:636 -> *batchContractWorkflowContext[0m
      | [36mnegotiated[0m | [36m1[0m |
      | [36maccepted[0m   | [36m1[0m |
      | [36mfulfilled[0m  | [36m1[0m |
      | [36mfailed[0m     | [36m0[0m |
    [32mAnd[0m [32mpurchases should have been split into 4 transactions[0m                                        [1;30m# batch_contract_workflow_steps.go:644 -> *batchContractWorkflowContext[0m
=== RUN   TestFeatures/Multiple_iterations_with_profit_tracking

  [1;37mScenario:[0m Multiple iterations with profit tracking                 [1;30m# features/application/batch_contract_workflow.feature:126[0m
    [32mGiven[0m [32ma ship "SHIP-1" owned by player 1 at waypoint "X1-TEST-A1"[0m [1;30m# batch_contract_workflow_steps.go:618 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has 100 cargo capacity[0m                     [1;30m# batch_contract_workflow_steps.go:619 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mno active contracts exist for player 1[0m                       [1;30m# batch_contract_workflow_steps.go:620 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mmarkets sell "IRON_ORE" at various prices[0m                    [1;30m# batch_contract_workflow_steps.go:627 -> *batchContractWorkflowContext[0m
    [32mWhen[0m [32mI execute batch contract workflow with:[0m                     [1;30m# batch_contract_workflow_steps.go:633 -> *batchContractWorkflowContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36miterations[0m  | [36m3[0m      |
      | [36mplayer_id[0m   | [36m1[0m      |
    [32mThen[0m [32mthe workflow result should show:[0m                            [1;30m# batch_contract_workflow_steps.go:636 -> *batchContractWorkflowContext[0m
      | [36mnegotiated[0m | [36m3[0m |
      | [36maccepted[0m   | [36m3[0m |
      | [36mfulfilled[0m  | [36m3[0m |
      | [36mfailed[0m     | [36m0[0m |
    [32mAnd[0m [32mtotal profit should be calculated across all contracts[0m       [1;30m# batch_contract_workflow_steps.go:645 -> *batchContractWorkflowContext[0m
=== RUN   TestFeatures/Graceful_error_handling_-_continue_to_next_iteration_on_failure

  [1;37mScenario:[0m Graceful error handling - continue to next iteration on failure [1;30m# features/application/batch_contract_workflow.feature:142[0m
    [32mGiven[0m [32ma ship "SHIP-1" owned by player 1 at waypoint "X1-TEST-A1"[0m        [1;30m# batch_contract_workflow_steps.go:618 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has 100 cargo capacity[0m                            [1;30m# batch_contract_workflow_steps.go:619 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mno active contracts exist for player 1[0m                              [1;30m# batch_contract_workflow_steps.go:620 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe second contract negotiation will fail[0m                           [1;30m# batch_contract_workflow_steps.go:628 -> *batchContractWorkflowContext[0m
    [32mWhen[0m [32mI execute batch contract workflow with:[0m                            [1;30m# batch_contract_workflow_steps.go:633 -> *batchContractWorkflowContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36miterations[0m  | [36m3[0m      |
      | [36mplayer_id[0m   | [36m1[0m      |
    [32mThen[0m [32mthe workflow result should show:[0m                                   [1;30m# batch_contract_workflow_steps.go:636 -> *batchContractWorkflowContext[0m
      | [36mnegotiated[0m | [36m2[0m |
      | [36maccepted[0m   | [36m2[0m |
      | [36mfulfilled[0m  | [36m2[0m |
      | [36mfailed[0m     | [36m1[0m |
    [32mAnd[0m [32m1 error should be recorded[0m                                          [1;30m# batch_contract_workflow_steps.go:646 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe workflow should complete all 3 iterations[0m                       [1;30m# batch_contract_workflow_steps.go:647 -> *batchContractWorkflowContext[0m
=== RUN   TestFeatures/Unprofitable_contract_still_accepted_(matches_Python_behavior)

  [1;37mScenario:[0m Unprofitable contract still accepted (matches Python behavior) [1;30m# features/application/batch_contract_workflow.feature:159[0m
    [32mGiven[0m [32ma ship "SHIP-1" owned by player 1 at waypoint "X1-TEST-A1"[0m       [1;30m# batch_contract_workflow_steps.go:618 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mthe ship "SHIP-1" has 100 cargo capacity[0m                           [1;30m# batch_contract_workflow_steps.go:619 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32mno active contracts exist for player 1[0m                             [1;30m# batch_contract_workflow_steps.go:620 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma contract with net profit of -3000 credits[0m                        [1;30m# batch_contract_workflow_steps.go:629 -> *batchContractWorkflowContext[0m
    [32mAnd[0m [32ma market sells the required goods[0m                                  [1;30m# batch_contract_workflow_steps.go:630 -> *batchContractWorkflowContext[0m
    [32mWhen[0m [32mI execute batch contract workflow with:[0m                           [1;30m# batch_contract_workflow_steps.go:633 -> *batchContractWorkflowContext[0m
      | [36mship_symbol[0m | [36mSHIP-1[0m |
      | [36miterations[0m  | [36m1[0m      |
      | [36mplayer_id[0m   | [36m1[0m      |
    [32mThen[0m [32mthe workflow result should show:[0m                                  [1;30m# batch_contract_workflow_steps.go:636 -> *batchContractWorkflowContext[0m
      | [36mnegotiated[0m | [36m1[0m |
      | [36maccepted[0m   | [36m1[0m |
      | [36mfulfilled[0m  | [36m1[0m |
      | [36mfailed[0m     | [36m0[0m |
    [32mAnd[0m [32ma warning should be logged about unprofitability[0m                   [1;30m# batch_contract_workflow_steps.go:648 -> *batchContractWorkflowContext[0m

[1;37mFeature:[0m Deliver Contract Command
  As a SpaceTraders player
  I want to deliver cargo for contracts
  So that I can fulfill contract requirements and earn rewards
=== RUN   TestFeatures/Deliver_cargo_for_valid_delivery#01

  [1;37mBackground:[0m
    [33mGiven[0m [33ma mediator is initialized[0m
    [33mAnd[0m [33ma mock API client[0m
    [33mAnd[0m [33ma contract repository[0m
    [33mAnd[0m [33ma player repository[0m
    [33mAnd[0m [33ma ship repository[0m

  [1;37mScenario:[0m Deliver cargo for valid delivery                                                                           [1;30m# features/application/deliver_contract.feature:14[0m
    [33mGiven[0m [33ma player with ID 1 and token "test-token-1"[0m
    [33mAnd[0m [33man accepted contract "CONTRACT-1" for player 1 with delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m
    [33mAnd[0m [33ma ship "SHIP-1" owned by player 1 at waypoint "X1-GZ7-A1" with 50 "IRON_ORE" in cargo[0m
    [33mAnd[0m [33mthe API will return successful delivery with 50 units delivered[0m
    [33mWhen[0m [33mI send DeliverContractCommand with contract "CONTRACT-1", ship "SHIP-1", trade "IRON_ORE", 50 units, player 1[0m
    [36mThen[0m [36mthe command should succeed[0m                                                                                    [1;30m# accept_contract_steps.go:366 -> *acceptContractContext[0m
    [33mAnd[0m [33m50 units should be delivered[0m
    [33mAnd[0m [33mthe contract should show 50 units fulfilled for "IRON_ORE"[0m
=== RUN   TestFeatures/Deliver_remaining_cargo_completes_delivery#01

  [1;37mScenario:[0m Deliver remaining cargo completes delivery                                                                 [1;30m# features/application/deliver_contract.feature:24[0m
    [33mGiven[0m [33ma player with ID 1 and token "test-token-1"[0m
    [33mAnd[0m [33man accepted contract "CONTRACT-1" for player 1 with 50 of 100 "IRON_ORE" already delivered to "X1-GZ7-A1"[0m
    [33mAnd[0m [33ma ship "SHIP-1" owned by player 1 at waypoint "X1-GZ7-A1" with 50 "IRON_ORE" in cargo[0m
    [33mAnd[0m [33mthe API will return successful delivery with 50 units delivered[0m
    [33mWhen[0m [33mI send DeliverContractCommand with contract "CONTRACT-1", ship "SHIP-1", trade "IRON_ORE", 50 units, player 1[0m
    [36mThen[0m [36mthe command should succeed[0m                                                                                    [1;30m# accept_contract_steps.go:366 -> *acceptContractContext[0m
    [33mAnd[0m [33m50 units should be delivered[0m
    [33mAnd[0m [33mthe contract should show 100 units fulfilled for "IRON_ORE"[0m
=== RUN   TestFeatures/Cannot_deliver_more_than_required#01

  [1;37mScenario:[0m Cannot deliver more than required                                                                           [1;30m# features/application/deliver_contract.feature:34[0m
    [33mGiven[0m [33ma player with ID 1 and token "test-token-1"[0m
    [33mAnd[0m [33man accepted contract "CONTRACT-1" for player 1 with delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m
    [33mAnd[0m [33ma ship "SHIP-1" owned by player 1 at waypoint "X1-GZ7-A1" with 150 "IRON_ORE" in cargo[0m
    [33mWhen[0m [33mI send DeliverContractCommand with contract "CONTRACT-1", ship "SHIP-1", trade "IRON_ORE", 150 units, player 1[0m
    [36mThen[0m [36mthe command should fail with error "units exceed required"[0m                                                     [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Cannot_deliver_invalid_trade_symbol#01

  [1;37mScenario:[0m Cannot deliver invalid trade symbol                                                                          [1;30m# features/application/deliver_contract.feature:41[0m
    [33mGiven[0m [33ma player with ID 1 and token "test-token-1"[0m
    [33mAnd[0m [33man accepted contract "CONTRACT-1" for player 1 with delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m
    [33mAnd[0m [33ma ship "SHIP-1" owned by player 1 at waypoint "X1-GZ7-A1" with 50 "COPPER_ORE" in cargo[0m
    [33mWhen[0m [33mI send DeliverContractCommand with contract "CONTRACT-1", ship "SHIP-1", trade "COPPER_ORE", 50 units, player 1[0m
    [36mThen[0m [36mthe command should fail with error "trade symbol not in contract"[0m                                               [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Cannot_deliver_when_contract_not_found

  [1;37mScenario:[0m Cannot deliver when contract not found                                                                      [1;30m# features/application/deliver_contract.feature:48[0m
    [33mGiven[0m [33ma player with ID 1 and token "test-token-1"[0m
    [33mAnd[0m [33ma ship "SHIP-1" owned by player 1 at waypoint "X1-GZ7-A1" with 50 "IRON_ORE" in cargo[0m
    [33mWhen[0m [33mI send DeliverContractCommand with contract "NONEXISTENT", ship "SHIP-1", trade "IRON_ORE", 50 units, player 1[0m
    [36mThen[0m [36mthe command should fail with error "contract not found"[0m                                                        [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Cannot_deliver_when_player_not_found

  [1;37mScenario:[0m Cannot deliver when player not found                                                                         [1;30m# features/application/deliver_contract.feature:54[0m
    [33mGiven[0m [33ma ship "SHIP-1" owned by player 999 at waypoint "X1-GZ7-A1" with 50 "IRON_ORE" in cargo[0m
    [33mWhen[0m [33mI send DeliverContractCommand with contract "CONTRACT-1", ship "SHIP-1", trade "IRON_ORE", 50 units, player 999[0m
    [36mThen[0m [36mthe command should fail with error "player not found"[0m                                                           [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m

[1;37mFeature:[0m Dock Ship Command
  As a SpaceTraders bot
  I want to dock ships at waypoints
  So that I can refuel and access station services
=== RUN   TestFeatures/Dock_ship_when_already_docked

  [1;37mBackground:[0m
    [32mGiven[0m [32ma player exists with agent "TEST-AGENT" and token "test-token-123"[0m [1;30m# negotiate_contract_steps.go:347 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe player has player_id 1[0m                                           [1;30m# negotiate_contract_steps.go:348 -> *negotiateContractContext[0m

  [1;37mScenario:[0m Dock ship when already docked                                    [1;30m# features/application/dock_ship.feature:10[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "DOCKED"[0m       [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute DockShipCommand for ship "SHIP-1" and player 1[0m            [1;30m# dock_ship_steps.go:218 -> *dockShipContext[0m
    [31mThen[0m [31mthe command should succeed with status "already_docked"[0m             [1;30m# dock_ship_steps.go:219 -> *dockShipContext[0m
    [1;31mexpected success but got error: ship not found[0m
    [36mAnd[0m [36mthe ship should still be docked[0m                                      [1;30m# dock_ship_steps.go:220 -> *dockShipContext[0m
    suite.go:640: expected success but got error: ship not found
=== RUN   TestFeatures/Dock_ship_when_in_orbit

  [1;37mScenario:[0m Dock ship when in orbit                                          [1;30m# features/application/dock_ship.feature:16[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m     [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute DockShipCommand for ship "SHIP-1" and player 1[0m            [1;30m# dock_ship_steps.go:218 -> *dockShipContext[0m
    [31mThen[0m [31mthe command should succeed with status "docked"[0m                     [1;30m# dock_ship_steps.go:219 -> *dockShipContext[0m
    [1;31mexpected success but got error: ship not found[0m
    [36mAnd[0m [36mthe ship should be docked at "X1-A1"[0m                                 [1;30m# dock_ship_steps.go:221 -> *dockShipContext[0m
    suite.go:640: expected success but got error: ship not found
=== RUN   TestFeatures/Cannot_dock_ship_when_in_transit

  [1;37mScenario:[0m Cannot dock ship when in transit                                 [1;30m# features/application/dock_ship.feature:22[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 in transit to "X1-B2"[0m                 [1;30m# navigate_to_waypoint_steps.go:304 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute DockShipCommand for ship "SHIP-1" and player 1[0m            [1;30m# dock_ship_steps.go:218 -> *dockShipContext[0m
    [31mThen[0m [31mthe command should fail with error "cannot dock while in transit"[0m   [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
    [1;31mexpected error 'cannot dock while in transit' but got 'ship not found'[0m
    suite.go:640: expected error 'cannot dock while in transit' but got 'ship not found'
=== RUN   TestFeatures/Cannot_dock_ship_that_does_not_exist

  [1;37mScenario:[0m Cannot dock ship that does not exist                             [1;30m# features/application/dock_ship.feature:27[0m
    [32mWhen[0m [32mI execute DockShipCommand for ship "NONEXISTENT" and player 1[0m       [1;30m# dock_ship_steps.go:218 -> *dockShipContext[0m
    [32mThen[0m [32mthe command should fail with error "ship not found"[0m                 [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Cannot_dock_ship_belonging_to_different_player

  [1;37mScenario:[0m Cannot dock ship belonging to different player                   [1;30m# features/application/dock_ship.feature:31[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 2 at "X1-A1" with status "IN_ORBIT"[0m     [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute DockShipCommand for ship "SHIP-1" and player 1[0m            [1;30m# dock_ship_steps.go:218 -> *dockShipContext[0m
    [32mThen[0m [32mthe command should fail with error "ship not found"[0m                 [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m

[1;37mFeature:[0m Evaluate Contract Profitability Query
=== RUN   TestFeatures/Profitable_contract_with_single_delivery

  [1;37mBackground:[0m
    [32mGiven[0m [32ma system "X1-GZ7"[0m                                                             [1;30m# evaluate_contract_profitability_steps.go:379 -> *evaluateProfitabilityContext[0m

  [1;37mScenario:[0m Profitable contract with single delivery                                    [1;30m# features/application/evaluate_contract_profitability.feature:6[0m
    [32mGiven[0m [32ma contract paying 10000 credits on acceptance and 50000 on fulfillment[0m        [1;30m# evaluate_contract_profitability_steps.go:380 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m                 [1;30m# evaluate_contract_profitability_steps.go:381 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe cheapest market sells "IRON_ORE" at 200 credits per unit in system "X1-GZ7"[0m [1;30m# evaluate_contract_profitability_steps.go:383 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32ma ship with 100 cargo capacity[0m                                                  [1;30m# evaluate_contract_profitability_steps.go:385 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mfuel cost is 1000 credits per trip[0m                                              [1;30m# evaluate_contract_profitability_steps.go:386 -> *evaluateProfitabilityContext[0m
    [32mWhen[0m [32mI evaluate the contract profitability[0m                                          [1;30m# evaluate_contract_profitability_steps.go:387 -> *evaluateProfitabilityContext[0m
    [32mThen[0m [32mthe net profit should be 39000 credits[0m                                         [1;30m# evaluate_contract_profitability_steps.go:390 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract should be profitable[0m                                               [1;30m# evaluate_contract_profitability_steps.go:391 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mtrips required should be 1[0m                                                      [1;30m# evaluate_contract_profitability_steps.go:393 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe purchase cost should be 20000 credits[0m                                       [1;30m# evaluate_contract_profitability_steps.go:394 -> *evaluateProfitabilityContext[0m
=== RUN   TestFeatures/Acceptable_small_loss_within_threshold

  [1;37mScenario:[0m Acceptable small loss within threshold                                      [1;30m# features/application/evaluate_contract_profitability.feature:18[0m
    [32mGiven[0m [32ma contract paying 10000 credits on acceptance and 20000 on fulfillment[0m        [1;30m# evaluate_contract_profitability_steps.go:380 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m                 [1;30m# evaluate_contract_profitability_steps.go:381 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe cheapest market sells "IRON_ORE" at 300 credits per unit in system "X1-GZ7"[0m [1;30m# evaluate_contract_profitability_steps.go:383 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32ma ship with 100 cargo capacity[0m                                                  [1;30m# evaluate_contract_profitability_steps.go:385 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mfuel cost is 4000 credits per trip[0m                                              [1;30m# evaluate_contract_profitability_steps.go:386 -> *evaluateProfitabilityContext[0m
    [32mWhen[0m [32mI evaluate the contract profitability[0m                                          [1;30m# evaluate_contract_profitability_steps.go:387 -> *evaluateProfitabilityContext[0m
    [32mThen[0m [32mthe net profit should be -4000 credits[0m                                         [1;30m# evaluate_contract_profitability_steps.go:390 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract should be profitable[0m                                               [1;30m# evaluate_contract_profitability_steps.go:391 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe reason should contain "Acceptable small loss"[0m                               [1;30m# evaluate_contract_profitability_steps.go:395 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mtrips required should be 1[0m                                                      [1;30m# evaluate_contract_profitability_steps.go:393 -> *evaluateProfitabilityContext[0m
=== RUN   TestFeatures/Unacceptable_loss_exceeding_threshold

  [1;37mScenario:[0m Unacceptable loss exceeding threshold                                       [1;30m# features/application/evaluate_contract_profitability.feature:30[0m
    [32mGiven[0m [32ma contract paying 5000 credits on acceptance and 10000 on fulfillment[0m         [1;30m# evaluate_contract_profitability_steps.go:380 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 200 "IRON_ORE" to "X1-GZ7-A1"[0m                 [1;30m# evaluate_contract_profitability_steps.go:381 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe cheapest market sells "IRON_ORE" at 300 credits per unit in system "X1-GZ7"[0m [1;30m# evaluate_contract_profitability_steps.go:383 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32ma ship with 50 cargo capacity[0m                                                   [1;30m# evaluate_contract_profitability_steps.go:385 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mfuel cost is 2000 credits per trip[0m                                              [1;30m# evaluate_contract_profitability_steps.go:386 -> *evaluateProfitabilityContext[0m
    [32mWhen[0m [32mI evaluate the contract profitability[0m                                          [1;30m# evaluate_contract_profitability_steps.go:387 -> *evaluateProfitabilityContext[0m
    [32mThen[0m [32mthe net profit should be -53000 credits[0m                                        [1;30m# evaluate_contract_profitability_steps.go:390 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract should not be profitable[0m                                           [1;30m# evaluate_contract_profitability_steps.go:392 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe reason should contain "Loss exceeds acceptable threshold"[0m                   [1;30m# evaluate_contract_profitability_steps.go:395 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mtrips required should be 4[0m                                                      [1;30m# evaluate_contract_profitability_steps.go:393 -> *evaluateProfitabilityContext[0m
=== RUN   TestFeatures/Multi-delivery_contract

  [1;37mScenario:[0m Multi-delivery contract                                                       [1;30m# features/application/evaluate_contract_profitability.feature:42[0m
    [32mGiven[0m [32ma contract paying 20000 credits on acceptance and 80000 on fulfillment[0m          [1;30m# evaluate_contract_profitability_steps.go:380 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m                   [1;30m# evaluate_contract_profitability_steps.go:381 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 50 "COPPER_ORE" to "X1-GZ7-B2"[0m                  [1;30m# evaluate_contract_profitability_steps.go:381 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe cheapest market sells "IRON_ORE" at 200 credits per unit in system "X1-GZ7"[0m   [1;30m# evaluate_contract_profitability_steps.go:383 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe cheapest market sells "COPPER_ORE" at 300 credits per unit in system "X1-GZ7"[0m [1;30m# evaluate_contract_profitability_steps.go:383 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32ma ship with 100 cargo capacity[0m                                                    [1;30m# evaluate_contract_profitability_steps.go:385 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mfuel cost is 1500 credits per trip[0m                                                [1;30m# evaluate_contract_profitability_steps.go:386 -> *evaluateProfitabilityContext[0m
    [32mWhen[0m [32mI evaluate the contract profitability[0m                                            [1;30m# evaluate_contract_profitability_steps.go:387 -> *evaluateProfitabilityContext[0m
    [32mThen[0m [32mthe purchase cost should be 35000 credits[0m                                        [1;30m# evaluate_contract_profitability_steps.go:394 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mtrips required should be 2[0m                                                        [1;30m# evaluate_contract_profitability_steps.go:393 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe net profit should be 62000 credits[0m                                            [1;30m# evaluate_contract_profitability_steps.go:390 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract should be profitable[0m                                                 [1;30m# evaluate_contract_profitability_steps.go:391 -> *evaluateProfitabilityContext[0m
=== RUN   TestFeatures/No_cheapest_market_found

  [1;37mScenario:[0m No cheapest market found                                             [1;30m# features/application/evaluate_contract_profitability.feature:56[0m
    [32mGiven[0m [32ma contract paying 10000 credits on acceptance and 50000 on fulfillment[0m [1;30m# evaluate_contract_profitability_steps.go:380 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 100 "RARE_ORE" to "X1-GZ7-A1"[0m          [1;30m# evaluate_contract_profitability_steps.go:381 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mno market sells "RARE_ORE" in system "X1-GZ7"[0m                            [1;30m# evaluate_contract_profitability_steps.go:384 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32ma ship with 100 cargo capacity[0m                                           [1;30m# evaluate_contract_profitability_steps.go:385 -> *evaluateProfitabilityContext[0m
    [32mWhen[0m [32mI try to evaluate the contract profitability[0m                            [1;30m# evaluate_contract_profitability_steps.go:388 -> *evaluateProfitabilityContext[0m
    [32mThen[0m [32mI should get an error containing "no market found selling RARE_ORE"[0m     [1;30m# evaluate_contract_profitability_steps.go:396 -> *evaluateProfitabilityContext[0m
=== RUN   TestFeatures/Ship_not_found

  [1;37mScenario:[0m Ship not found                                                              [1;30m# features/application/evaluate_contract_profitability.feature:64[0m
    [32mGiven[0m [32ma contract paying 10000 credits on acceptance and 50000 on fulfillment[0m        [1;30m# evaluate_contract_profitability_steps.go:380 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 100 "IRON_ORE" to "X1-GZ7-A1"[0m                 [1;30m# evaluate_contract_profitability_steps.go:381 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe cheapest market sells "IRON_ORE" at 200 credits per unit in system "X1-GZ7"[0m [1;30m# evaluate_contract_profitability_steps.go:383 -> *evaluateProfitabilityContext[0m
    [32mWhen[0m [32mI try to evaluate the contract profitability with an invalid ship[0m              [1;30m# evaluate_contract_profitability_steps.go:389 -> *evaluateProfitabilityContext[0m
    [32mThen[0m [32mI should get an error containing "ship not found"[0m                              [1;30m# evaluate_contract_profitability_steps.go:396 -> *evaluateProfitabilityContext[0m
=== RUN   TestFeatures/Contract_with_partially_fulfilled_deliveries

  [1;37mScenario:[0m Contract with partially fulfilled deliveries                                                [1;30m# features/application/evaluate_contract_profitability.feature:71[0m
    [32mGiven[0m [32ma contract paying 10000 credits on acceptance and 50000 on fulfillment[0m                        [1;30m# evaluate_contract_profitability_steps.go:380 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 100 "IRON_ORE" to "X1-GZ7-A1" with 40 units already fulfilled[0m [1;30m# evaluate_contract_profitability_steps.go:382 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe cheapest market sells "IRON_ORE" at 200 credits per unit in system "X1-GZ7"[0m                 [1;30m# evaluate_contract_profitability_steps.go:383 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32ma ship with 60 cargo capacity[0m                                                                   [1;30m# evaluate_contract_profitability_steps.go:385 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mfuel cost is 1000 credits per trip[0m                                                              [1;30m# evaluate_contract_profitability_steps.go:386 -> *evaluateProfitabilityContext[0m
    [32mWhen[0m [32mI evaluate the contract profitability[0m                                                          [1;30m# evaluate_contract_profitability_steps.go:387 -> *evaluateProfitabilityContext[0m
    [32mThen[0m [32mthe purchase cost should be 12000 credits[0m                                                      [1;30m# evaluate_contract_profitability_steps.go:394 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mtrips required should be 1[0m                                                                      [1;30m# evaluate_contract_profitability_steps.go:393 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe net profit should be 47000 credits[0m                                                          [1;30m# evaluate_contract_profitability_steps.go:390 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract should be profitable[0m                                                               [1;30m# evaluate_contract_profitability_steps.go:391 -> *evaluateProfitabilityContext[0m
=== RUN   TestFeatures/Multiple_deliveries_with_same_trade_symbol

  [1;37mScenario:[0m Multiple deliveries with same trade symbol                                  [1;30m# features/application/evaluate_contract_profitability.feature:83[0m
    [32mGiven[0m [32ma contract paying 30000 credits on acceptance and 70000 on fulfillment[0m        [1;30m# evaluate_contract_profitability_steps.go:380 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 50 "IRON_ORE" to "X1-GZ7-A1"[0m                  [1;30m# evaluate_contract_profitability_steps.go:381 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract requires delivery of 75 "IRON_ORE" to "X1-GZ7-B2"[0m                  [1;30m# evaluate_contract_profitability_steps.go:381 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe cheapest market sells "IRON_ORE" at 200 credits per unit in system "X1-GZ7"[0m [1;30m# evaluate_contract_profitability_steps.go:383 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32ma ship with 100 cargo capacity[0m                                                  [1;30m# evaluate_contract_profitability_steps.go:385 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mfuel cost is 1500 credits per trip[0m                                              [1;30m# evaluate_contract_profitability_steps.go:386 -> *evaluateProfitabilityContext[0m
    [32mWhen[0m [32mI evaluate the contract profitability[0m                                          [1;30m# evaluate_contract_profitability_steps.go:387 -> *evaluateProfitabilityContext[0m
    [32mThen[0m [32mthe purchase cost should be 25000 credits[0m                                      [1;30m# evaluate_contract_profitability_steps.go:394 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mtrips required should be 2[0m                                                      [1;30m# evaluate_contract_profitability_steps.go:393 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe net profit should be 72000 credits[0m                                          [1;30m# evaluate_contract_profitability_steps.go:390 -> *evaluateProfitabilityContext[0m
    [32mAnd[0m [32mthe contract should be profitable[0m                                               [1;30m# evaluate_contract_profitability_steps.go:391 -> *evaluateProfitabilityContext[0m

[1;37mFeature:[0m Fulfill Contract Command
  As a SpaceTraders player
  I want to fulfill completed contracts
  So that I can receive the fulfillment payment and complete my obligations
=== RUN   TestFeatures/Fulfill_contract_with_all_deliveries_complete

  [1;37mBackground:[0m
    [33mGiven[0m [33ma mediator is initialized[0m
    [33mAnd[0m [33ma mock API client[0m
    [33mAnd[0m [33ma contract repository[0m
    [33mAnd[0m [33ma player repository[0m

  [1;37mScenario:[0m Fulfill contract with all deliveries complete                            [1;30m# features/application/fulfill_contract.feature:13[0m
    [33mGiven[0m [33ma player with ID 1 and token "test-token-1"[0m
    [33mAnd[0m [33man accepted contract "CONTRACT-1" for player 1 with all deliveries fulfilled[0m
    [33mAnd[0m [33mthe API will successfully fulfill the contract[0m
    [33mWhen[0m [33mI send FulfillContractCommand for "CONTRACT-1" with player 1[0m
    [36mThen[0m [36mthe command should succeed[0m                                                  [1;30m# accept_contract_steps.go:366 -> *acceptContractContext[0m
    [33mAnd[0m [33mthe contract should be marked as fulfilled[0m
=== RUN   TestFeatures/Cannot_fulfill_contract_with_incomplete_deliveries

  [1;37mScenario:[0m Cannot fulfill contract with incomplete deliveries                    [1;30m# features/application/fulfill_contract.feature:21[0m
    [33mGiven[0m [33ma player with ID 1 and token "test-token-1"[0m
    [33mAnd[0m [33man accepted contract "CONTRACT-2" for player 1 with incomplete deliveries[0m
    [33mWhen[0m [33mI send FulfillContractCommand for "CONTRACT-2" with player 1[0m
    [36mThen[0m [36mthe command should fail with error "deliveries not complete"[0m             [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Fulfill_non-existent_contract

  [1;37mScenario:[0m Fulfill non-existent contract                               [1;30m# features/application/fulfill_contract.feature:27[0m
    [33mGiven[0m [33ma player with ID 1 and token "test-token-1"[0m
    [33mWhen[0m [33mI send FulfillContractCommand for "NON-EXISTENT" with player 1[0m
    [36mThen[0m [36mthe command should fail with error "contract not found"[0m        [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Fulfill_contract_without_valid_player

  [1;37mScenario:[0m Fulfill contract without valid player                                        [1;30m# features/application/fulfill_contract.feature:32[0m
    [33mGiven[0m [33man accepted contract "CONTRACT-3" for player 999 with all deliveries fulfilled[0m
    [33mWhen[0m [33mI send FulfillContractCommand for "CONTRACT-3" with player 999[0m
    [36mThen[0m [36mthe command should fail with error "player not found"[0m                           [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Fulfill_contract_with_API_integration

  [1;37mScenario:[0m Fulfill contract with API integration                                    [1;30m# features/application/fulfill_contract.feature:37[0m
    [33mGiven[0m [33ma player with ID 1 and token "test-token-1"[0m
    [33mAnd[0m [33man accepted contract "CONTRACT-4" for player 1 with all deliveries fulfilled[0m
    [33mAnd[0m [33mthe API will successfully fulfill the contract[0m
    [33mWhen[0m [33mI send FulfillContractCommand for "CONTRACT-4" with player 1[0m
    [36mThen[0m [36mthe command should succeed[0m                                                  [1;30m# accept_contract_steps.go:366 -> *acceptContractContext[0m
    [33mAnd[0m [33mthe contract should be persisted with fulfilled status[0m

[1;37mFeature:[0m Jettison Cargo Command
  As a SpaceTraders bot
  I want to jettison cargo from ships
  So that I can free up cargo space when needed
=== RUN   TestFeatures/Jettison_cargo_successfully_from_ship_in_orbit

  [1;37mBackground:[0m
    [32mGiven[0m [32ma player exists with agent "TEST-AGENT" and token "test-token-123"[0m                 [1;30m# negotiate_contract_steps.go:347 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe player has player_id 1[0m                                                           [1;30m# negotiate_contract_steps.go:348 -> *negotiateContractContext[0m

  [1;37mScenario:[0m Jettison cargo successfully from ship in orbit                                   [1;30m# features/application/jettison_cargo.feature:10[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 in orbit at "X1-A1" with cargo:[0m                       [1;30m# jettison_cargo_steps.go:247 -> *jettisonCargoContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m50[0m    |
    [32mWhen[0m [32mI execute JettisonCargoCommand for ship "SHIP-1" jettisoning 30 units of "IRON_ORE"[0m [1;30m# jettison_cargo_steps.go:249 -> *jettisonCargoContext[0m
    [32mThen[0m [32mthe jettison command should succeed[0m                                                 [1;30m# jettison_cargo_steps.go:250 -> *jettisonCargoContext[0m
    [32mAnd[0m [32m30 units should have been jettisoned[0m                                                 [1;30m# jettison_cargo_steps.go:251 -> *jettisonCargoContext[0m
    [32mAnd[0m [32mthe ship should have 20 units of "IRON_ORE" remaining[0m                                [1;30m# jettison_cargo_steps.go:252 -> *jettisonCargoContext[0m
=== RUN   TestFeatures/Jettison_all_cargo_of_a_type

  [1;37mScenario:[0m Jettison all cargo of a type                                                     [1;30m# features/application/jettison_cargo.feature:19[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 in orbit at "X1-A1" with cargo:[0m                       [1;30m# jettison_cargo_steps.go:247 -> *jettisonCargoContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m50[0m    |
    [32mWhen[0m [32mI execute JettisonCargoCommand for ship "SHIP-1" jettisoning 50 units of "IRON_ORE"[0m [1;30m# jettison_cargo_steps.go:249 -> *jettisonCargoContext[0m
    [32mThen[0m [32mthe jettison command should succeed[0m                                                 [1;30m# jettison_cargo_steps.go:250 -> *jettisonCargoContext[0m
    [32mAnd[0m [32m50 units should have been jettisoned[0m                                                 [1;30m# jettison_cargo_steps.go:251 -> *jettisonCargoContext[0m
    [32mAnd[0m [32mthe ship should have 0 units of "IRON_ORE" remaining[0m                                 [1;30m# jettison_cargo_steps.go:252 -> *jettisonCargoContext[0m
=== RUN   TestFeatures/Cannot_jettison_more_cargo_than_ship_has

  [1;37mScenario:[0m Cannot jettison more cargo than ship has                                         [1;30m# features/application/jettison_cargo.feature:28[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 in orbit at "X1-A1" with cargo:[0m                       [1;30m# jettison_cargo_steps.go:247 -> *jettisonCargoContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m20[0m    |
    [32mWhen[0m [32mI execute JettisonCargoCommand for ship "SHIP-1" jettisoning 30 units of "IRON_ORE"[0m [1;30m# jettison_cargo_steps.go:249 -> *jettisonCargoContext[0m
    [32mThen[0m [32mthe jettison command should fail with error "insufficient cargo"[0m                    [1;30m# jettison_cargo_steps.go:253 -> *jettisonCargoContext[0m
=== RUN   TestFeatures/Cannot_jettison_cargo_ship_doesn't_have_at_all

  [1;37mScenario:[0m Cannot jettison cargo ship doesn't have at all                                   [1;30m# features/application/jettison_cargo.feature:35[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 in orbit at "X1-A1" with cargo:[0m                       [1;30m# jettison_cargo_steps.go:247 -> *jettisonCargoContext[0m
      | [36msymbol[0m | [36munits[0m |
    [32mWhen[0m [32mI execute JettisonCargoCommand for ship "SHIP-1" jettisoning 30 units of "IRON_ORE"[0m [1;30m# jettison_cargo_steps.go:249 -> *jettisonCargoContext[0m
    [32mThen[0m [32mthe jettison command should fail with error "insufficient cargo"[0m                    [1;30m# jettison_cargo_steps.go:253 -> *jettisonCargoContext[0m
=== RUN   TestFeatures/Ship_not_found#01

  [1;37mScenario:[0m Ship not found                                                                         [1;30m# features/application/jettison_cargo.feature:41[0m
    [32mWhen[0m [32mI execute JettisonCargoCommand for ship "NON-EXISTENT" jettisoning 30 units of "IRON_ORE"[0m [1;30m# jettison_cargo_steps.go:249 -> *jettisonCargoContext[0m
    [32mThen[0m [32mthe jettison command should fail with error "ship not found"[0m                              [1;30m# jettison_cargo_steps.go:253 -> *jettisonCargoContext[0m
=== RUN   TestFeatures/Auto-orbit_ship_before_jettisoning_when_docked

  [1;37mScenario:[0m Auto-orbit ship before jettisoning when docked                                   [1;30m# features/application/jettison_cargo.feature:45[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 docked at "X1-A1" with cargo:[0m                         [1;30m# jettison_cargo_steps.go:248 -> *jettisonCargoContext[0m
      | [36msymbol[0m   | [36munits[0m |
      | [36mIRON_ORE[0m | [36m50[0m    |
    [32mWhen[0m [32mI execute JettisonCargoCommand for ship "SHIP-1" jettisoning 30 units of "IRON_ORE"[0m [1;30m# jettison_cargo_steps.go:249 -> *jettisonCargoContext[0m
    [32mThen[0m [32mthe jettison command should succeed[0m                                                 [1;30m# jettison_cargo_steps.go:250 -> *jettisonCargoContext[0m
    [32mAnd[0m [32m30 units should have been jettisoned[0m                                                 [1;30m# jettison_cargo_steps.go:251 -> *jettisonCargoContext[0m
    [32mAnd[0m [32mthe ship should have 20 units of "IRON_ORE" remaining[0m                                [1;30m# jettison_cargo_steps.go:252 -> *jettisonCargoContext[0m

[1;37mFeature:[0m Navigate Ship Handler - Business Rules Testing
  As a SpaceTraders bot
  I want to execute navigation commands with proper business rules
  So that ships navigate safely with optimal refueling and state management
=== RUN   TestFeatures/Load_graph_from_database_cache_when_available

  [1;37mScenario:[0m Load graph from database cache when available               [1;30m# features/application/navigate_ship_handler.feature:11[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has a cached graph with 10 waypoints[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" has trait "MARKETPLACE" in waypoints table[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-B1" has no fuel station trait[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-GZ7-A1" with 100 fuel[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-B1"[0m
    [33mThen[0m [33mthe graph should be loaded from database cache[0m
    [33mAnd[0m [33mwaypoints should be enriched with has_fuel trait data[0m
    [33mAnd[0m [33mnavigation should succeed[0m
=== RUN   TestFeatures/Build_graph_from_API_when_cache_is_empty

  [1;37mScenario:[0m Build graph from API when cache is empty          [1;30m# features/application/navigate_ship_handler.feature:24[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-NEW" has no cached graph[0m
    [33mAnd[0m [33mthe API will return 5 waypoints for system "X1-NEW"[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-NEW-A1"[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-NEW-B1"[0m
    [33mThen[0m [33mthe API should be called to list waypoints[0m
    [33mAnd[0m [33mthe graph should be saved to system_graphs table[0m
    [33mAnd[0m [33mwaypoints should be saved to waypoints table[0m
    [33mAnd[0m [33mthe graph should be enriched with trait data[0m
    [33mAnd[0m [33mnavigation should succeed[0m
=== RUN   TestFeatures/Merge_graph_structure_with_waypoint_trait_data

  [1;37mScenario:[0m Merge graph structure with waypoint trait data              [1;30m# features/application/navigate_ship_handler.feature:38[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has cached graph structure only[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" has trait "MARKETPLACE" in waypoints table[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-B1" has no traits in waypoints table[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-GZ7-A1" with 100 fuel[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-B1"[0m
    [33mThen[0m [33mwaypoint "X1-GZ7-A1" should be enriched with has_fuel true[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-B1" should be enriched with has_fuel false[0m
=== RUN   TestFeatures/Reject_navigation_with_empty_waypoint_cache

  [1;37mScenario:[0m Reject navigation with empty waypoint cache                 [1;30m# features/application/navigate_ship_handler.feature:54[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has zero waypoints in cache[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-GZ7-A1"[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-B1"[0m
    [36mThen[0m [36mthe command should fail with error "waypoint cache is empty"[0m   [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
    [36mAnd[0m [36mthe error should mention "Please sync waypoints from API first"[0m [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Reject_navigation_when_ship_location_missing_from_cache

  [1;37mScenario:[0m Reject navigation when ship location missing from cache                        [1;30m# features/application/navigate_ship_handler.feature:64[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has 5 waypoints cached[0m
    [33mBut[0m [33mwaypoint "X1-GZ7-A1" is NOT in the cache[0m
    [33mAnd[0m [33mship "SCOUT-1" reports location "X1-GZ7-A1"[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-B1"[0m
    [36mThen[0m [36mthe command should fail with error "Ship location is missing from waypoint cache"[0m [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Reject_navigation_when_destination_missing_from_cache

  [1;37mScenario:[0m Reject navigation when destination missing from cache                                 [1;30m# features/application/navigate_ship_handler.feature:74[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoint "X1-GZ7-A1" cached[0m
    [33mBut[0m [33mwaypoint "X1-GZ7-B1" is NOT cached[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-GZ7-A1"[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-B1"[0m
    [36mThen[0m [36mthe command should fail with error "Destination waypoint is missing from waypoint cache"[0m [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Route_not_found_-_provide_detailed_statistics

  [1;37mScenario:[0m Route not found - provide detailed statistics                        [1;30m# features/application/navigate_ship_handler.feature:84[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has 20 waypoints with 3 fuel stations[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-GZ7-A1" with 50 fuel out of 100 capacity[0m
    [33mAnd[0m [33mdestination "X1-GZ7-UNREACHABLE" exists but routing engine finds no path[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-UNREACHABLE"[0m
    [33mThen[0m [33mthe error should include "No route found"[0m
    [36mAnd[0m [36mthe error should mention "20 waypoints cached"[0m                           [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
    [36mAnd[0m [36mthe error should mention "3 fuel stations"[0m                               [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
    [36mAnd[0m [36mthe error should mention "Ship fuel: 50/100"[0m                             [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
    [36mAnd[0m [36mthe error should mention "unreachable or require multi-hop refueling"[0m    [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Ship_already_at_destination_-_return_success_immediately

  [1;37mScenario:[0m Ship already at destination - return success immediately [1;30m# features/application/navigate_ship_handler.feature:102[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-GZ7-A1"[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-A1"[0m
    [33mThen[0m [33mthe response status should be "already_at_destination"[0m
    [33mAnd[0m [33mno navigate API calls should be made[0m
    [36mAnd[0m [36mthe route should have 0 segments[0m                             [1;30m# route_steps.go:313 -> *routeContext[0m
    [36mAnd[0m [36mthe route status should be "COMPLETED"[0m                       [1;30m# route_executor_steps.go:697 -> *routeExecutorContext[0m
    [33mAnd[0m [33mcurrent location should be "X1-GZ7-A1"[0m
=== RUN   TestFeatures/Wait_for_previous_command_completion_before_starting_new_navigation

  [1;37mScenario:[0m Wait for previous command completion before starting new navigation [1;30m# features/application/navigate_ship_handler.feature:115[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" is IN_TRANSIT to "X1-GZ7-B1" arriving in 30 seconds[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-C1"[0m
    [33mThen[0m [33mthe handler should detect IN_TRANSIT state[0m
    [33mAnd[0m [33mthe handler should wait for arrival[0m
    [33mAnd[0m [33mship state should be re-synced after arrival[0m
    [33mAnd[0m [33mthen navigation to "X1-GZ7-C1" should begin[0m
=== RUN   TestFeatures/Opportunistically_refuel_when_arriving_at_fuel_station_with_less_than_90%_fuel

  [1;37mScenario:[0m Opportunistically refuel when arriving at fuel station with less than 90% fuel [1;30m# features/application/navigate_ship_handler.feature:131[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-B1" is a fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" has 100 fuel capacity[0m
    [33mAnd[0m [33mship "SCOUT-1" starts at "X1-GZ7-A1" with 100 fuel[0m
    [33mAnd[0m [33mnavigation to "X1-GZ7-B1" consumes 50 fuel[0m
    [33mAnd[0m [33mthe routing engine plans direct route without planned refuel[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-B1"[0m
    [33mThen[0m [33mship should arrive at "X1-GZ7-B1" with 50% fuel[0m
    [33mAnd[0m [33mopportunistic refuel should trigger[0m
    [33mAnd[0m [33mship should dock at "X1-GZ7-B1"[0m
    [33mAnd[0m [33mship should refuel to 100/100[0m
    [33mAnd[0m [33mship should orbit after refuel[0m
=== RUN   TestFeatures/Skip_opportunistic_refuel_when_fuel_is_at_or_above_90%

  [1;37mScenario:[0m Skip opportunistic refuel when fuel is at or above 90% [1;30m# features/application/navigate_ship_handler.feature:148[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-B1" is a fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" has 100 fuel capacity[0m
    [33mAnd[0m [33mship arrives at fuel station "X1-GZ7-B1" with 95 fuel[0m
    [33mWhen[0m [33mthe navigation segment completes[0m
    [33mThen[0m [33mopportunistic refuel should NOT trigger[0m
    [33mAnd[0m [33mship should remain in orbit[0m
=== RUN   TestFeatures/Skip_opportunistic_refuel_at_non-fuel-station

  [1;37mScenario:[0m Skip opportunistic refuel at non-fuel-station     [1;30m# features/application/navigate_ship_handler.feature:160[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-C1" has no fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" arrives at "X1-GZ7-C1" with 30% fuel[0m
    [33mWhen[0m [33mthe navigation segment completes[0m
    [33mThen[0m [33mopportunistic refuel should NOT trigger[0m
=== RUN   TestFeatures/Skip_opportunistic_refuel_when_segment_already_requires_refuel

  [1;37mScenario:[0m Skip opportunistic refuel when segment already requires refuel [1;30m# features/application/navigate_ship_handler.feature:170[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-B1" is a fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" arrives at fuel station "X1-GZ7-B1" with 50% fuel[0m
    [33mAnd[0m [33mthe segment has requires_refuel set to true[0m
    [33mWhen[0m [33mthe navigation segment completes[0m
    [33mThen[0m [33mopportunistic refuel should NOT trigger[0m
    [33mAnd[0m [33monly the planned refuel should execute[0m
=== RUN   TestFeatures/Refuel_before_departure_when_DRIFT_mode_planned_at_fuel_station

  [1;37mScenario:[0m Refuel before departure when DRIFT mode planned at fuel station [1;30m# features/application/navigate_ship_handler.feature:186[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" is a fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" is at fuel station "X1-GZ7-A1" with 50% fuel[0m
    [33mAnd[0m [33mrouting engine plans DRIFT mode for next segment[0m
    [33mAnd[0m [33mcurrent location has fuel available[0m
    [33mWhen[0m [33mnavigation begins for the segment[0m
    [33mThen[0m [33mpre-departure refuel should trigger[0m
    [33mAnd[0m [33mship should refuel before departing[0m
    [33mAnd[0m [33mlog should mention "Preventing DRIFT mode"[0m
=== RUN   TestFeatures/Skip_pre-departure_refuel_when_using_CRUISE_mode

  [1;37mScenario:[0m Skip pre-departure refuel when using CRUISE mode        [1;30m# features/application/navigate_ship_handler.feature:200[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" is a fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" is at fuel station "X1-GZ7-A1" with 50% fuel[0m
    [33mAnd[0m [33mrouting engine plans CRUISE mode for next segment[0m
    [33mWhen[0m [33mnavigation begins for the segment[0m
    [33mThen[0m [33mpre-departure refuel should NOT trigger[0m
=== RUN   TestFeatures/Skip_pre-departure_refuel_when_fuel_is_at_or_above_90%

  [1;37mScenario:[0m Skip pre-departure refuel when fuel is at or above 90%  [1;30m# features/application/navigate_ship_handler.feature:211[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" is a fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" is at fuel station "X1-GZ7-A1" with 95% fuel[0m
    [33mAnd[0m [33mrouting engine plans DRIFT mode for next segment[0m
    [33mWhen[0m [33mnavigation begins for the segment[0m
    [33mThen[0m [33mpre-departure refuel should NOT trigger[0m
=== RUN   TestFeatures/Skip_pre-departure_refuel_when_not_at_fuel_station

  [1;37mScenario:[0m Skip pre-departure refuel when not at fuel station [1;30m# features/application/navigate_ship_handler.feature:222[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" has no fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-GZ7-A1" with 50% fuel[0m
    [33mAnd[0m [33mrouting engine plans DRIFT mode for next segment[0m
    [33mWhen[0m [33mnavigation begins for the segment[0m
    [33mThen[0m [33mpre-departure refuel should NOT trigger[0m
=== RUN   TestFeatures/Refuel_at_start_location_when_route_requires_it

  [1;37mScenario:[0m Refuel at start location when route requires it         [1;30m# features/application/navigate_ship_handler.feature:237[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" is a fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" is at fuel station "X1-GZ7-A1" with low fuel[0m
    [33mAnd[0m [33mroute has refuel_before_departure set to true[0m
    [33mWhen[0m [33mroute execution begins[0m
    [33mThen[0m [33mship should dock at "X1-GZ7-A1"[0m
    [33mAnd[0m [33mship should refuel to full capacity[0m
    [33mAnd[0m [33mship should orbit after refuel[0m
    [33mAnd[0m [33mthen first segment should execute[0m
=== RUN   TestFeatures/Set_flight_mode_before_each_navigation_segment

  [1;37mScenario:[0m Set flight mode before each navigation segment              [1;30m# features/application/navigate_ship_handler.feature:255[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-GZ7-A1" with 100 fuel[0m
    [33mAnd[0m [33mrouting engine plans BURN mode for segment 1[0m
    [33mAnd[0m [33mrouting engine plans CRUISE mode for segment 2[0m
    [33mWhen[0m [33msegment 1 executes[0m
    [33mThen[0m [33mflight mode should be set to "BURN" before navigate API call[0m
    [33mWhen[0m [33msegment 2 executes[0m
    [33mThen[0m [33mflight mode should be set to "CRUISE" before navigate API call[0m
=== RUN   TestFeatures/Wait_for_ship_to_arrive_after_navigation

  [1;37mScenario:[0m Wait for ship to arrive after navigation                [1;30m# features/application/navigate_ship_handler.feature:272[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" navigates from "X1-GZ7-A1" to "X1-GZ7-B1"[0m
    [33mAnd[0m [33mAPI returns segment travel time of 45 seconds[0m
    [33mAnd[0m [33mcurrent time is "2025-11-12T12:00:00Z"[0m
    [33mWhen[0m [33mnavigation API is called[0m
    [33mThen[0m [33mthe handler should calculate 45 seconds wait time[0m
    [33mAnd[0m [33mthe handler should sleep for 48 seconds[0m
    [33mAnd[0m [33mship state should be re-fetched after sleep[0m
    [33mAnd[0m [33mship Arrive method should be called if status is IN_TRANSIT[0m
=== RUN   TestFeatures/Handle_arrival_time_in_the_past_-_ship_already_arrived

  [1;37mScenario:[0m Handle arrival time in the past - ship already arrived [1;30m# features/application/navigate_ship_handler.feature:286[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" navigates to destination[0m
    [33mAnd[0m [33mAPI returns travel time in the past[0m
    [33mWhen[0m [33mnavigation executes[0m
    [33mThen[0m [33mwait time should be 0 seconds[0m
    [33mAnd[0m [33mno sleep should occur[0m
    [33mAnd[0m [33mship state should still be re-fetched[0m
=== RUN   TestFeatures/Re-sync_ship_state_after_every_API_call

  [1;37mScenario:[0m Re-sync ship state after every API call                     [1;30m# features/application/navigate_ship_handler.feature:302[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" executes a route with dock refuel orbit navigate[0m
    [33mWhen[0m [33mdock API is called[0m
    [33mThen[0m [33mship state should be re-fetched immediately[0m
    [33mWhen[0m [33mrefuel API is called[0m
    [33mThen[0m [33mship state should be re-fetched immediately[0m
    [33mWhen[0m [33morbit API is called[0m
    [33mThen[0m [33mship state should be re-fetched immediately[0m
    [33mWhen[0m [33mnavigate API is called[0m
    [33mThen[0m [33mship state should be re-fetched immediately[0m
=== RUN   TestFeatures/Mark_route_as_failed_when_navigation_fails

  [1;37mScenario:[0m Mark route as failed when navigation fails             [1;30m# features/application/navigate_ship_handler.feature:321[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" starts navigation to "X1-GZ7-B1"[0m
    [33mBut[0m [33mnavigate API returns error "Insufficient fuel"[0m
    [33mWhen[0m [33mthe error occurs during execution[0m
    [33mThen[0m [33mroute status should be set to FAILED[0m
    [33mAnd[0m [33mroute FailRoute method should be called with error message[0m
    [33mAnd[0m [33mthe error should propagate to caller[0m
=== RUN   TestFeatures/Handle_dock_failure_during_refuel_sequence

  [1;37mScenario:[0m Handle dock failure during refuel sequence        [1;30m# features/application/navigate_ship_handler.feature:333[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" attempts to refuel at "X1-GZ7-B1"[0m
    [33mBut[0m [33mdock API returns error "Ship is already docked"[0m
    [33mWhen[0m [33mthe error occurs[0m
    [33mThen[0m [33mthe error should be returned to handler[0m
    [33mAnd[0m [33mroute should be marked as FAILED[0m
=== RUN   TestFeatures/Execute_multi-segment_route_with_planned_refueling

  [1;37mScenario:[0m Execute multi-segment route with planned refueling [1;30m# features/application/navigate_ship_handler.feature:348[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" has 50 fuel capacity[0m
    [33mAnd[0m [33mship "SCOUT-1" starts at "X1-GZ7-A1" with 50 fuel[0m
    [33mAnd[0m [33mrouting engine plans route with segments:[0m
      | [36mFrom[0m      | [36mTo[0m        | [36mFuel Cost[0m | [36mRequires Refuel[0m |
      | [36mX1-GZ7-A1[0m | [36mX1-GZ7-B1[0m | [36m30[0m        | [36mfalse[0m           |
      | [36mX1-GZ7-B1[0m | [36mX1-GZ7-C1[0m | [36m40[0m        | [36mtrue[0m            |
      | [36mX1-GZ7-C1[0m | [36mX1-GZ7-D1[0m | [36m35[0m        | [36mfalse[0m           |
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-D1"[0m
    [33mThen[0m [33msegment 1 should execute from A1 to B1[0m
    [33mAnd[0m [33mship should have 20 fuel remaining at B1[0m
    [33mAnd[0m [33msegment 2 should execute from B1 to C1[0m
    [33mAnd[0m [33mship should refuel at C1 because of planned refuel[0m
    [33mAnd[0m [33mship should have 50 fuel after refuel at C1[0m
    [33mAnd[0m [33msegment 3 should execute from C1 to D1[0m
    [33mAnd[0m [33mship should arrive at D1[0m
    [33mAnd[0m [33mroute status should be COMPLETED[0m
=== RUN   TestFeatures/Execute_route_with_opportunistic_and_planned_refueling

  [1;37mScenario:[0m Execute route with opportunistic and planned refueling [1;30m# features/application/navigate_ship_handler.feature:370[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" has 100 fuel capacity[0m
    [33mAnd[0m [33mship "SCOUT-1" starts at "X1-GZ7-A1" with 100 fuel[0m
    [33mAnd[0m [33mrouting engine plans route with segments:[0m
      | [36mFrom[0m      | [36mTo[0m        | [36mFuel Cost[0m | [36mRequires Refuel[0m | [36mWaypoint Has Fuel[0m |
      | [36mX1-GZ7-A1[0m | [36mX1-GZ7-B1[0m | [36m60[0m        | [36mfalse[0m           | [36mtrue[0m              |
      | [36mX1-GZ7-B1[0m | [36mX1-GZ7-C1[0m | [36m30[0m        | [36mfalse[0m           | [36mfalse[0m             |
      | [36mX1-GZ7-C1[0m | [36mX1-GZ7-D1[0m | [36m45[0m        | [36mtrue[0m            | [36mtrue[0m              |
      | [36mX1-GZ7-D1[0m | [36mX1-GZ7-E1[0m | [36m35[0m        | [36mfalse[0m           | [36mfalse[0m             |
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-E1"[0m
    [33mThen[0m [33msegment 1 should execute to B1[0m
    [33mAnd[0m [33mship should have 40% fuel at B1[0m
    [33mAnd[0m [33mopportunistic refuel should trigger at B1[0m
    [33mAnd[0m [33msegment 2 should execute to C1[0m
    [33mAnd[0m [33mno refuel at C1 because no fuel station[0m
    [33mAnd[0m [33msegment 3 should execute to D1[0m
    [33mAnd[0m [33mplanned refuel should execute at D1[0m
    [33mAnd[0m [33msegment 4 should execute to E1[0m
    [33mAnd[0m [33mroute status should be COMPLETED[0m
=== RUN   TestFeatures/Ship_transitions_through_states_during_navigation

  [1;37mScenario:[0m Ship transitions through states during navigation [1;30m# features/application/navigate_ship_handler.feature:398[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" is DOCKED at "X1-GZ7-A1"[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-B1"[0m
    [33mThen[0m [33mship should be IN_ORBIT before navigation[0m
    [33mAnd[0m [33mship should be IN_TRANSIT after navigate API call[0m
    [33mAnd[0m [33mship should be IN_ORBIT after arrival[0m
    [33mAnd[0m [33mfinal status should be IN_ORBIT at "X1-GZ7-B1"[0m
=== RUN   TestFeatures/Refuel_sequence_follows_dock_orbit_pattern

  [1;37mScenario:[0m Refuel sequence follows dock orbit pattern          [1;30m# features/application/navigate_ship_handler.feature:410[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-B1" is a fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" is IN_ORBIT at "X1-GZ7-B1" with low fuel[0m
    [33mAnd[0m [33mroute requires refuel at "X1-GZ7-B1"[0m
    [33mWhen[0m [33mrefuel sequence executes[0m
    [33mThen[0m [33mship should transition to DOCKED[0m
    [33mAnd[0m [33mrefuel API should be called[0m
    [33mAnd[0m [33mship should transition back to IN_ORBIT[0m
    [33mAnd[0m [33mfuel should be at 100%[0m
=== RUN   TestFeatures/Ship_with_zero_fuel_capacity_navigates_without_refueling

  [1;37mScenario:[0m Ship with zero fuel capacity navigates without refueling [1;30m# features/application/navigate_ship_handler.feature:428[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "PROBE-1" has 0 fuel capacity[0m
    [33mAnd[0m [33mship "PROBE-1" is at "X1-GZ7-A1"[0m
    [33mWhen[0m [33mI navigate "PROBE-1" to "X1-GZ7-B1"[0m
    [33mThen[0m [33mnavigation should succeed[0m
    [33mAnd[0m [33mno refuel checks should execute[0m
    [33mAnd[0m [33mno fuel consumption should occur[0m
=== RUN   TestFeatures/Single_waypoint_system_-_already_at_destination

  [1;37mScenario:[0m Single waypoint system - already at destination     [1;30m# features/application/navigate_ship_handler.feature:440[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-SOLO" has only 1 waypoint cached[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-SOLO-A1"[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-SOLO-A1"[0m
    [33mThen[0m [33mthe response status should be "already_at_destination"[0m
    [33mAnd[0m [33mroute should have 0 segments[0m
    [33mAnd[0m [33mno API calls should be made[0m
=== RUN   TestFeatures/Route_with_only_refuel_before_departure

  [1;37mScenario:[0m Route with only refuel before departure                    [1;30m# features/application/navigate_ship_handler.feature:451[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" is a fuel station[0m
    [33mAnd[0m [33mship "SCOUT-1" is at "X1-GZ7-A1" with 10% fuel[0m
    [33mAnd[0m [33mrouting engine returns route with refuel_before_departure true[0m
    [33mAnd[0m [33mroute has 1 segment from A1 to B1[0m
    [33mWhen[0m [33mI navigate "SCOUT-1" to "X1-GZ7-B1"[0m
    [33mThen[0m [33mship should refuel before starting journey[0m
    [33mAnd[0m [33mship should have 100% fuel before departure[0m
    [33mAnd[0m [33mthen segment to B1 should execute[0m
=== RUN   TestFeatures/Calculate_correct_wait_time_with_3_second_buffer

  [1;37mScenario:[0m Calculate correct wait time with 3 second buffer          [1;30m# features/application/navigate_ship_handler.feature:469[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" navigates with segment travel time 120 seconds[0m
    [33mWhen[0m [33mnavigation API completes[0m
    [33mThen[0m [33mhandler should calculate wait time as 120 seconds[0m
    [33mAnd[0m [33mhandler should add 3 second buffer[0m
    [33mAnd[0m [33mtotal sleep time should be 123 seconds[0m
=== RUN   TestFeatures/Zero_wait_time_for_instant_arrival

  [1;37mScenario:[0m Zero wait time for instant arrival                      [1;30m# features/application/navigate_ship_handler.feature:480[0m
    [33mGiven[0m [33man in-memory database is initialized[0m
    [33mAnd[0m [33ma player "TEST-PLAYER" exists with token "test-token"[0m
    [33mAnd[0m [33msystem "X1-GZ7" has waypoints cached[0m
    [33mAnd[0m [33mship "SCOUT-1" navigates with segment travel time 0 seconds[0m
    [33mWhen[0m [33mnavigation API completes[0m
    [33mThen[0m [33mhandler should calculate wait time as 0 seconds[0m
    [33mAnd[0m [33mno sleep should occur[0m
    [33mAnd[0m [33mship state should still be re-synced[0m

[1;37mFeature:[0m Navigate to Waypoint Command
  As a SpaceTraders bot
  I want to navigate ships to waypoints
  So that I can move ships around the system
=== RUN   TestFeatures/Successfully_navigate_ship_from_orbit

  [1;37mBackground:[0m
    [32mGiven[0m [32ma player exists with agent "TEST-AGENT" and token "test-token-123"[0m           [1;30m# negotiate_contract_steps.go:347 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe player has player_id 1[0m                                                     [1;30m# negotiate_contract_steps.go:348 -> *negotiateContractContext[0m

  [1;37mScenario:[0m Successfully navigate ship from orbit                                      [1;30m# features/application/navigate_to_waypoint.feature:10[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m               [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" exists at coordinates (100, 50)[0m                             [1;30m# navigate_to_waypoint_steps.go:307 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute NavigateToWaypointCommand for ship "SHIP-1" to "X1-B2" for player 1[0m [1;30m# navigate_to_waypoint_steps.go:308 -> *navigateToWaypointContext[0m
    [32mThen[0m [32mthe navigation should succeed with status "navigating"[0m                        [1;30m# navigate_to_waypoint_steps.go:310 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32mthe ship should be in transit to "X1-B2"[0m                                       [1;30m# navigate_to_waypoint_steps.go:311 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32mthe response should include arrival time[0m                                       [1;30m# navigate_to_waypoint_steps.go:312 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32mthe response should include fuel consumed[0m                                      [1;30m# navigate_to_waypoint_steps.go:313 -> *navigateToWaypointContext[0m
=== RUN   TestFeatures/Navigate_ship_that_is_docked_(auto-orbits_first)

  [1;37mScenario:[0m Navigate ship that is docked (auto-orbits first)                           [1;30m# features/application/navigate_to_waypoint.feature:19[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "DOCKED"[0m                 [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" exists at coordinates (100, 50)[0m                             [1;30m# navigate_to_waypoint_steps.go:307 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute NavigateToWaypointCommand for ship "SHIP-1" to "X1-B2" for player 1[0m [1;30m# navigate_to_waypoint_steps.go:308 -> *navigateToWaypointContext[0m
    [32mThen[0m [32mthe navigation should succeed with status "navigating"[0m                        [1;30m# navigate_to_waypoint_steps.go:310 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32mthe ship should be in transit to "X1-B2"[0m                                       [1;30m# navigate_to_waypoint_steps.go:311 -> *navigateToWaypointContext[0m
=== RUN   TestFeatures/Ship_already_at_destination_(idempotent)

  [1;37mScenario:[0m Ship already at destination (idempotent)                                   [1;30m# features/application/navigate_to_waypoint.feature:26[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m               [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute NavigateToWaypointCommand for ship "SHIP-1" to "X1-A1" for player 1[0m [1;30m# navigate_to_waypoint_steps.go:308 -> *navigateToWaypointContext[0m
    [32mThen[0m [32mthe navigation should succeed with status "already_at_destination"[0m            [1;30m# navigate_to_waypoint_steps.go:310 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32mthe ship should remain at "X1-A1"[0m                                              [1;30m# navigate_to_waypoint_steps.go:314 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32mthe ship should still be in orbit[0m                                              [1;30m# navigate_to_waypoint_steps.go:315 -> *navigateToWaypointContext[0m
=== RUN   TestFeatures/Invalid_destination_waypoint

  [1;37mScenario:[0m Invalid destination waypoint                                          [1;30m# features/application/navigate_to_waypoint.feature:33[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m          [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute NavigateToWaypointCommand for ship "SHIP-1" to "" for player 1[0m [1;30m# navigate_to_waypoint_steps.go:308 -> *navigateToWaypointContext[0m
    [32mThen[0m [32mthe navigation should fail with error "invalid destination waypoint"[0m     [1;30m# navigate_to_waypoint_steps.go:316 -> *navigateToWaypointContext[0m
=== RUN   TestFeatures/Ship_already_in_transit

  [1;37mScenario:[0m Ship already in transit                                                    [1;30m# features/application/navigate_to_waypoint.feature:38[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 in transit to "X1-B2"[0m                           [1;30m# navigate_to_waypoint_steps.go:304 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute NavigateToWaypointCommand for ship "SHIP-1" to "X1-C3" for player 1[0m [1;30m# navigate_to_waypoint_steps.go:308 -> *navigateToWaypointContext[0m
    [32mThen[0m [32mthe navigation should fail with error "cannot orbit while in transit"[0m         [1;30m# navigate_to_waypoint_steps.go:316 -> *navigateToWaypointContext[0m
=== RUN   TestFeatures/Ship_not_found#02

  [1;37mScenario:[0m Ship not found                                                                  [1;30m# features/application/navigate_to_waypoint.feature:43[0m
    [32mWhen[0m [32mI execute NavigateToWaypointCommand for ship "NONEXISTENT" to "X1-B2" for player 1[0m [1;30m# navigate_to_waypoint_steps.go:308 -> *navigateToWaypointContext[0m
    [32mThen[0m [32mthe navigation should fail with error "ship not found"[0m                             [1;30m# navigate_to_waypoint_steps.go:316 -> *navigateToWaypointContext[0m
=== RUN   TestFeatures/Navigate_with_custom_flight_mode

  [1;37mScenario:[0m Navigate with custom flight mode                                                                   [1;30m# features/application/navigate_to_waypoint.feature:47[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m                                       [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32ma waypoint "X1-B2" exists at coordinates (100, 50)[0m                                                     [1;30m# navigate_to_waypoint_steps.go:307 -> *navigateToWaypointContext[0m
    [32mWhen[0m [32mI execute NavigateToWaypointCommand for ship "SHIP-1" to "X1-B2" with flight mode "BURN" for player 1[0m [1;30m# navigate_to_waypoint_steps.go:309 -> *navigateToWaypointContext[0m
    [32mThen[0m [32mthe navigation should succeed with status "navigating"[0m                                                [1;30m# navigate_to_waypoint_steps.go:310 -> *navigateToWaypointContext[0m
    [32mAnd[0m [32mthe ship should be in transit to "X1-B2"[0m                                                               [1;30m# navigate_to_waypoint_steps.go:311 -> *navigateToWaypointContext[0m

[1;37mFeature:[0m Navigation Utilities
  As a navigation system
  I need helper functions to extract system symbols and calculate arrival times
  So that I can process waypoint symbols and time-based navigation
=== RUN   TestFeatures/Extract_system_symbol_from_valid_waypoint_symbol

  [1;37mBackground:[0m
    [33mGiven[0m [33mthe navigation utilities are available[0m

  [1;37mScenario:[0m Extract system symbol from valid waypoint symbol        [1;30m# features/application/navigation_utils.feature:9[0m
    [33mWhen[0m [33mI extract the system symbol from waypoint "X1-ABC123-AB12"[0m
    [33mThen[0m [33mthe extracted system symbol should be "X1-ABC123"[0m
=== RUN   TestFeatures/Extract_system_symbol_from_waypoint_with_multiple_hyphens

  [1;37mScenario:[0m Extract system symbol from waypoint with multiple hyphens [1;30m# features/application/navigation_utils.feature:13[0m
    [33mWhen[0m [33mI extract the system symbol from waypoint "X1-GZ7-F5"[0m
    [33mThen[0m [33mthe extracted system symbol should be "X1-GZ7"[0m
=== RUN   TestFeatures/Extract_system_symbol_from_waypoint_without_hyphen

  [1;37mScenario:[0m Extract system symbol from waypoint without hyphen [1;30m# features/application/navigation_utils.feature:17[0m
    [33mWhen[0m [33mI extract the system symbol from waypoint "NOSYSTEM"[0m
    [33mThen[0m [33mthe extracted system symbol should be "NOSYSTEM"[0m
=== RUN   TestFeatures/Extract_system_symbol_from_single_segment_waypoint

  [1;37mScenario:[0m Extract system symbol from single segment waypoint [1;30m# features/application/navigation_utils.feature:21[0m
    [33mWhen[0m [33mI extract the system symbol from waypoint "X1"[0m
    [33mThen[0m [33mthe extracted system symbol should be "X1"[0m
=== RUN   TestFeatures/Calculate_wait_time_for_future_arrival

  [1;37mScenario:[0m Calculate wait time for future arrival                   [1;30m# features/application/navigation_utils.feature:25[0m
    [33mGiven[0m [33mthe current time is "2024-01-01T12:00:00Z"[0m
    [33mWhen[0m [33mI calculate wait time for arrival at "2024-01-01T12:05:30Z"[0m
    [33mThen[0m [33mthe wait time should be 330 seconds[0m
=== RUN   TestFeatures/Calculate_wait_time_for_past_arrival_returns_zero

  [1;37mScenario:[0m Calculate wait time for past arrival returns zero        [1;30m# features/application/navigation_utils.feature:30[0m
    [33mGiven[0m [33mthe current time is "2024-01-01T12:00:00Z"[0m
    [33mWhen[0m [33mI calculate wait time for arrival at "2024-01-01T11:50:00Z"[0m
    [33mThen[0m [33mthe wait time should be 0 seconds[0m
=== RUN   TestFeatures/Calculate_wait_time_handles_Z_suffix

  [1;37mScenario:[0m Calculate wait time handles Z suffix                     [1;30m# features/application/navigation_utils.feature:35[0m
    [33mGiven[0m [33mthe current time is "2024-01-01T12:00:00Z"[0m
    [33mWhen[0m [33mI calculate wait time for arrival at "2024-01-01T12:03:00Z"[0m
    [33mThen[0m [33mthe wait time should be 180 seconds[0m
=== RUN   TestFeatures/Calculate_wait_time_handles_+00:00_suffix

  [1;37mScenario:[0m Calculate wait time handles +00:00 suffix                     [1;30m# features/application/navigation_utils.feature:40[0m
    [33mGiven[0m [33mthe current time is "2024-01-01T12:00:00Z"[0m
    [33mWhen[0m [33mI calculate wait time for arrival at "2024-01-01T12:02:00+00:00"[0m
    [33mThen[0m [33mthe wait time should be 120 seconds[0m
=== RUN   TestFeatures/Calculate_wait_time_for_invalid_time_string_returns_zero

  [1;37mScenario:[0m Calculate wait time for invalid time string returns zero [1;30m# features/application/navigation_utils.feature:45[0m
    [33mWhen[0m [33mI calculate wait time for arrival at "invalid-time-format"[0m
    [33mThen[0m [33mthe wait time should be 0 seconds[0m
    [33mAnd[0m [33ma warning should be logged about parsing failure[0m

[1;37mFeature:[0m Negotiate Contract Command
  As a SpaceTraders bot
  I want to negotiate contracts with ships
  So that I can obtain delivery missions and earn credits
=== RUN   TestFeatures/Negotiate_new_contract_successfully

  [1;37mBackground:[0m
    [32mGiven[0m [32ma player exists with agent "TEST-AGENT" and token "test-token-123"[0m              [1;30m# negotiate_contract_steps.go:347 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe player has player_id 1[0m                                                        [1;30m# negotiate_contract_steps.go:348 -> *negotiateContractContext[0m

  [1;37mScenario:[0m Negotiate new contract successfully                                           [1;30m# features/application/negotiate_contract.feature:10[0m
    [32mGiven[0m [32ma negotiate contract ship "SHIP-1" for player 1 at "X1-A1" with status "DOCKED"[0m [1;30m# negotiate_contract_steps.go:349 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe ship has no active contract[0m                                                   [1;30m# negotiate_contract_steps.go:351 -> *negotiateContractContext[0m
    [32mWhen[0m [32mI execute NegotiateContractCommand for ship "SHIP-1" and player 1[0m                [1;30m# negotiate_contract_steps.go:353 -> *negotiateContractContext[0m
    [32mThen[0m [32mthe negotiate contract command should succeed[0m                                    [1;30m# negotiate_contract_steps.go:354 -> *negotiateContractContext[0m
    [32mAnd[0m [32ma new contract should be negotiated[0m                                               [1;30m# negotiate_contract_steps.go:355 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe contract should belong to player 1[0m                                            [1;30m# negotiate_contract_steps.go:356 -> *negotiateContractContext[0m
    [31mAnd[0m [31mthe contract should not be accepted[0m                                               [1;30m# contract_steps.go:418 -> *contractContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/contract.(*Contract).Accepted
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/contract/contract.go:68
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*contractContext).theContractShouldNotBeAccepted
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/contract_steps.go:316
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mAnd[0m [36mthe contract should not be fulfilled[0m                                              [1;30m# contract_steps.go:419 -> *contractContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/contract.(*Contract).Accepted
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/contract/contract.go:68
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*contractContext).theContractShouldNotBeAccepted
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/contract_steps.go:316
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Resume_existing_contract_when_agent_already_has_one_(error_4511)

  [1;37mScenario:[0m Resume existing contract when agent already has one (error 4511)              [1;30m# features/application/negotiate_contract.feature:20[0m
    [32mGiven[0m [32ma negotiate contract ship "SHIP-1" for player 1 at "X1-A1" with status "DOCKED"[0m [1;30m# negotiate_contract_steps.go:349 -> *negotiateContractContext[0m
    [32mAnd[0m [32magent already has an active contract "CONTRACT-1" for player 1[0m                    [1;30m# negotiate_contract_steps.go:352 -> *negotiateContractContext[0m
    [32mWhen[0m [32mI execute NegotiateContractCommand for ship "SHIP-1" and player 1[0m                [1;30m# negotiate_contract_steps.go:353 -> *negotiateContractContext[0m
    [32mThen[0m [32mthe negotiate contract command should succeed[0m                                    [1;30m# negotiate_contract_steps.go:354 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe existing contract "CONTRACT-1" should be returned[0m                             [1;30m# negotiate_contract_steps.go:359 -> *negotiateContractContext[0m
    [32mAnd[0m [32mno new contract should be negotiated[0m                                              [1;30m# negotiate_contract_steps.go:360 -> *negotiateContractContext[0m
=== RUN   TestFeatures/Dock_ship_before_negotiating

  [1;37mScenario:[0m Dock ship before negotiating                                                    [1;30m# features/application/negotiate_contract.feature:28[0m
    [32mGiven[0m [32ma negotiate contract ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m [1;30m# negotiate_contract_steps.go:349 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe ship has no active contract[0m                                                     [1;30m# negotiate_contract_steps.go:351 -> *negotiateContractContext[0m
    [32mWhen[0m [32mI execute NegotiateContractCommand for ship "SHIP-1" and player 1[0m                  [1;30m# negotiate_contract_steps.go:353 -> *negotiateContractContext[0m
    [32mThen[0m [32mthe negotiate contract command should succeed[0m                                      [1;30m# negotiate_contract_steps.go:354 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe ship should be docked first[0m                                                     [1;30m# negotiate_contract_steps.go:361 -> *negotiateContractContext[0m
    [32mAnd[0m [32ma new contract should be negotiated[0m                                                 [1;30m# negotiate_contract_steps.go:355 -> *negotiateContractContext[0m
=== RUN   TestFeatures/Cannot_negotiate_contract_for_ship_that_does_not_exist

  [1;37mScenario:[0m Cannot negotiate contract for ship that does not exist              [1;30m# features/application/negotiate_contract.feature:36[0m
    [32mWhen[0m [32mI execute NegotiateContractCommand for ship "NONEXISTENT" and player 1[0m [1;30m# negotiate_contract_steps.go:353 -> *negotiateContractContext[0m
    [32mThen[0m [32mthe negotiate contract command should fail with error "ship not found"[0m [1;30m# negotiate_contract_steps.go:362 -> *negotiateContractContext[0m
=== RUN   TestFeatures/Cannot_negotiate_contract_with_ship_in_transit

  [1;37mScenario:[0m Cannot negotiate contract with ship in transit                                    [1;30m# features/application/negotiate_contract.feature:40[0m
    [32mGiven[0m [32ma negotiate contract ship "SHIP-1" for player 1 in transit to "X1-B2"[0m               [1;30m# negotiate_contract_steps.go:350 -> *negotiateContractContext[0m
    [32mWhen[0m [32mI execute NegotiateContractCommand for ship "SHIP-1" and player 1[0m                    [1;30m# negotiate_contract_steps.go:353 -> *negotiateContractContext[0m
    [32mThen[0m [32mthe negotiate contract command should fail with error "cannot dock while in transit"[0m [1;30m# negotiate_contract_steps.go:362 -> *negotiateContractContext[0m

[1;37mFeature:[0m Orbit Ship Command
  As a SpaceTraders bot
  I want to put ships into orbit
  So that I can navigate to other waypoints
=== RUN   TestFeatures/Orbit_ship_when_already_in_orbit

  [1;37mBackground:[0m
    [32mGiven[0m [32ma player exists with agent "TEST-AGENT" and token "test-token-123"[0m [1;30m# negotiate_contract_steps.go:347 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe player has player_id 1[0m                                           [1;30m# negotiate_contract_steps.go:348 -> *negotiateContractContext[0m

  [1;37mScenario:[0m Orbit ship when already in orbit                                 [1;30m# features/application/orbit_ship.feature:10[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m     [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute OrbitShipCommand for ship "SHIP-1" and player 1[0m
    [36mThen[0m [36mthe command should succeed with status "already_in_orbit"[0m           [1;30m# dock_ship_steps.go:219 -> *dockShipContext[0m
    [36mAnd[0m [36mthe ship should still be in orbit[0m                                    [1;30m# navigate_to_waypoint_steps.go:315 -> *navigateToWaypointContext[0m
=== RUN   TestFeatures/Orbit_ship_when_docked

  [1;37mScenario:[0m Orbit ship when docked                                           [1;30m# features/application/orbit_ship.feature:16[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "DOCKED"[0m       [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute OrbitShipCommand for ship "SHIP-1" and player 1[0m
    [36mThen[0m [36mthe command should succeed with status "in_orbit"[0m                   [1;30m# dock_ship_steps.go:219 -> *dockShipContext[0m
    [33mAnd[0m [33mthe ship should be in orbit at "X1-A1"[0m
=== RUN   TestFeatures/Cannot_orbit_ship_when_in_transit

  [1;37mScenario:[0m Cannot orbit ship when in transit                                [1;30m# features/application/orbit_ship.feature:22[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 in transit to "X1-B2"[0m                 [1;30m# navigate_to_waypoint_steps.go:304 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute OrbitShipCommand for ship "SHIP-1" and player 1[0m
    [36mThen[0m [36mthe command should fail with error "cannot orbit while in transit"[0m  [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Cannot_orbit_ship_that_does_not_exist

  [1;37mScenario:[0m Cannot orbit ship that does not exist                            [1;30m# features/application/orbit_ship.feature:27[0m
    [33mWhen[0m [33mI execute OrbitShipCommand for ship "NONEXISTENT" and player 1[0m
    [36mThen[0m [36mthe command should fail with error "ship not found"[0m                 [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Cannot_orbit_ship_belonging_to_different_player

  [1;37mScenario:[0m Cannot orbit ship belonging to different player                  [1;30m# features/application/orbit_ship.feature:31[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 2 at "X1-A1" with status "DOCKED"[0m       [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute OrbitShipCommand for ship "SHIP-1" and player 1[0m
    [36mThen[0m [36mthe command should fail with error "ship not found"[0m                 [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m

[1;37mFeature:[0m Purchase Cargo Command
  As a SpaceTraders bot
  I want to purchase cargo for my ships
  So that I can fulfill contracts and trade goods
=== RUN   TestFeatures/Purchase_cargo_successfully

  [1;37mBackground:[0m
    [32mGiven[0m [32ma player exists with agent "TEST-AGENT" and token "test-token-123"[0m [1;30m# negotiate_contract_steps.go:347 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe player has player_id 1[0m                                           [1;30m# negotiate_contract_steps.go:348 -> *negotiateContractContext[0m

  [1;37mScenario:[0m Purchase cargo successfully                                      [1;30m# features/application/purchase_cargo.feature:10[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 docked at marketplace "X1-A1"[0m         [1;30m# purchase_cargo_steps.go:219 -> *purchaseCargoContext[0m
    [32mAnd[0m [32mthe ship has 50 cargo space available[0m                                [1;30m# purchase_cargo_steps.go:221 -> *purchaseCargoContext[0m
    [32mWhen[0m [32mI purchase 30 units of "IRON_ORE" for ship "SHIP-1"[0m                 [1;30m# purchase_cargo_steps.go:222 -> *purchaseCargoContext[0m
    [32mThen[0m [32mthe purchase should succeed[0m                                         [1;30m# purchase_cargo_steps.go:224 -> *purchaseCargoContext[0m
    [32mAnd[0m [32m30 units should be added to cargo[0m                                    [1;30m# purchase_cargo_steps.go:225 -> *purchaseCargoContext[0m
    [32mAnd[0m [32mthe total cost should be greater than 0[0m                              [1;30m# purchase_cargo_steps.go:226 -> *purchaseCargoContext[0m
=== RUN   TestFeatures/Cannot_purchase_when_ship_not_docked

  [1;37mScenario:[0m Cannot purchase when ship not docked                                     [1;30m# features/application/purchase_cargo.feature:18[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 in orbit at "X1-A1"[0m                           [1;30m# purchase_cargo_steps.go:220 -> *purchaseCargoContext[0m
    [32mWhen[0m [32mI try to purchase 30 units of "IRON_ORE" for ship "SHIP-1"[0m                  [1;30m# purchase_cargo_steps.go:223 -> *purchaseCargoContext[0m
    [32mThen[0m [32mthe purchase should fail with error "ship must be docked to purchase cargo"[0m [1;30m# purchase_cargo_steps.go:227 -> *purchaseCargoContext[0m
=== RUN   TestFeatures/Cannot_purchase_more_than_cargo_space

  [1;37mScenario:[0m Cannot purchase more than cargo space                                         [1;30m# features/application/purchase_cargo.feature:23[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 docked at marketplace "X1-A1"[0m                      [1;30m# purchase_cargo_steps.go:219 -> *purchaseCargoContext[0m
    [32mAnd[0m [32mthe ship has 20 cargo space available[0m                                             [1;30m# purchase_cargo_steps.go:221 -> *purchaseCargoContext[0m
    [32mWhen[0m [32mI try to purchase 30 units of "IRON_ORE" for ship "SHIP-1"[0m                       [1;30m# purchase_cargo_steps.go:223 -> *purchaseCargoContext[0m
    [32mThen[0m [32mthe purchase should fail with error "insufficient cargo space: need 30, have 20"[0m [1;30m# purchase_cargo_steps.go:227 -> *purchaseCargoContext[0m
=== RUN   TestFeatures/Ship_not_found#03

  [1;37mScenario:[0m Ship not found                                                   [1;30m# features/application/purchase_cargo.feature:29[0m
    [32mWhen[0m [32mI try to purchase 30 units of "IRON_ORE" for ship "NON-EXISTENT"[0m    [1;30m# purchase_cargo_steps.go:223 -> *purchaseCargoContext[0m
    [32mThen[0m [32mthe purchase should fail with error "ship not found"[0m                [1;30m# purchase_cargo_steps.go:227 -> *purchaseCargoContext[0m

[1;37mFeature:[0m Refuel Ship Command
  As a SpaceTraders bot
  I want to refuel ships at fuel stations
  So that I can prepare for journeys and continue operations
=== RUN   TestFeatures/Refuel_ship_to_full_capacity_at_fuel_station

  [1;37mBackground:[0m
    [32mGiven[0m [32ma player exists with agent "TEST-AGENT" and token "test-token-123"[0m                        [1;30m# negotiate_contract_steps.go:347 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe player has player_id 1[0m                                                                  [1;30m# negotiate_contract_steps.go:348 -> *negotiateContractContext[0m

  [1;37mScenario:[0m Refuel ship to full capacity at fuel station                                            [1;30m# features/application/refuel_ship.feature:10[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at fuel station "X1-A1" with status "DOCKED" and fuel 50/100[0m [1;30m# refuel_ship_steps.go:343 -> *refuelShipContext[0m
    [32mWhen[0m [32mI execute RefuelShipCommand for ship "SHIP-1" and player 1 with nil units[0m                  [1;30m# refuel_ship_steps.go:345 -> *refuelShipContext[0m
    [32mThen[0m [32mthe refuel command should succeed[0m                                                          [1;30m# refuel_ship_steps.go:347 -> *refuelShipContext[0m
    [32mAnd[0m [32mthe ship should have fuel 100/100[0m                                                           [1;30m# refuel_ship_steps.go:348 -> *refuelShipContext[0m
    [32mAnd[0m [32m50 units of fuel should have been added[0m                                                     [1;30m# refuel_ship_steps.go:349 -> *refuelShipContext[0m
=== RUN   TestFeatures/Refuel_ship_with_specific_units_at_fuel_station

  [1;37mScenario:[0m Refuel ship with specific units at fuel station                                         [1;30m# features/application/refuel_ship.feature:17[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at fuel station "X1-A1" with status "DOCKED" and fuel 30/100[0m [1;30m# refuel_ship_steps.go:343 -> *refuelShipContext[0m
    [32mWhen[0m [32mI execute RefuelShipCommand for ship "SHIP-1" and player 1 with 20 units[0m                   [1;30m# refuel_ship_steps.go:346 -> *refuelShipContext[0m
    [32mThen[0m [32mthe refuel command should succeed[0m                                                          [1;30m# refuel_ship_steps.go:347 -> *refuelShipContext[0m
    [32mAnd[0m [32mthe ship should have fuel 50/100[0m                                                            [1;30m# refuel_ship_steps.go:348 -> *refuelShipContext[0m
    [32mAnd[0m [32m20 units of fuel should have been added[0m                                                     [1;30m# refuel_ship_steps.go:349 -> *refuelShipContext[0m
=== RUN   TestFeatures/Refuel_ship_that_already_has_full_fuel_(idempotent)

  [1;37mScenario:[0m Refuel ship that already has full fuel (idempotent)                                      [1;30m# features/application/refuel_ship.feature:24[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at fuel station "X1-A1" with status "DOCKED" and fuel 100/100[0m [1;30m# refuel_ship_steps.go:343 -> *refuelShipContext[0m
    [32mWhen[0m [32mI execute RefuelShipCommand for ship "SHIP-1" and player 1 with nil units[0m                   [1;30m# refuel_ship_steps.go:345 -> *refuelShipContext[0m
    [32mThen[0m [32mthe refuel command should succeed[0m                                                           [1;30m# refuel_ship_steps.go:347 -> *refuelShipContext[0m
    [32mAnd[0m [32mthe ship should have fuel 100/100[0m                                                            [1;30m# refuel_ship_steps.go:348 -> *refuelShipContext[0m
    [32mAnd[0m [32m0 units of fuel should have been added[0m                                                       [1;30m# refuel_ship_steps.go:349 -> *refuelShipContext[0m
=== RUN   TestFeatures/Auto-dock_ship_before_refueling_when_in_orbit

  [1;37mScenario:[0m Auto-dock ship before refueling when in orbit                                             [1;30m# features/application/refuel_ship.feature:31[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at fuel station "X1-A1" with status "IN_ORBIT" and fuel 50/100[0m [1;30m# refuel_ship_steps.go:343 -> *refuelShipContext[0m
    [32mWhen[0m [32mI execute RefuelShipCommand for ship "SHIP-1" and player 1 with nil units[0m                    [1;30m# refuel_ship_steps.go:345 -> *refuelShipContext[0m
    [32mThen[0m [32mthe refuel command should succeed[0m                                                            [1;30m# refuel_ship_steps.go:347 -> *refuelShipContext[0m
    [32mAnd[0m [32mthe ship should have fuel 100/100[0m                                                             [1;30m# refuel_ship_steps.go:348 -> *refuelShipContext[0m
    [32mAnd[0m [32m50 units of fuel should have been added[0m                                                       [1;30m# refuel_ship_steps.go:349 -> *refuelShipContext[0m
=== RUN   TestFeatures/Cannot_refuel_ship_not_at_fuel_station

  [1;37mScenario:[0m Cannot refuel ship not at fuel station                                                           [1;30m# features/application/refuel_ship.feature:38[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at waypoint "X1-B2" without fuel with status "DOCKED" and fuel 50/100[0m [1;30m# refuel_ship_steps.go:344 -> *refuelShipContext[0m
    [32mWhen[0m [32mI execute RefuelShipCommand for ship "SHIP-1" and player 1 with nil units[0m                           [1;30m# refuel_ship_steps.go:345 -> *refuelShipContext[0m
    [32mThen[0m [32mthe refuel command should fail with error "waypoint does not have fuel station"[0m                     [1;30m# refuel_ship_steps.go:350 -> *refuelShipContext[0m
=== RUN   TestFeatures/Cannot_refuel_ship_that_does_not_exist

  [1;37mScenario:[0m Cannot refuel ship that does not exist                                      [1;30m# features/application/refuel_ship.feature:43[0m
    [32mWhen[0m [32mI execute RefuelShipCommand for ship "NONEXISTENT" and player 1 with nil units[0m [1;30m# refuel_ship_steps.go:345 -> *refuelShipContext[0m
    [32mThen[0m [32mthe refuel command should fail with error "ship not found"[0m                     [1;30m# refuel_ship_steps.go:350 -> *refuelShipContext[0m

[1;37mFeature:[0m Route Executor Service
  As a SpaceTraders bot
  I want to execute routes by orchestrating atomic ship commands
  So that I can navigate efficiently using the routing engine's plan
=== RUN   TestFeatures/Execute_single-segment_route

  [1;37mBackground:[0m
    [32mGiven[0m [32ma player exists with agent "TEST-AGENT" and token "test-token-123"[0m                                       [1;30m# negotiate_contract_steps.go:347 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe player has player_id 1[0m                                                                                 [1;30m# negotiate_contract_steps.go:348 -> *negotiateContractContext[0m

  [1;37mScenario:[0m Execute single-segment route                                                                           [1;30m# features/application/route_executor.feature:10[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT" and fuel 100/100[0m                          [1;30m# route_executor_steps.go:677 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-A1" exists at coordinates (0, 0) with fuel station[0m                                            [1;30m# route_executor_steps.go:681 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-B2" exists at coordinates (10, 0) without fuel station[0m                                        [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32ma route exists for ship "SHIP-1" with 1 segment from "X1-A1" to "X1-B2" in "CRUISE" mode requiring 25 fuel[0m [1;30m# route_executor_steps.go:685 -> *routeExecutorContext[0m
    [32mWhen[0m [32mI execute the route for ship "SHIP-1" and player 1[0m                                                        [1;30m# route_executor_steps.go:691 -> *routeExecutorContext[0m
    [32mThen[0m [32mthe route execution should succeed[0m                                                                        [1;30m# route_executor_steps.go:694 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe ship should be at "X1-B2"[0m                                                                              [1;30m# route_executor_steps.go:696 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe route status should be "COMPLETED"[0m                                                                     [1;30m# route_executor_steps.go:697 -> *routeExecutorContext[0m
=== RUN   TestFeatures/Execute_multi-segment_route

  [1;37mScenario:[0m Execute multi-segment route                                                   [1;30m# features/application/route_executor.feature:20[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT" and fuel 100/100[0m [1;30m# route_executor_steps.go:677 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-A1" exists at coordinates (0, 0) without fuel station[0m                [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-B2" exists at coordinates (10, 0) without fuel station[0m               [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-C3" exists at coordinates (20, 0) without fuel station[0m               [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32ma route exists for ship "SHIP-1" with segments:[0m                                   [1;30m# route_executor_steps.go:688 -> *routeExecutorContext[0m
      | [36mfrom[0m  | [36mto[0m    | [36mdistance[0m | [36mfuel[0m | [36mmode[0m   | [36mrefuel[0m |
      | [36mX1-A1[0m | [36mX1-B2[0m | [36m10.0[0m     | [36m25[0m   | [36mCRUISE[0m | [36mfalse[0m  |
      | [36mX1-B2[0m | [36mX1-C3[0m | [36m10.0[0m     | [36m25[0m   | [36mCRUISE[0m | [36mfalse[0m  |
    [32mWhen[0m [32mI execute the route for ship "SHIP-1" and player 1[0m                               [1;30m# route_executor_steps.go:691 -> *routeExecutorContext[0m
    [32mThen[0m [32mthe route execution should succeed[0m                                               [1;30m# route_executor_steps.go:694 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe ship should be at "X1-C3"[0m                                                     [1;30m# route_executor_steps.go:696 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe route status should be "COMPLETED"[0m                                            [1;30m# route_executor_steps.go:697 -> *routeExecutorContext[0m
=== RUN   TestFeatures/Execute_route_with_refuel_before_departure

  [1;37mScenario:[0m Execute route with refuel before departure                                     [1;30m# features/application/route_executor.feature:34[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "DOCKED" and fuel 20/100[0m     [1;30m# route_executor_steps.go:677 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-A1" exists at coordinates (0, 0) with fuel station[0m                    [1;30m# route_executor_steps.go:681 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-B2" exists at coordinates (30, 0) without fuel station[0m                [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32ma route exists for ship "SHIP-1" requiring refuel before departure[0m                 [1;30m# route_executor_steps.go:686 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe route has 1 segment from "X1-A1" to "X1-B2" in "CRUISE" mode requiring 75 fuel[0m [1;30m# route_executor_steps.go:687 -> *routeExecutorContext[0m
2025/11/13 17:12:57 Refueling before departure at X1-A1
    [32mWhen[0m [32mI execute the route for ship "SHIP-1" and player 1[0m                                [1;30m# route_executor_steps.go:691 -> *routeExecutorContext[0m
    [32mThen[0m [32mthe route execution should succeed[0m                                                [1;30m# route_executor_steps.go:694 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe ship should be at "X1-B2"[0m                                                      [1;30m# route_executor_steps.go:696 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe ship should have consumed fuel for the journey[0m                                 [1;30m# route_executor_steps.go:698 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe route status should be "COMPLETED"[0m                                             [1;30m# route_executor_steps.go:697 -> *routeExecutorContext[0m
=== RUN   TestFeatures/Execute_route_with_mid-route_refueling

  [1;37mScenario:[0m Execute route with mid-route refueling                                        [1;30m# features/application/route_executor.feature:46[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT" and fuel 100/100[0m [1;30m# route_executor_steps.go:677 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-A1" exists at coordinates (0, 0) without fuel station[0m                [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-B2" exists at coordinates (30, 0) with fuel station[0m                  [1;30m# route_executor_steps.go:681 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-C3" exists at coordinates (60, 0) without fuel station[0m               [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32ma route exists for ship "SHIP-1" with segments:[0m                                   [1;30m# route_executor_steps.go:688 -> *routeExecutorContext[0m
      | [36mfrom[0m  | [36mto[0m    | [36mdistance[0m | [36mfuel[0m | [36mmode[0m   | [36mrefuel[0m |
      | [36mX1-A1[0m | [36mX1-B2[0m | [36m30.0[0m     | [36m75[0m   | [36mCRUISE[0m | [36mtrue[0m   |
      | [36mX1-B2[0m | [36mX1-C3[0m | [36m30.0[0m     | [36m75[0m   | [36mCRUISE[0m | [36mfalse[0m  |
2025/11/13 17:12:57 Planned refuel at X1-B2
    [32mWhen[0m [32mI execute the route for ship "SHIP-1" and player 1[0m                               [1;30m# route_executor_steps.go:691 -> *routeExecutorContext[0m
    [32mThen[0m [32mthe route execution should succeed[0m                                               [1;30m# route_executor_steps.go:694 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe ship should be at "X1-C3"[0m                                                     [1;30m# route_executor_steps.go:696 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe ship should have refueled at "X1-B2"[0m                                          [1;30m# route_executor_steps.go:699 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe route status should be "COMPLETED"[0m                                            [1;30m# route_executor_steps.go:697 -> *routeExecutorContext[0m
=== RUN   TestFeatures/Execute_route_with_opportunistic_refueling

  [1;37mScenario:[0m Execute route with opportunistic refueling                                   [1;30m# features/application/route_executor.feature:61[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT" and fuel 40/100[0m [1;30m# route_executor_steps.go:677 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-A1" exists at coordinates (0, 0) without fuel station[0m               [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-B2" exists at coordinates (10, 0) with fuel station[0m                 [1;30m# route_executor_steps.go:681 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-C3" exists at coordinates (20, 0) without fuel station[0m              [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32ma route exists for ship "SHIP-1" with segments:[0m                                  [1;30m# route_executor_steps.go:688 -> *routeExecutorContext[0m
      | [36mfrom[0m  | [36mto[0m    | [36mdistance[0m | [36mfuel[0m | [36mmode[0m   | [36mrefuel[0m |
      | [36mX1-A1[0m | [36mX1-B2[0m | [36m10.0[0m     | [36m25[0m   | [36mCRUISE[0m | [36mfalse[0m  |
      | [36mX1-B2[0m | [36mX1-C3[0m | [36m10.0[0m     | [36m25[0m   | [36mCRUISE[0m | [36mfalse[0m  |
2025/11/13 17:12:57 Opportunistic refuel at X1-B2
    [32mWhen[0m [32mI execute the route for ship "SHIP-1" and player 1[0m                              [1;30m# route_executor_steps.go:691 -> *routeExecutorContext[0m
    [32mThen[0m [32mthe route execution should succeed[0m                                              [1;30m# route_executor_steps.go:694 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe ship should be at "X1-C3"[0m                                                    [1;30m# route_executor_steps.go:696 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe ship should have opportunistically refueled at "X1-B2"[0m                       [1;30m# route_executor_steps.go:700 -> *routeExecutorContext[0m
    [32mAnd[0m [32mthe route status should be "COMPLETED"[0m                                           [1;30m# route_executor_steps.go:697 -> *routeExecutorContext[0m
=== RUN   TestFeatures/Execute_route_with_pre-departure_refuel_prevention

  [1;37mScenario:[0m Execute route with pre-departure refuel prevention                                                   [1;30m# features/application/route_executor.feature:76[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT" and fuel 50/100[0m                         [1;30m# route_executor_steps.go:677 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-A1" exists at coordinates (0, 0) with fuel station[0m                                          [1;30m# route_executor_steps.go:681 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-B2" exists at coordinates (40, 0) without fuel station[0m                                      [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32ma route exists for ship "SHIP-1" with 1 segment from "X1-A1" to "X1-B2" in "DRIFT" mode requiring 0 fuel[0m [1;30m# route_executor_steps.go:685 -> *routeExecutorContext[0m
2025/11/13 17:12:57 Pre-departure refuel: preventing DRIFT mode with low fuel at X1-A1
    [32mWhen[0m [32mI execute the route for ship "SHIP-1" and player 1[0m                                                      [1;30m# route_executor_steps.go:691 -> *routeExecutorContext[0m
    [32mThen[0m [32mthe route execution should succeed[0m                                                                      [1;30m# route_executor_steps.go:694 -> *routeExecutorContext[0m
    [31mAnd[0m [31mthe ship should have prevented DRIFT mode by refueling at "X1-A1"[0m                                        [1;30m# route_executor_steps.go:701 -> *routeExecutorContext[0m
    [1;31mship did not prevent DRIFT mode at X1-A1[0m
    [36mAnd[0m [36mthe ship should be at "X1-B2"[0m                                                                            [1;30m# route_executor_steps.go:696 -> *routeExecutorContext[0m
    [36mAnd[0m [36mthe route status should be "COMPLETED"[0m                                                                   [1;30m# route_executor_steps.go:697 -> *routeExecutorContext[0m
    suite.go:640: ship did not prevent DRIFT mode at X1-A1
=== RUN   TestFeatures/Handle_ship_already_in_transit_-_wait_for_arrival_first

  [1;37mScenario:[0m Handle ship already in transit - wait for arrival first                                                [1;30m# features/application/route_executor.feature:87[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 in transit to "X1-B2" arriving in 5 seconds[0m                                 [1;30m# route_executor_steps.go:678 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-B2" exists at coordinates (10, 0) without fuel station[0m                                        [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-C3" exists at coordinates (20, 0) without fuel station[0m                                        [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32ma route exists for ship "SHIP-1" with 1 segment from "X1-B2" to "X1-C3" in "CRUISE" mode requiring 25 fuel[0m [1;30m# route_executor_steps.go:685 -> *routeExecutorContext[0m
2025/11/13 17:12:57 Ship SHIP-1 is IN_TRANSIT from previous command, waiting for arrival...
2025/11/13 17:12:57 Ship arrived, status now: IN_ORBIT
    [32mWhen[0m [32mI execute the route for ship "SHIP-1" and player 1[0m                                                        [1;30m# route_executor_steps.go:691 -> *routeExecutorContext[0m
    [31mThen[0m [31mthe route executor should wait for current transit to complete[0m                                            [1;30m# route_executor_steps.go:702 -> *routeExecutorContext[0m
    [1;31mroute executor did not wait for transit to complete[0m
    [36mAnd[0m [36mthe route execution should succeed[0m                                                                         [1;30m# route_executor_steps.go:694 -> *routeExecutorContext[0m
    [36mAnd[0m [36mthe ship should be at "X1-C3"[0m                                                                              [1;30m# route_executor_steps.go:696 -> *routeExecutorContext[0m
    [36mAnd[0m [36mthe route status should be "COMPLETED"[0m                                                                     [1;30m# route_executor_steps.go:697 -> *routeExecutorContext[0m
    suite.go:640: route executor did not wait for transit to complete
=== RUN   TestFeatures/Handle_route_execution_failure_-_segment_navigation_fails

  [1;37mScenario:[0m Handle route execution failure - segment navigation fails                                               [1;30m# features/application/route_executor.feature:98[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT" and fuel 10/100[0m                            [1;30m# route_executor_steps.go:677 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-A1" exists at coordinates (0, 0) without fuel station[0m                                          [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [32mAnd[0m [32mwaypoint "X1-B2" exists at coordinates (50, 0) without fuel station[0m                                         [1;30m# route_executor_steps.go:682 -> *routeExecutorContext[0m
    [31mAnd[0m [31ma route exists for ship "SHIP-1" with 1 segment from "X1-A1" to "X1-B2" in "CRUISE" mode requiring 125 fuel[0m [1;30m# route_executor_steps.go:685 -> *routeExecutorContext[0m
    [1;31msegment requires 125 fuel but ship capacity is 100[0m
    [36mWhen[0m [36mI execute the route for ship "SHIP-1" and player 1[0m                                                         [1;30m# route_executor_steps.go:691 -> *routeExecutorContext[0m
    [36mThen[0m [36mthe route execution should fail[0m                                                                            [1;30m# route_executor_steps.go:695 -> *routeExecutorContext[0m
    [36mAnd[0m [36mthe route status should be "FAILED"[0m                                                                         [1;30m# route_executor_steps.go:697 -> *routeExecutorContext[0m
    [36mAnd[0m [36mthe error should indicate "insufficient fuel"[0m                                                               [1;30m# route_executor_steps.go:703 -> *routeExecutorContext[0m
    suite.go:640: segment requires 125 fuel but ship capacity is 100

[1;37mFeature:[0m Route Planner Service
  As a SpaceTraders bot
  I want to plan routes using the routing client
  So that ships can navigate efficiently with optimal fuel usage
=== RUN   TestFeatures/Plan_simple_single-segment_direct_route

  [1;37mBackground:[0m
    [32mGiven[0m [32ma ship "TEST-SHIP" exists with current fuel 100 and capacity 100[0m [1;30m# route_planner_steps.go:532 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe ship is at waypoint "X1-A1" with coordinates (0, 0)[0m            [1;30m# route_planner_steps.go:533 -> *routePlannerContext[0m
    [32mAnd[0m [32ma destination waypoint "X1-B2" exists at coordinates (100, 50)[0m     [1;30m# route_planner_steps.go:534 -> *routePlannerContext[0m

  [1;37mScenario:[0m Plan simple single-segment direct route                        [1;30m# features/application/route_planner.feature:11[0m
    [32mGiven[0m [32mthe routing client returns a single-step direct route[0m            [1;30m# route_planner_steps.go:537 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                      [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mthe planned route should be created successfully[0m                  [1;30m# route_planner_steps.go:552 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should have 1 segment[0m                            [1;30m# route_planner_steps.go:553 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should not require refuel before departure[0m       [1;30m# route_planner_steps.go:554 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should travel from "X1-A1" to "X1-B2"[0m            [1;30m# route_planner_steps.go:557 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should use flight mode "CRUISE"[0m                  [1;30m# route_planner_steps.go:558 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should not require refuel[0m                        [1;30m# route_planner_steps.go:559 -> *routePlannerContext[0m
=== RUN   TestFeatures/Plan_multi-segment_route_with_mid-route_refueling

  [1;37mScenario:[0m Plan multi-segment route with mid-route refueling                   [1;30m# features/application/route_planner.feature:21[0m
    [32mGiven[0m [32ma waypoint "X1-FUEL" exists at coordinates (50, 25) with fuel station[0m [1;30m# route_planner_steps.go:535 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe routing client returns a route with refueling stop[0m                  [1;30m# route_planner_steps.go:538 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                           [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mthe planned route should be created successfully[0m                       [1;30m# route_planner_steps.go:552 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should have 2 segments[0m                                [1;30m# route_planner_steps.go:553 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should not require refuel before departure[0m            [1;30m# route_planner_steps.go:554 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should travel from "X1-A1" to "X1-FUEL"[0m               [1;30m# route_planner_steps.go:557 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should require refuel[0m                                 [1;30m# route_planner_steps.go:560 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 2 should travel from "X1-FUEL" to "X1-B2"[0m               [1;30m# route_planner_steps.go:557 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 2 should not require refuel[0m                             [1;30m# route_planner_steps.go:559 -> *routePlannerContext[0m
=== RUN   TestFeatures/Plan_route_with_refuel_before_departure_flag

  [1;37mScenario:[0m Plan route with refuel before departure flag                   [1;30m# features/application/route_planner.feature:33[0m
    [32mGiven[0m [32mthe ship is at a fuel station waypoint "X1-A1"[0m                   [1;30m# route_planner_steps.go:536 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe routing client returns a route with refuel before departure[0m    [1;30m# route_planner_steps.go:539 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                      [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mthe planned route should be created successfully[0m                  [1;30m# route_planner_steps.go:552 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should require refuel before departure[0m           [1;30m# route_planner_steps.go:555 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should have at least 1 segment[0m                   [1;30m# route_planner_steps.go:556 -> *routePlannerContext[0m
=== RUN   TestFeatures/Plan_route_with_BURN_flight_mode

  [1;37mScenario:[0m Plan route with BURN flight mode                               [1;30m# features/application/route_planner.feature:41[0m
    [32mGiven[0m [32mthe routing client returns a route with BURN flight mode[0m         [1;30m# route_planner_steps.go:540 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                      [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mthe planned route should be created successfully[0m                  [1;30m# route_planner_steps.go:552 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should have 1 segment[0m                            [1;30m# route_planner_steps.go:553 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should use flight mode "BURN"[0m                    [1;30m# route_planner_steps.go:558 -> *routePlannerContext[0m
=== RUN   TestFeatures/Plan_route_with_DRIFT_flight_mode

  [1;37mScenario:[0m Plan route with DRIFT flight mode                              [1;30m# features/application/route_planner.feature:48[0m
    [32mGiven[0m [32mthe routing client returns a route with DRIFT flight mode[0m        [1;30m# route_planner_steps.go:540 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                      [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mthe planned route should be created successfully[0m                  [1;30m# route_planner_steps.go:552 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should have 1 segment[0m                            [1;30m# route_planner_steps.go:553 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should use flight mode "DRIFT"[0m                   [1;30m# route_planner_steps.go:558 -> *routePlannerContext[0m
=== RUN   TestFeatures/Plan_route_with_STEALTH_flight_mode

  [1;37mScenario:[0m Plan route with STEALTH flight mode                            [1;30m# features/application/route_planner.feature:55[0m
    [32mGiven[0m [32mthe routing client returns a route with STEALTH flight mode[0m      [1;30m# route_planner_steps.go:540 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                      [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mthe planned route should be created successfully[0m                  [1;30m# route_planner_steps.go:552 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should have 1 segment[0m                            [1;30m# route_planner_steps.go:553 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should use flight mode "STEALTH"[0m                 [1;30m# route_planner_steps.go:558 -> *routePlannerContext[0m
=== RUN   TestFeatures/Handle_empty_route_response_from_routing_client

  [1;37mScenario:[0m Handle empty route response from routing client                                         [1;30m# features/application/route_planner.feature:62[0m
    [32mGiven[0m [32mthe routing client returns an empty route[0m                                                 [1;30m# route_planner_steps.go:541 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                                               [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mroute planning should fail with error "no route found: routing engine returned empty plan"[0m [1;30m# route_planner_steps.go:561 -> *routePlannerContext[0m
=== RUN   TestFeatures/Handle_routing_client_error

  [1;37mScenario:[0m Handle routing client error                                                   [1;30m# features/application/route_planner.feature:67[0m
    [32mGiven[0m [32mthe routing client returns an error "connection timeout"[0m                        [1;30m# route_planner_steps.go:542 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                                     [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mroute planning should fail with error "routing client error: connection timeout"[0m [1;30m# route_planner_steps.go:561 -> *routePlannerContext[0m
=== RUN   TestFeatures/Convert_complex_multi-step_route_correctly

  [1;37mScenario:[0m Convert complex multi-step route correctly                            [1;30m# features/application/route_planner.feature:72[0m
    [32mGiven[0m [32ma waypoint "X1-FUEL-1" exists at coordinates (30, 20) with fuel station[0m [1;30m# route_planner_steps.go:535 -> *routePlannerContext[0m
    [32mAnd[0m [32ma waypoint "X1-FUEL-2" exists at coordinates (70, 40) with fuel station[0m   [1;30m# route_planner_steps.go:535 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe routing client returns a complex route with multiple refuel stops[0m     [1;30m# route_planner_steps.go:543 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                             [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mthe planned route should be created successfully[0m                         [1;30m# route_planner_steps.go:552 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route should have 3 segments[0m                                  [1;30m# route_planner_steps.go:553 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should travel from "X1-A1" to "X1-FUEL-1"[0m               [1;30m# route_planner_steps.go:557 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 1 should require refuel[0m                                   [1;30m# route_planner_steps.go:560 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 2 should travel from "X1-FUEL-1" to "X1-FUEL-2"[0m           [1;30m# route_planner_steps.go:557 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 2 should require refuel[0m                                   [1;30m# route_planner_steps.go:560 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 3 should travel from "X1-FUEL-2" to "X1-B2"[0m               [1;30m# route_planner_steps.go:557 -> *routePlannerContext[0m
    [32mAnd[0m [32mplanned segment 3 should not require refuel[0m                               [1;30m# route_planner_steps.go:559 -> *routePlannerContext[0m
=== RUN   TestFeatures/Handle_route_with_only_REFUEL_steps_(edge_case)

  [1;37mScenario:[0m Handle route with only REFUEL steps (edge case)                     [1;30m# features/application/route_planner.feature:86[0m
    [32mGiven[0m [32mthe routing client returns a route with only refuel steps[0m             [1;30m# route_planner_steps.go:544 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                           [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mroute planning should fail with error "route plan has no TRAVEL steps"[0m [1;30m# route_planner_steps.go:561 -> *routePlannerContext[0m
=== RUN   TestFeatures/Generate_correct_route_ID

  [1;37mScenario:[0m Generate correct route ID                                                [1;30m# features/application/route_planner.feature:91[0m
    [32mGiven[0m [32mthe routing client returns a single-step route with total time 120 seconds[0m [1;30m# route_planner_steps.go:545 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                                [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mthe planned route should be created successfully[0m                            [1;30m# route_planner_steps.go:552 -> *routePlannerContext[0m
    [32mAnd[0m [32mthe planned route ID should be "TEST-SHIP_120"[0m                               [1;30m# route_planner_steps.go:562 -> *routePlannerContext[0m
=== RUN   TestFeatures/Handle_missing_waypoint_in_cache_during_route_conversion

  [1;37mScenario:[0m Handle missing waypoint in cache during route conversion                    [1;30m# features/application/route_planner.feature:97[0m
    [32mGiven[0m [32mthe routing client returns a route to unknown waypoint "X1-UNKNOWN"[0m           [1;30m# route_planner_steps.go:546 -> *routePlannerContext[0m
    [32mWhen[0m [32mI plan a route from ship location to "X1-B2"[0m                                   [1;30m# route_planner_steps.go:549 -> *routePlannerContext[0m
    [32mThen[0m [32mroute planning should fail with error "waypoint X1-UNKNOWN not found in cache"[0m [1;30m# route_planner_steps.go:561 -> *routePlannerContext[0m

[1;37mFeature:[0m Get Market Data Query
  As a market analysis system
  I need to retrieve market data for a waypoint
  So that I can analyze trade opportunities
=== RUN   TestFeatures/Successfully_get_market_data

  [1;37mScenario:[0m Successfully get market data                                [1;30m# features/application/scouting/get_market_data.feature:6[0m
    [32mGiven[0m [32ma player with ID 1[0m                                            [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.025ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mmarket data exists for waypoint "X1-TEST-A1" with 2 trade goods[0m [1;30m# get_market_data_steps.go:31 -> *getMarketDataContext[0m
    [32mWhen[0m [32mI query market data for waypoint "X1-TEST-A1"[0m                  [1;30m# get_market_data_steps.go:34 -> *getMarketDataContext[0m
    [32mThen[0m [32mthe query should succeed[0m                                       [1;30m# get_market_data_steps.go:37 -> *getMarketDataContext[0m
    [32mAnd[0m [32mthe queried market should have 2 trade goods[0m                    [1;30m# get_market_data_steps.go:38 -> *getMarketDataContext[0m
=== RUN   TestFeatures/Query_non-existent_market_returns_nil

  [1;37mScenario:[0m Query non-existent market returns nil          [1;30m# features/application/scouting/get_market_data.feature:13[0m
    [32mGiven[0m [32ma player with ID 1[0m                               [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:97 [35;1mrecord not found
[0m[33m[0.016ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-NONEXISTENT" ORDER BY `market_data`.`id` LIMIT 1
    [32mWhen[0m [32mI query market data for waypoint "X1-NONEXISTENT"[0m [1;30m# get_market_data_steps.go:34 -> *getMarketDataContext[0m
    [32mThen[0m [32mthe query should succeed[0m                          [1;30m# get_market_data_steps.go:37 -> *getMarketDataContext[0m
    [32mAnd[0m [32mthe queried market should be nil[0m                   [1;30m# get_market_data_steps.go:39 -> *getMarketDataContext[0m

[1;37mFeature:[0m List Market Data Query
  As a market analysis system
  I need to retrieve all market data in a system
  So that I can analyze trade opportunities across multiple markets
=== RUN   TestFeatures/Successfully_list_all_markets_in_a_system

  [1;37mScenario:[0m Successfully list all markets in a system                                       [1;30m# features/application/scouting/list_market_data.feature:6[0m
    [32mGiven[0m [32ma player with ID 1[0m                                                                [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.042ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mmarket data exists for waypoint "X1-TEST-A1" in system "X1-TEST" with 2 trade goods[0m [1;30m# list_market_data_steps.go:32 -> *listMarketDataContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.014ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-TEST-B2" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mmarket data exists for waypoint "X1-TEST-B2" in system "X1-TEST" with 3 trade goods[0m [1;30m# list_market_data_steps.go:32 -> *listMarketDataContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.012ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-TEST-C3" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mmarket data exists for waypoint "X1-TEST-C3" in system "X1-TEST" with 1 trade goods[0m [1;30m# list_market_data_steps.go:32 -> *listMarketDataContext[0m
    [32mWhen[0m [32mI query all markets in system "X1-TEST" with max age 60 minutes[0m                    [1;30m# list_market_data_steps.go:36 -> *listMarketDataContext[0m
    [32mThen[0m [32mthe list query should succeed[0m                                                      [1;30m# list_market_data_steps.go:39 -> *listMarketDataContext[0m
    [32mAnd[0m [32mthe market list should contain 3 markets[0m                                            [1;30m# list_market_data_steps.go:40 -> *listMarketDataContext[0m
=== RUN   TestFeatures/Filter_markets_by_max_age

  [1;37mScenario:[0m Filter markets by max age                                                                               [1;30m# features/application/scouting/list_market_data.feature:15[0m
    [32mGiven[0m [32ma player with ID 1[0m                                                                                        [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.023ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mmarket data exists for waypoint "X1-TEST-A1" in system "X1-TEST" with 2 trade goods updated 10 minutes ago[0m  [1;30m# list_market_data_steps.go:33 -> *listMarketDataContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.014ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-TEST-B2" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mmarket data exists for waypoint "X1-TEST-B2" in system "X1-TEST" with 3 trade goods updated 120 minutes ago[0m [1;30m# list_market_data_steps.go:33 -> *listMarketDataContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.011ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-TEST-C3" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mmarket data exists for waypoint "X1-TEST-C3" in system "X1-TEST" with 1 trade goods updated 5 minutes ago[0m   [1;30m# list_market_data_steps.go:33 -> *listMarketDataContext[0m
    [32mWhen[0m [32mI query all markets in system "X1-TEST" with max age 60 minutes[0m                                            [1;30m# list_market_data_steps.go:36 -> *listMarketDataContext[0m
    [32mThen[0m [32mthe list query should succeed[0m                                                                              [1;30m# list_market_data_steps.go:39 -> *listMarketDataContext[0m
    [32mAnd[0m [32mthe market list should contain 2 markets[0m                                                                    [1;30m# list_market_data_steps.go:40 -> *listMarketDataContext[0m
    [32mAnd[0m [32mthe market list should include waypoint "X1-TEST-A1"[0m                                                        [1;30m# list_market_data_steps.go:42 -> *listMarketDataContext[0m
    [32mAnd[0m [32mthe market list should include waypoint "X1-TEST-C3"[0m                                                        [1;30m# list_market_data_steps.go:42 -> *listMarketDataContext[0m
    [32mAnd[0m [32mthe market list should not include waypoint "X1-TEST-B2"[0m                                                    [1;30m# list_market_data_steps.go:43 -> *listMarketDataContext[0m
=== RUN   TestFeatures/Query_empty_system_returns_empty_list

  [1;37mScenario:[0m Query empty system returns empty list                         [1;30m# features/application/scouting/list_market_data.feature:27[0m
    [32mGiven[0m [32ma player with ID 1[0m                                              [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m
    [32mWhen[0m [32mI query all markets in system "X1-EMPTY" with max age 60 minutes[0m [1;30m# list_market_data_steps.go:36 -> *listMarketDataContext[0m
    [32mThen[0m [32mthe list query should succeed[0m                                    [1;30m# list_market_data_steps.go:39 -> *listMarketDataContext[0m
    [32mAnd[0m [32mthe market list should be empty[0m                                   [1;30m# list_market_data_steps.go:41 -> *listMarketDataContext[0m
=== RUN   TestFeatures/Query_with_zero_max_age_returns_all_markets

  [1;37mScenario:[0m Query with zero max age returns all markets                                                              [1;30m# features/application/scouting/list_market_data.feature:33[0m
    [32mGiven[0m [32ma player with ID 1[0m                                                                                         [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.020ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mmarket data exists for waypoint "X1-TEST-A1" in system "X1-TEST" with 2 trade goods updated 500 minutes ago[0m  [1;30m# list_market_data_steps.go:33 -> *listMarketDataContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.012ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 0 AND waypoint_symbol = "X1-TEST-B2" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mmarket data exists for waypoint "X1-TEST-B2" in system "X1-TEST" with 3 trade goods updated 1000 minutes ago[0m [1;30m# list_market_data_steps.go:33 -> *listMarketDataContext[0m
    [32mWhen[0m [32mI query all markets in system "X1-TEST" with max age 0 minutes[0m                                              [1;30m# list_market_data_steps.go:36 -> *listMarketDataContext[0m
    [32mThen[0m [32mthe list query should succeed[0m                                                                               [1;30m# list_market_data_steps.go:39 -> *listMarketDataContext[0m
    [32mAnd[0m [32mthe market list should contain 2 markets[0m                                                                     [1;30m# list_market_data_steps.go:40 -> *listMarketDataContext[0m

[1;37mFeature:[0m Scout Markets Command - Fleet Orchestration
  Deploy multiple ships to scout markets using VRP optimization.
  This command orchestrates fleet distribution across markets, reuses existing containers,
  and creates new containers only when needed (idempotent design).
=== RUN   TestFeatures/Deploy_single_ship_to_scout_all_markets

  [1;37mBackground:[0m
    [32mGiven[0m [32ma scout markets test database[0m                                                                             [1;30m# scout_markets_steps.go:381 -> *scoutMarketsContext[0m
    [32mAnd[0m [32ma scout markets player with ID 1 and agent "TESTBOT"[0m                                                        [1;30m# scout_markets_steps.go:382 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mthe scout markets player has token "test-token-123"[0m                                                         [1;30m# scout_markets_steps.go:383 -> *scoutMarketsContext[0m

  [1;37mScenario:[0m Deploy single ship to scout all markets                                                                 [1;30m# features/application/scouting/scout_markets.feature:11[0m
    [32mGiven[0m [32mI have a ship "SCOUT-1" at waypoint "X1-TEST-A1" in system "X1-TEST"[0m                                      [1;30m# scout_markets_steps.go:386 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mthe system "X1-TEST" has markets at "X1-TEST-A1,X1-TEST-B2"[0m                                                 [1;30m# scout_markets_steps.go:387 -> *scoutMarketsContext[0m
    [32mWhen[0m [32mI execute ScoutMarketsCommand with ships "SCOUT-1" and markets "X1-TEST-A1,X1-TEST-B2" in system "X1-TEST"[0m [1;30m# scout_markets_steps.go:392 -> *scoutMarketsContext[0m
    [32mThen[0m [32mthe scout markets command should succeed[0m                                                                   [1;30m# scout_markets_steps.go:395 -> *scoutMarketsContext[0m
    [32mAnd[0m [32m1 scout container should be created[0m                                                                         [1;30m# scout_markets_steps.go:396 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mship "SCOUT-1" should be assigned 2 markets[0m                                                                 [1;30m# scout_markets_steps.go:399 -> *scoutMarketsContext[0m
=== RUN   TestFeatures/Deploy_multiple_ships_with_VRP_optimization

  [1;37mScenario:[0m Deploy multiple ships with VRP optimization                                                                                           [1;30m# features/application/scouting/scout_markets.feature:19[0m
    [32mGiven[0m [32mI have a ship "SCOUT-1" at waypoint "X1-TEST-A1" in system "X1-TEST"[0m                                                                    [1;30m# scout_markets_steps.go:386 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mI have a ship "SCOUT-2" at waypoint "X1-TEST-B2" in system "X1-TEST"[0m                                                                      [1;30m# scout_markets_steps.go:386 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mthe system "X1-TEST" has markets at "X1-TEST-A1,X1-TEST-B2,X1-TEST-C3,X1-TEST-D4"[0m                                                         [1;30m# scout_markets_steps.go:387 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mthe routing client will partition markets using VRP[0m                                                                                       [1;30m# scout_markets_steps.go:389 -> *scoutMarketsContext[0m
    [32mWhen[0m [32mI execute ScoutMarketsCommand with ships "SCOUT-1,SCOUT-2" and markets "X1-TEST-A1,X1-TEST-B2,X1-TEST-C3,X1-TEST-D4" in system "X1-TEST"[0m [1;30m# scout_markets_steps.go:392 -> *scoutMarketsContext[0m
    [32mThen[0m [32mthe scout markets command should succeed[0m                                                                                                 [1;30m# scout_markets_steps.go:395 -> *scoutMarketsContext[0m
    [32mAnd[0m [32m2 scout containers should be created[0m                                                                                                      [1;30m# scout_markets_steps.go:396 -> *scoutMarketsContext[0m
Ship SCOUT-1 assigned 2 markets
Ship SCOUT-2 assigned 2 markets
    [32mAnd[0m [32mmarkets should be distributed across ships[0m                                                                                                [1;30m# scout_markets_steps.go:400 -> *scoutMarketsContext[0m
=== RUN   TestFeatures/Idempotent_container_reuse_-_ship_already_has_active_container

  [1;37mScenario:[0m Idempotent container reuse - ship already has active container                                          [1;30m# features/application/scouting/scout_markets.feature:29[0m
    [32mGiven[0m [32mI have a ship "SCOUT-1" at waypoint "X1-TEST-A1" in system "X1-TEST"[0m                                      [1;30m# scout_markets_steps.go:386 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mship "SCOUT-1" has an active container "scout-tour-scout-1-abc12345"[0m                                        [1;30m# scout_markets_steps.go:388 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mthe system "X1-TEST" has markets at "X1-TEST-A1,X1-TEST-B2"[0m                                                 [1;30m# scout_markets_steps.go:387 -> *scoutMarketsContext[0m
    [32mWhen[0m [32mI execute ScoutMarketsCommand with ships "SCOUT-1" and markets "X1-TEST-A1,X1-TEST-B2" in system "X1-TEST"[0m [1;30m# scout_markets_steps.go:392 -> *scoutMarketsContext[0m
    [32mThen[0m [32mthe scout markets command should succeed[0m                                                                   [1;30m# scout_markets_steps.go:395 -> *scoutMarketsContext[0m
    [32mAnd[0m [32m0 new scout containers should be created[0m                                                                    [1;30m# scout_markets_steps.go:397 -> *scoutMarketsContext[0m
    [32mAnd[0m [32m1 scout container should be reused[0m                                                                          [1;30m# scout_markets_steps.go:398 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mthe reused container is "scout-tour-scout-1-abc12345"[0m                                                       [1;30m# scout_markets_steps.go:401 -> *scoutMarketsContext[0m
=== RUN   TestFeatures/Partial_container_reuse_-_some_ships_have_containers

  [1;37mScenario:[0m Partial container reuse - some ships have containers                                                                       [1;30m# features/application/scouting/scout_markets.feature:39[0m
    [32mGiven[0m [32mI have a ship "SCOUT-1" at waypoint "X1-TEST-A1" in system "X1-TEST"[0m                                                         [1;30m# scout_markets_steps.go:386 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mI have a ship "SCOUT-2" at waypoint "X1-TEST-B2" in system "X1-TEST"[0m                                                           [1;30m# scout_markets_steps.go:386 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mship "SCOUT-1" has an active container "scout-tour-scout-1-abc12345"[0m                                                           [1;30m# scout_markets_steps.go:388 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mthe system "X1-TEST" has markets at "X1-TEST-A1,X1-TEST-B2,X1-TEST-C3"[0m                                                         [1;30m# scout_markets_steps.go:387 -> *scoutMarketsContext[0m
    [32mWhen[0m [32mI execute ScoutMarketsCommand with ships "SCOUT-1,SCOUT-2" and markets "X1-TEST-A1,X1-TEST-B2,X1-TEST-C3" in system "X1-TEST"[0m [1;30m# scout_markets_steps.go:392 -> *scoutMarketsContext[0m
    [32mThen[0m [32mthe scout markets command should succeed[0m                                                                                      [1;30m# scout_markets_steps.go:395 -> *scoutMarketsContext[0m
    [32mAnd[0m [32m1 new scout container should be created[0m                                                                                        [1;30m# scout_markets_steps.go:397 -> *scoutMarketsContext[0m
    [32mAnd[0m [32m1 scout container should be reused[0m                                                                                             [1;30m# scout_markets_steps.go:398 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mship "SCOUT-2" should have a new scout container[0m                                                                               [1;30m# scout_markets_steps.go:402 -> *scoutMarketsContext[0m
=== RUN   TestFeatures/Early_return_when_all_ships_already_have_containers

  [1;37mScenario:[0m Early return when all ships already have containers                                                             [1;30m# features/application/scouting/scout_markets.feature:50[0m
    [32mGiven[0m [32mI have a ship "SCOUT-1" at waypoint "X1-TEST-A1" in system "X1-TEST"[0m                                              [1;30m# scout_markets_steps.go:386 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mI have a ship "SCOUT-2" at waypoint "X1-TEST-B2" in system "X1-TEST"[0m                                                [1;30m# scout_markets_steps.go:386 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mship "SCOUT-1" has an active container "scout-tour-scout-1-abc12345"[0m                                                [1;30m# scout_markets_steps.go:388 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mship "SCOUT-2" has an active container "scout-tour-scout-2-def67890"[0m                                                [1;30m# scout_markets_steps.go:388 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mthe system "X1-TEST" has markets at "X1-TEST-A1,X1-TEST-B2"[0m                                                         [1;30m# scout_markets_steps.go:387 -> *scoutMarketsContext[0m
    [32mWhen[0m [32mI execute ScoutMarketsCommand with ships "SCOUT-1,SCOUT-2" and markets "X1-TEST-A1,X1-TEST-B2" in system "X1-TEST"[0m [1;30m# scout_markets_steps.go:392 -> *scoutMarketsContext[0m
    [32mThen[0m [32mthe scout markets command should succeed[0m                                                                           [1;30m# scout_markets_steps.go:395 -> *scoutMarketsContext[0m
    [32mAnd[0m [32m0 new scout containers should be created[0m                                                                            [1;30m# scout_markets_steps.go:397 -> *scoutMarketsContext[0m
    [32mAnd[0m [32m2 scout containers should be reused[0m                                                                                 [1;30m# scout_markets_steps.go:398 -> *scoutMarketsContext[0m
    [32mAnd[0m [32mall requested ships have containers[0m                                                                                 [1;30m# scout_markets_steps.go:403 -> *scoutMarketsContext[0m

[1;37mFeature:[0m Scout Tour Command
  As a market scouting system
  I need to execute market scouting tours with a single ship
  So that I can continuously update market price data
=== RUN   TestFeatures/Scout_a_single-market_tour_(stationary_scout)

  [1;37mBackground:[0m
    [32mGiven[0m [32ma test database[0m                                                                      [1;30m# scout_tour_steps.go:370 -> *scoutTourContext[0m
    [32mAnd[0m [32ma registered player with ID 1 and agent "TEST-AGENT"[0m                                   [1;30m# scout_tour_steps.go:371 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe player has token "test-token-123"[0m                                                  [1;30m# scout_tour_steps.go:372 -> *scoutTourContext[0m

  [1;37mScenario:[0m Scout a single-market tour (stationary scout)                                      [1;30m# features/application/scouting/scout_tour.feature:11[0m
    [32mGiven[0m [32mthe player has a ship "SCOUT-1" at waypoint "X1-TEST-A1" with status "DOCKED"[0m        [1;30m# scout_tour_steps.go:375 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe system "X1-TEST" has waypoint "X1-TEST-A1" with coordinates 0, 0[0m                   [1;30m# scout_tour_steps.go:378 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe API will return market data for "X1-TEST-A1" with 2 trade goods[0m                    [1;30m# scout_tour_steps.go:382 -> *scoutTourContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.021ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mWhen[0m [32mI execute ScoutTourCommand with ship "SCOUT-1", markets "X1-TEST-A1", and 1 iteration[0m [1;30m# scout_tour_steps.go:386 -> *scoutTourContext[0m
    [32mThen[0m [32mthe scout tour command should succeed[0m                                                 [1;30m# scout_tour_steps.go:389 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe scout ship should be at "X1-TEST-A1"[0m                                               [1;30m# scout_tour_steps.go:390 -> *scoutTourContext[0m
    [32mAnd[0m [32mmarket data should be persisted for waypoint "X1-TEST-A1"[0m                              [1;30m# scout_tour_steps.go:391 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe persisted market should have 2 trade goods[0m                                         [1;30m# scout_tour_steps.go:392 -> *scoutTourContext[0m
=== RUN   TestFeatures/Scout_a_multi-market_tour

  [1;37mScenario:[0m Scout a multi-market tour                                                                                [1;30m# features/application/scouting/scout_tour.feature:21[0m
    [32mGiven[0m [32mthe player has a ship "SCOUT-1" at waypoint "X1-TEST-A1" with status "DOCKED"[0m                              [1;30m# scout_tour_steps.go:375 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe system "X1-TEST" has the following waypoints:[0m                                                            [1;30m# scout_tour_steps.go:379 -> *scoutTourContext[0m
      | [36mSymbol[0m     | [36mX[0m  | [36mY[0m |
      | [36mX1-TEST-A1[0m | [36m0[0m  | [36m0[0m |
      | [36mX1-TEST-B2[0m | [36m5[0m  | [36m5[0m |
      | [36mX1-TEST-C3[0m | [36m10[0m | [36m0[0m |
    [32mAnd[0m [32mthe API will return market data for all waypoints[0m                                                            [1;30m# scout_tour_steps.go:383 -> *scoutTourContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.015ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.015ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-B2" ORDER BY `market_data`.`id` LIMIT 1

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.019ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-C3" ORDER BY `market_data`.`id` LIMIT 1
    [32mWhen[0m [32mI execute ScoutTourCommand with ship "SCOUT-1", markets "X1-TEST-A1,X1-TEST-B2,X1-TEST-C3", and 1 iteration[0m [1;30m# scout_tour_steps.go:386 -> *scoutTourContext[0m
    [32mThen[0m [32mthe scout tour command should succeed[0m                                                                       [1;30m# scout_tour_steps.go:389 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe scout ship should have visited 3 markets[0m                                                                 [1;30m# scout_tour_steps.go:393 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe scout ship should be at "X1-TEST-A1"[0m                                                                     [1;30m# scout_tour_steps.go:390 -> *scoutTourContext[0m
    [32mAnd[0m [32mmarket data should be persisted for all 3 waypoints[0m                                                          [1;30m# scout_tour_steps.go:394 -> *scoutTourContext[0m
=== RUN   TestFeatures/Idempotent_tour_rotation_-_resume_from_current_position

  [1;37mScenario:[0m Idempotent tour rotation - resume from current position                                                  [1;30m# features/application/scouting/scout_tour.feature:35[0m
    [32mGiven[0m [32mthe player has a ship "SCOUT-1" at waypoint "X1-TEST-B2" with status "DOCKED"[0m                              [1;30m# scout_tour_steps.go:375 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe system "X1-TEST" has the following waypoints:[0m                                                            [1;30m# scout_tour_steps.go:379 -> *scoutTourContext[0m
      | [36mSymbol[0m     | [36mX[0m  | [36mY[0m |
      | [36mX1-TEST-A1[0m | [36m0[0m  | [36m0[0m |
      | [36mX1-TEST-B2[0m | [36m5[0m  | [36m5[0m |
      | [36mX1-TEST-C3[0m | [36m10[0m | [36m0[0m |
    [32mAnd[0m [32mthe API will return market data for all waypoints[0m                                                            [1;30m# scout_tour_steps.go:383 -> *scoutTourContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.023ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-B2" ORDER BY `market_data`.`id` LIMIT 1

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.018ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-C3" ORDER BY `market_data`.`id` LIMIT 1

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.013ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mWhen[0m [32mI execute ScoutTourCommand with ship "SCOUT-1", markets "X1-TEST-A1,X1-TEST-B2,X1-TEST-C3", and 1 iteration[0m [1;30m# scout_tour_steps.go:386 -> *scoutTourContext[0m
    [32mThen[0m [32mthe scout tour command should succeed[0m                                                                       [1;30m# scout_tour_steps.go:389 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe tour should start from "X1-TEST-B2"[0m                                                                      [1;30m# scout_tour_steps.go:395 -> *scoutTourContext[0m
    [32mAnd[0m [32mthe visit order should be "X1-TEST-B2,X1-TEST-C3,X1-TEST-A1"[0m                                                 [1;30m# scout_tour_steps.go:396 -> *scoutTourContext[0m

[1;37mFeature:[0m Set Flight Mode Command
  As a SpaceTraders bot
  I want to change ship flight modes
  So that I can optimize travel time and fuel consumption
=== RUN   TestFeatures/Successfully_set_flight_mode_to_CRUISE

  [1;37mBackground:[0m
    [32mGiven[0m [32ma player exists with agent "TEST-AGENT" and token "test-token-123"[0m              [1;30m# negotiate_contract_steps.go:347 -> *negotiateContractContext[0m
    [32mAnd[0m [32mthe player has player_id 1[0m                                                        [1;30m# negotiate_contract_steps.go:348 -> *negotiateContractContext[0m

  [1;37mScenario:[0m Successfully set flight mode to CRUISE                                        [1;30m# features/application/set_flight_mode.feature:10[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m                  [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute SetFlightModeCommand for ship "SHIP-1" and player 1 with mode "CRUISE"[0m
    [36mThen[0m [36mthe command should succeed with status "success"[0m                                 [1;30m# dock_ship_steps.go:219 -> *dockShipContext[0m
    [33mAnd[0m [33mthe current flight mode should be "CRUISE"[0m
=== RUN   TestFeatures/Successfully_set_flight_mode_to_DRIFT

  [1;37mScenario:[0m Successfully set flight mode to DRIFT                                        [1;30m# features/application/set_flight_mode.feature:16[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m                 [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute SetFlightModeCommand for ship "SHIP-1" and player 1 with mode "DRIFT"[0m
    [36mThen[0m [36mthe command should succeed with status "success"[0m                                [1;30m# dock_ship_steps.go:219 -> *dockShipContext[0m
    [33mAnd[0m [33mthe current flight mode should be "DRIFT"[0m
=== RUN   TestFeatures/Successfully_set_flight_mode_to_BURN

  [1;37mScenario:[0m Successfully set flight mode to BURN                                        [1;30m# features/application/set_flight_mode.feature:22[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "DOCKED"[0m                  [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute SetFlightModeCommand for ship "SHIP-1" and player 1 with mode "BURN"[0m
    [36mThen[0m [36mthe command should succeed with status "success"[0m                               [1;30m# dock_ship_steps.go:219 -> *dockShipContext[0m
    [33mAnd[0m [33mthe current flight mode should be "BURN"[0m
=== RUN   TestFeatures/Successfully_set_flight_mode_to_STEALTH

  [1;37mScenario:[0m Successfully set flight mode to STEALTH                                        [1;30m# features/application/set_flight_mode.feature:28[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m                   [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute SetFlightModeCommand for ship "SHIP-1" and player 1 with mode "STEALTH"[0m
    [36mThen[0m [36mthe command should succeed with status "success"[0m                                  [1;30m# dock_ship_steps.go:219 -> *dockShipContext[0m
    [33mAnd[0m [33mthe current flight mode should be "STEALTH"[0m
=== RUN   TestFeatures/Ship_not_found#04

  [1;37mScenario:[0m Ship not found                                                                     [1;30m# features/application/set_flight_mode.feature:34[0m
    [33mWhen[0m [33mI execute SetFlightModeCommand for ship "NONEXISTENT" and player 1 with mode "CRUISE"[0m
    [36mThen[0m [36mthe command should fail with error "ship not found"[0m                                   [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Invalid_flight_mode

  [1;37mScenario:[0m Invalid flight mode                                                            [1;30m# features/application/set_flight_mode.feature:38[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 1 at "X1-A1" with status "IN_ORBIT"[0m                   [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute SetFlightModeCommand for ship "SHIP-1" and player 1 with mode "INVALID"[0m
    [36mThen[0m [36mthe command should fail with error "invalid flight mode: INVALID"[0m                 [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m
=== RUN   TestFeatures/Cannot_set_flight_mode_for_ship_belonging_to_different_player

  [1;37mScenario:[0m Cannot set flight mode for ship belonging to different player                 [1;30m# features/application/set_flight_mode.feature:43[0m
    [32mGiven[0m [32ma ship "SHIP-1" for player 2 at "X1-A1" with status "IN_ORBIT"[0m                  [1;30m# navigate_to_waypoint_steps.go:303 -> *navigateToWaypointContext[0m
    [33mWhen[0m [33mI execute SetFlightModeCommand for ship "SHIP-1" and player 1 with mode "CRUISE"[0m
    [36mThen[0m [36mthe command should fail with error "ship not found"[0m                              [1;30m# dock_ship_steps.go:222 -> *dockShipContext[0m

[1;37mFeature:[0m Market Repository Persistence
  As a persistence layer
  I need to store and retrieve market data from the database
  So that the application can cache market information efficiently
=== RUN   TestFeatures/Upsert_market_data_for_the_first_time

  [1;37mBackground:[0m
    [32mGiven[0m [32ma clean test database[0m                           [1;30m# market_repository_steps.go:40 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32ma market repository instance[0m                      [1;30m# market_repository_steps.go:41 -> *MarketRepositoryContext[0m

  [1;37mScenario:[0m Upsert market data for the first time         [1;30m# features/adapters/persistence/market_repository.feature:10[0m
    [32mGiven[0m [32ma player with ID 1[0m                              [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32ma waypoint "X1-TEST-A1"[0m                           [1;30m# market_repository_steps.go:45 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mmarket data with 3 trade goods:[0m                   [1;30m# market_repository_steps.go:46 -> *MarketRepositoryContext[0m
      | [36mSymbol[0m     | [36mSupply[0m   | [36mActivity[0m | [36mPurchasePrice[0m | [36mSellPrice[0m | [36mTradeVolume[0m |
      | [36mIRON_ORE[0m   | [36mMODERATE[0m | [36mSTRONG[0m   | [36m100[0m           | [36m150[0m       | [36m500[0m         |
      | [36mCOPPER_ORE[0m | [36mHIGH[0m     | [36mGROWING[0m  | [36m80[0m            | [36m120[0m       | [36m300[0m         |
      | [36mALUMINUM[0m   | [36mLIMITED[0m  | [36mWEAK[0m     | [36m200[0m           | [36m250[0m       | [36m100[0m         |

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.027ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mWhen[0m [32mI upsert the market data[0m                         [1;30m# market_repository_steps.go:54 -> *MarketRepositoryContext[0m
    [32mThen[0m [32mthe market data should be persisted successfully[0m [1;30m# market_repository_steps.go:61 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe database should contain 1 market record[0m       [1;30m# market_repository_steps.go:62 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe database should contain 3 trade goods records[0m [1;30m# market_repository_steps.go:63 -> *MarketRepositoryContext[0m
=== RUN   TestFeatures/Upsert_market_data_updates_existing_record

  [1;37mScenario:[0m Upsert market data updates existing record      [1;30m# features/adapters/persistence/market_repository.feature:23[0m
    [32mGiven[0m [32ma player with ID 1[0m                                [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32ma waypoint "X1-TEST-A1"[0m                             [1;30m# market_repository_steps.go:45 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mexisting market data with 2 trade goods:[0m            [1;30m# market_repository_steps.go:48 -> *MarketRepositoryContext[0m
      | [36mSymbol[0m     | [36mSupply[0m   | [36mActivity[0m | [36mPurchasePrice[0m | [36mSellPrice[0m | [36mTradeVolume[0m |
      | [36mIRON_ORE[0m   | [36mMODERATE[0m | [36mSTRONG[0m   | [36m100[0m           | [36m150[0m       | [36m500[0m         |
      | [36mCOPPER_ORE[0m | [36mHIGH[0m     | [36mGROWING[0m  | [36m80[0m            | [36m120[0m       | [36m300[0m         |

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.021ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mthe market data is already persisted[0m                [1;30m# market_repository_steps.go:49 -> *MarketRepositoryContext[0m
    [32mWhen[0m [32mI upsert new market data with 3 trade goods:[0m       [1;30m# market_repository_steps.go:55 -> *MarketRepositoryContext[0m
      | [36mSymbol[0m   | [36mSupply[0m  | [36mActivity[0m | [36mPurchasePrice[0m | [36mSellPrice[0m | [36mTradeVolume[0m |
      | [36mIRON_ORE[0m | [36mHIGH[0m    | [36mSTRONG[0m   | [36m110[0m           | [36m160[0m       | [36m600[0m         |
      | [36mGOLD[0m     | [36mSCARCE[0m  | [36mWEAK[0m     | [36m500[0m           | [36m700[0m       | [36m50[0m          |
      | [36mSILVER[0m   | [36mLIMITED[0m | [36mGROWING[0m  | [36m300[0m           | [36m400[0m       | [36m150[0m         |
    [32mThen[0m [32mthe market data should be persisted successfully[0m   [1;30m# market_repository_steps.go:61 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe database should contain 1 market record[0m         [1;30m# market_repository_steps.go:62 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe database should contain 3 trade goods records[0m   [1;30m# market_repository_steps.go:63 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe trade goods should be updated to the new values[0m [1;30m# market_repository_steps.go:64 -> *MarketRepositoryContext[0m
=== RUN   TestFeatures/Get_market_data_by_waypoint

  [1;37mScenario:[0m Get market data by waypoint                                          [1;30m# features/adapters/persistence/market_repository.feature:41[0m
    [32mGiven[0m [32ma player with ID 1[0m                                                     [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32ma waypoint "X1-TEST-A1"[0m                                                  [1;30m# market_repository_steps.go:45 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mexisting market data with 2 trade goods:[0m                                 [1;30m# market_repository_steps.go:48 -> *MarketRepositoryContext[0m
      | [36mSymbol[0m     | [36mSupply[0m   | [36mActivity[0m | [36mPurchasePrice[0m | [36mSellPrice[0m | [36mTradeVolume[0m |
      | [36mIRON_ORE[0m   | [36mMODERATE[0m | [36mSTRONG[0m   | [36m100[0m           | [36m150[0m       | [36m500[0m         |
      | [36mCOPPER_ORE[0m | [36mHIGH[0m     | [36mGROWING[0m  | [36m80[0m            | [36m120[0m       | [36m300[0m         |

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.023ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mthe market data is already persisted[0m                                     [1;30m# market_repository_steps.go:49 -> *MarketRepositoryContext[0m
    [32mWhen[0m [32mI get market data for player 1 and waypoint "X1-TEST-A1"[0m                [1;30m# market_repository_steps.go:56 -> *MarketRepositoryContext[0m
    [32mThen[0m [32mthe market should be retrieved successfully[0m                             [1;30m# market_repository_steps.go:65 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe market should have waypoint "X1-TEST-A1"[0m                             [1;30m# market_repository_steps.go:66 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe retrieved market should have 2 trade goods[0m                           [1;30m# market_repository_steps.go:67 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe market should contain trade good "IRON_ORE" with purchase price 100[0m  [1;30m# market_repository_steps.go:68 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe market should contain trade good "COPPER_ORE" with purchase price 80[0m [1;30m# market_repository_steps.go:68 -> *MarketRepositoryContext[0m
=== RUN   TestFeatures/Get_non-existent_market_data_returns_nil

  [1;37mScenario:[0m Get non-existent market data returns nil                  [1;30m# features/adapters/persistence/market_repository.feature:56[0m
    [32mGiven[0m [32ma player with ID 1[0m                                          [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32ma waypoint "X1-NONEXISTENT"[0m                                   [1;30m# market_repository_steps.go:45 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:97 [35;1mrecord not found
[0m[33m[0.016ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-NONEXISTENT" ORDER BY `market_data`.`id` LIMIT 1
    [32mWhen[0m [32mI get market data for player 1 and waypoint "X1-NONEXISTENT"[0m [1;30m# market_repository_steps.go:56 -> *MarketRepositoryContext[0m
    [32mThen[0m [32mthe market should be nil[0m                                     [1;30m# market_repository_steps.go:69 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthere should be no error[0m                                      [1;30m# market_repository_steps.go:70 -> *MarketRepositoryContext[0m
=== RUN   TestFeatures/List_markets_in_system_with_fresh_data

  [1;37mScenario:[0m List markets in system with fresh data                               [1;30m# features/adapters/persistence/market_repository.feature:63[0m
    [32mGiven[0m [32ma player with ID 1[0m                                                     [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.025ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.012ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-B2" ORDER BY `market_data`.`id` LIMIT 1

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.014ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-C3" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mthe following markets in system "X1-TEST":[0m                               [1;30m# market_repository_steps.go:50 -> *MarketRepositoryContext[0m
      | [36mWaypoint[0m   | [36mTradeGoodsCount[0m | [36mAgeMinutes[0m |
      | [36mX1-TEST-A1[0m | [36m2[0m               | [36m5[0m          |
      | [36mX1-TEST-B2[0m | [36m3[0m               | [36m10[0m         |
      | [36mX1-TEST-C3[0m | [36m1[0m               | [36m15[0m         |
    [32mWhen[0m [32mI list markets for player 1 in system "X1-TEST" with max age 20 minutes[0m [1;30m# market_repository_steps.go:57 -> *MarketRepositoryContext[0m
    [32mThen[0m [32m3 markets should be returned[0m                                            [1;30m# market_repository_steps.go:71 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe markets should include "X1-TEST-A1"[0m                                  [1;30m# market_repository_steps.go:72 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe markets should include "X1-TEST-B2"[0m                                  [1;30m# market_repository_steps.go:72 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe markets should include "X1-TEST-C3"[0m                                  [1;30m# market_repository_steps.go:72 -> *MarketRepositoryContext[0m
=== RUN   TestFeatures/List_markets_in_system_filters_stale_data

  [1;37mScenario:[0m List markets in system filters stale data                            [1;30m# features/adapters/persistence/market_repository.feature:76[0m
    [32mGiven[0m [32ma player with ID 1[0m                                                     [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.025ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.013ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-B2" ORDER BY `market_data`.`id` LIMIT 1

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.011ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-C3" ORDER BY `market_data`.`id` LIMIT 1
    [32mAnd[0m [32mthe following markets in system "X1-TEST":[0m                               [1;30m# market_repository_steps.go:50 -> *MarketRepositoryContext[0m
      | [36mWaypoint[0m   | [36mTradeGoodsCount[0m | [36mAgeMinutes[0m |
      | [36mX1-TEST-A1[0m | [36m2[0m               | [36m5[0m          |
      | [36mX1-TEST-B2[0m | [36m3[0m               | [36m25[0m         |
      | [36mX1-TEST-C3[0m | [36m1[0m               | [36m40[0m         |
    [32mWhen[0m [32mI list markets for player 1 in system "X1-TEST" with max age 20 minutes[0m [1;30m# market_repository_steps.go:57 -> *MarketRepositoryContext[0m
    [32mThen[0m [32m1 markets should be returned[0m                                            [1;30m# market_repository_steps.go:71 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe markets should include "X1-TEST-A1"[0m                                  [1;30m# market_repository_steps.go:72 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe markets should not include "X1-TEST-B2"[0m                              [1;30m# market_repository_steps.go:73 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe markets should not include "X1-TEST-C3"[0m                              [1;30m# market_repository_steps.go:73 -> *MarketRepositoryContext[0m
=== RUN   TestFeatures/List_markets_in_empty_system_returns_empty_list

  [1;37mScenario:[0m List markets in empty system returns empty list                       [1;30m# features/adapters/persistence/market_repository.feature:89[0m
    [32mGiven[0m [32ma player with ID 1[0m                                                      [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m
    [32mWhen[0m [32mI list markets for player 1 in system "X1-EMPTY" with max age 20 minutes[0m [1;30m# market_repository_steps.go:57 -> *MarketRepositoryContext[0m
    [32mThen[0m [32m0 markets should be returned[0m                                             [1;30m# market_repository_steps.go:71 -> *MarketRepositoryContext[0m
=== RUN   TestFeatures/Upsert_with_empty_trade_goods_list

  [1;37mScenario:[0m Upsert with empty trade goods list            [1;30m# features/adapters/persistence/market_repository.feature:94[0m
    [32mGiven[0m [32ma player with ID 1[0m                              [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32ma waypoint "X1-TEST-A1"[0m                           [1;30m# market_repository_steps.go:45 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mmarket data with 0 trade goods[0m                    [1;30m# market_repository_steps.go:47 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.019ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mWhen[0m [32mI upsert the market data[0m                         [1;30m# market_repository_steps.go:54 -> *MarketRepositoryContext[0m
    [32mThen[0m [32mthe market data should be persisted successfully[0m [1;30m# market_repository_steps.go:61 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe database should contain 1 market record[0m       [1;30m# market_repository_steps.go:62 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mthe database should contain 0 trade goods records[0m [1;30m# market_repository_steps.go:63 -> *MarketRepositoryContext[0m
=== RUN   TestFeatures/Different_players_can_have_separate_market_data_for_same_waypoint

  [1;37mScenario:[0m Different players can have separate market data for same waypoint [1;30m# features/adapters/persistence/market_repository.feature:103[0m
    [32mGiven[0m [32ma player with ID 1[0m                                                  [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32ma player with ID 2[0m                                                    [1;30m# market_repository_steps.go:44 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32ma waypoint "X1-TEST-A1"[0m                                               [1;30m# market_repository_steps.go:45 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mmarket data for player 1 with 2 trade goods[0m                           [1;30m# market_repository_steps.go:51 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mmarket data for player 2 with 3 trade goods[0m                           [1;30m# market_repository_steps.go:51 -> *MarketRepositoryContext[0m

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.021ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 1 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1

2025/11/13 17:12:57 [31;1m/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/adapters/persistence/market_repository.go:35 [35;1mrecord not found
[0m[33m[0.013ms] [34;1m[rows:0][0m SELECT * FROM `market_data` WHERE player_id = 2 AND waypoint_symbol = "X1-TEST-A1" ORDER BY `market_data`.`id` LIMIT 1
    [32mWhen[0m [32mI upsert market data for both players[0m                                [1;30m# market_repository_steps.go:58 -> *MarketRepositoryContext[0m
    [32mThen[0m [32mplayer 1 should have 2 trade goods for waypoint "X1-TEST-A1"[0m         [1;30m# market_repository_steps.go:74 -> *MarketRepositoryContext[0m
    [32mAnd[0m [32mplayer 2 should have 3 trade goods for waypoint "X1-TEST-A1"[0m          [1;30m# market_repository_steps.go:74 -> *MarketRepositoryContext[0m

[1;37mFeature:[0m Database Connection Pool and Retry Logic
  As a database infrastructure component
  I need robust connection pooling with automatic retry on transient failures
  So that the system remains resilient to temporary database unavailability
=== RUN   TestFeatures/Database_connection_pool_maintains_5_connections

  [1;37mBackground:[0m
    [32mGiven[0m [32ma clean database environment[0m                                 [1;30m# database_retry_steps.go:763 -> *databaseRetryContext[0m

  [1;37mScenario:[0m Database connection pool maintains 5 connections           [1;30m# features/infrastructure/database_retry.feature:9[0m
    [32mWhen[0m [32mI configure a database pool with max 5 open connections[0m       [1;30m# database_retry_steps.go:766 -> *databaseRetryContext[0m
    [32mAnd[0m [32mI create a database connection[0m                                 [1;30m# database_retry_steps.go:767 -> *databaseRetryContext[0m
    [32mThen[0m [32mthe connection pool should have max open connections set to 5[0m [1;30m# database_retry_steps.go:768 -> *databaseRetryContext[0m
    [32mAnd[0m [32mthe connection pool should have max idle connections set to 2[0m  [1;30m# database_retry_steps.go:769 -> *databaseRetryContext[0m
=== RUN   TestFeatures/Database_connection_retry_on_transient_failure_(max_3_attempts)

  [1;37mScenario:[0m Database connection retry on transient failure (max 3 attempts) [1;30m# features/infrastructure/database_retry.feature:15[0m
    [32mGiven[0m [32ma database that fails on first 2 connection attempts[0m              [1;30m# database_retry_steps.go:772 -> *databaseRetryContext[0m
    [32mWhen[0m [32mI attempt to connect to the database with retry enabled[0m            [1;30m# database_retry_steps.go:773 -> *databaseRetryContext[0m
    [32mThen[0m [32mthe connection should succeed on the 3rd attempt[0m                   [1;30m# database_retry_steps.go:774 -> *databaseRetryContext[0m
    [32mAnd[0m [32mthe retry count should be 2[0m                                         [1;30m# database_retry_steps.go:775 -> *databaseRetryContext[0m
=== RUN   TestFeatures/Database_connection_exponential_backoff_(1s,_2s,_4s)

  [1;37mScenario:[0m Database connection exponential backoff (1s, 2s, 4s) [1;30m# features/infrastructure/database_retry.feature:21[0m
    [32mGiven[0m [32ma database that fails on first 3 connection attempts[0m   [1;30m# database_retry_steps.go:772 -> *databaseRetryContext[0m
    [32mWhen[0m [32mI attempt to connect with exponential backoff retry[0m     [1;30m# database_retry_steps.go:778 -> *databaseRetryContext[0m
    [32mThen[0m [32mthe first retry should wait approximately 1 second[0m      [1;30m# database_retry_steps.go:779 -> github.com/andrescamacho/spacetraders-go/test/bdd/steps.InitializeDatabaseRetryScenario.func3[0m
    [32mAnd[0m [32mthe second retry should wait approximately 2 seconds[0m     [1;30m# database_retry_steps.go:782 -> github.com/andrescamacho/spacetraders-go/test/bdd/steps.InitializeDatabaseRetryScenario.func4[0m
    [32mAnd[0m [32mthe third retry should wait approximately 4 seconds[0m      [1;30m# database_retry_steps.go:785 -> github.com/andrescamacho/spacetraders-go/test/bdd/steps.InitializeDatabaseRetryScenario.func5[0m
=== RUN   TestFeatures/Database_connection_fails_after_max_retries

  [1;37mScenario:[0m Database connection fails after max retries          [1;30m# features/infrastructure/database_retry.feature:28[0m
    [32mGiven[0m [32ma database that always fails to connect[0m                [1;30m# database_retry_steps.go:790 -> *databaseRetryContext[0m
    [32mWhen[0m [32mI attempt to connect to the database with retry enabled[0m [1;30m# database_retry_steps.go:773 -> *databaseRetryContext[0m
    [32mAnd[0m [32mall 3 retry attempts are exhausted[0m                       [1;30m# database_retry_steps.go:791 -> *databaseRetryContext[0m
    [32mThen[0m [32mthe connection should fail with a timeout error[0m         [1;30m# database_retry_steps.go:792 -> *databaseRetryContext[0m
    [32mAnd[0m [32mthe error message should indicate max retries exceeded[0m   [1;30m# database_retry_steps.go:793 -> *databaseRetryContext[0m
=== RUN   TestFeatures/Database_transaction_rollback_on_error

  [1;37mScenario:[0m Database transaction rollback on error            [1;30m# features/infrastructure/database_retry.feature:35[0m
    [32mGiven[0m [32man active database connection[0m                       [1;30m# database_retry_steps.go:796 -> *databaseRetryContext[0m
    [32mAnd[0m [32ma transaction is started[0m                              [1;30m# database_retry_steps.go:797 -> *databaseRetryContext[0m
    [32mWhen[0m [32mI insert a player record with symbol "TEST-1"[0m        [1;30m# database_retry_steps.go:798 -> *databaseRetryContext[0m
    [32mAnd[0m [32mthe transaction encounters an error[0m                   [1;30m# database_retry_steps.go:799 -> *databaseRetryContext[0m
    [32mAnd[0m [32mthe transaction is rolled back[0m                        [1;30m# database_retry_steps.go:800 -> *databaseRetryContext[0m
    [32mThen[0m [32mthe player "TEST-1" should not exist in the database[0m [1;30m# database_retry_steps.go:801 -> *databaseRetryContext[0m
=== RUN   TestFeatures/Database_transaction_commit_on_success

  [1;37mScenario:[0m Database transaction commit on success        [1;30m# features/infrastructure/database_retry.feature:43[0m
    [32mGiven[0m [32man active database connection[0m                   [1;30m# database_retry_steps.go:796 -> *databaseRetryContext[0m
    [32mAnd[0m [32ma transaction is started[0m                          [1;30m# database_retry_steps.go:797 -> *databaseRetryContext[0m
    [32mWhen[0m [32mI insert a player record with symbol "TEST-2"[0m    [1;30m# database_retry_steps.go:798 -> *databaseRetryContext[0m
    [32mAnd[0m [32mthe transaction is committed successfully[0m         [1;30m# database_retry_steps.go:804 -> *databaseRetryContext[0m
    [32mThen[0m [32mthe player "TEST-2" should exist in the database[0m [1;30m# database_retry_steps.go:805 -> *databaseRetryContext[0m
=== RUN   TestFeatures/Database_query_timeout_after_30_seconds

  [1;37mScenario:[0m Database query timeout after 30 seconds                 [1;30m# features/infrastructure/database_retry.feature:50[0m
    [32mGiven[0m [32man active database connection with 5 second query timeout[0m [1;30m# database_retry_steps.go:808 -> *databaseRetryContext[0m
    [32mWhen[0m [32mI execute a query that takes 10 seconds[0m                    [1;30m# database_retry_steps.go:809 -> *databaseRetryContext[0m
    [31mThen[0m [31mthe query should fail with a timeout error[0m                 [1;30m# database_retry_steps.go:810 -> *databaseRetryContext[0m
    [1;31mexpected timeout error but query succeeded[0m
    [36mAnd[0m [36mthe error message should indicate context deadline exceeded[0m [1;30m# database_retry_steps.go:811 -> *databaseRetryContext[0m
    suite.go:640: expected timeout error but query succeeded
=== RUN   TestFeatures/Database_connection_health_check_on_borrow

  [1;37mScenario:[0m Database connection health check on borrow          [1;30m# features/infrastructure/database_retry.feature:56[0m
    [32mGiven[0m [32ma database connection pool[0m                            [1;30m# database_retry_steps.go:814 -> *databaseRetryContext[0m
    [32mWhen[0m [32mI borrow a connection from the pool[0m                    [1;30m# database_retry_steps.go:815 -> *databaseRetryContext[0m
    [32mThen[0m [32mthe connection should be validated with a ping[0m         [1;30m# database_retry_steps.go:816 -> *databaseRetryContext[0m
    [32mAnd[0m [32mthe ping should complete successfully in under 1 second[0m [1;30m# database_retry_steps.go:817 -> *databaseRetryContext[0m
=== RUN   TestFeatures/Database_graceful_close_releases_all_connections

  [1;37mScenario:[0m Database graceful close releases all connections  [1;30m# features/infrastructure/database_retry.feature:62[0m
    [32mGiven[0m [32man active database connection with 3 active queries[0m [1;30m# database_retry_steps.go:820 -> *databaseRetryContext[0m
    [32mWhen[0m [32mI close the database gracefully[0m                      [1;30m# database_retry_steps.go:821 -> *databaseRetryContext[0m
    [32mThen[0m [32mall active queries should complete or be cancelled[0m   [1;30m# database_retry_steps.go:822 -> *databaseRetryContext[0m
    [32mAnd[0m [32mall connections should be released from the pool[0m      [1;30m# database_retry_steps.go:823 -> *databaseRetryContext[0m
    [32mAnd[0m [32mthe connection pool should report 0 open connections[0m  [1;30m# database_retry_steps.go:824 -> *databaseRetryContext[0m
=== RUN   TestFeatures/Database_connection_pooling_prevents_exhaustion

  [1;37mScenario:[0m Database connection pooling prevents exhaustion           [1;30m# features/infrastructure/database_retry.feature:69[0m
    [32mGiven[0m [32ma database pool with max 2 open connections[0m                 [1;30m# database_retry_steps.go:827 -> *databaseRetryContext[0m
    [32mWhen[0m [32mI attempt to execute 5 concurrent queries[0m                    [1;30m# database_retry_steps.go:828 -> *databaseRetryContext[0m
    [32mThen[0m [32mthe first 2 queries should acquire connections immediately[0m   [1;30m# database_retry_steps.go:829 -> *databaseRetryContext[0m
    [32mAnd[0m [32mthe remaining 3 queries should wait for available connections[0m [1;30m# database_retry_steps.go:830 -> *databaseRetryContext[0m
    [32mAnd[0m [32mall 5 queries should complete successfully[0m                    [1;30m# database_retry_steps.go:831 -> *databaseRetryContext[0m
    [32mAnd[0m [32mno connection exhaustion error should occur[0m                   [1;30m# database_retry_steps.go:832 -> *databaseRetryContext[0m

[1;37mFeature:[0m Waypoint Caching
  As the waypoint repository
  I want to cache waypoint data with TTL and filtering capabilities
  So that I can minimize API calls and support efficient waypoint discovery
=== RUN   TestFeatures/Save_single_waypoint_to_database

  [1;37mBackground:[0m
    [33mGiven[0m [33mthe database is initialized[0m

  [1;37mScenario:[0m Save single waypoint to database                   [1;30m# features/infrastructure/waypoint_cache.feature:9[0m
    [33mWhen[0m [33mI save waypoint "X1-GZ7-A1" for system "X1-GZ7" with:[0m
      | [36mtype[0m   | [36mx[0m    | [36my[0m   | [36mtraits[0m          | [36mhas_fuel[0m |
      | [36mPLANET[0m | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD,MARKET[0m | [36mtrue[0m     |
    [33mThen[0m [33mthe waypoint should be saved in the database[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" should exist in the database[0m
=== RUN   TestFeatures/Save_multiple_waypoints_for_a_system_(batch_insert)

  [1;37mScenario:[0m Save multiple waypoints for a system (batch insert)  [1;30m# features/infrastructure/waypoint_cache.feature:16[0m
    [33mWhen[0m [33mI save waypoints for system "X1-GZ7" with:[0m
      | [36msymbol[0m     | [36mtype[0m    | [36mx[0m    | [36my[0m   | [36mtraits[0m          | [36mhas_fuel[0m | [36morbitals[0m   |
      | [36mX1-GZ7-A1[0m  | [36mPLANET[0m  | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD,MARKET[0m | [36mtrue[0m     | [36mX1-GZ7-A1Z[0m |
      | [36mX1-GZ7-A1Z[0m | [36mORBITAL[0m | [36m10.0[0m | [36m5.0[0m | [36m[0m                | [36mfalse[0m    | [36m[0m           |
      | [36mX1-GZ7-B2[0m  | [36mMOON[0m    | [36m-5.0[0m | [36m8.0[0m | [36mMARKETPLACE[0m     | [36mfalse[0m    | [36m[0m           |
    [33mThen[0m [33mall waypoints should be saved in the database[0m
    [33mAnd[0m [33mthe database should have 3 waypoints for system "X1-GZ7"[0m
=== RUN   TestFeatures/Retrieve_cached_waypoint_by_symbol

  [1;37mScenario:[0m Retrieve cached waypoint by symbol                              [1;30m# features/infrastructure/waypoint_cache.feature:25[0m
    [33mGiven[0m [33mwaypoint "X1-GZ7-A1" exists in database for system "X1-GZ7" with:[0m
      | [36mtype[0m   | [36mx[0m    | [36my[0m   | [36mtraits[0m          | [36mhas_fuel[0m |
      | [36mPLANET[0m | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD,MARKET[0m | [36mtrue[0m     |
    [33mWhen[0m [33mI query waypoint "X1-GZ7-A1" from system "X1-GZ7"[0m
    [33mThen[0m [33mI should receive the waypoint[0m
    [33mAnd[0m [33mthe waypoint should have type "PLANET"[0m
    [33mAnd[0m [33mthe waypoint should have coordinates (10.0, 5.0)[0m
    [33mAnd[0m [33mthe waypoint should have traits "SHIPYARD,MARKET"[0m
    [33mAnd[0m [33mthe waypoint should have fuel available[0m
=== RUN   TestFeatures/List_all_waypoints_in_a_system

  [1;37mScenario:[0m List all waypoints in a system                 [1;30m# features/infrastructure/waypoint_cache.feature:36[0m
    [33mGiven[0m [33mwaypoints exist in database for system "X1-GZ7":[0m
      | [36msymbol[0m     | [36mtype[0m    | [36mx[0m    | [36my[0m   | [36mtraits[0m          | [36mhas_fuel[0m |
      | [36mX1-GZ7-A1[0m  | [36mPLANET[0m  | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD,MARKET[0m | [36mtrue[0m     |
      | [36mX1-GZ7-A1Z[0m | [36mORBITAL[0m | [36m10.0[0m | [36m5.0[0m | [36m[0m                | [36mfalse[0m    |
      | [36mX1-GZ7-B2[0m  | [36mMOON[0m    | [36m-5.0[0m | [36m8.0[0m | [36mMARKETPLACE[0m     | [36mfalse[0m    |
    [33mWhen[0m [33mI list waypoints for system "X1-GZ7"[0m
    [33mThen[0m [33mI should receive 3 waypoints[0m
    [33mAnd[0m [33mthe waypoint list should contain "X1-GZ7-A1"[0m
    [33mAnd[0m [33mthe waypoint list should contain "X1-GZ7-A1Z"[0m
    [33mAnd[0m [33mthe waypoint list should contain "X1-GZ7-B2"[0m
=== RUN   TestFeatures/Filter_waypoints_by_trait_(SHIPYARD)

  [1;37mScenario:[0m Filter waypoints by trait (SHIPYARD)                    [1;30m# features/infrastructure/waypoint_cache.feature:48[0m
    [33mGiven[0m [33mwaypoints exist in database for system "X1-GZ7":[0m
      | [36msymbol[0m     | [36mtype[0m    | [36mx[0m    | [36my[0m   | [36mtraits[0m          | [36mhas_fuel[0m |
      | [36mX1-GZ7-A1[0m  | [36mPLANET[0m  | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD,MARKET[0m | [36mtrue[0m     |
      | [36mX1-GZ7-A1Z[0m | [36mORBITAL[0m | [36m10.0[0m | [36m5.0[0m | [36m[0m                | [36mfalse[0m    |
      | [36mX1-GZ7-B2[0m  | [36mMOON[0m    | [36m-5.0[0m | [36m8.0[0m | [36mMARKETPLACE[0m     | [36mfalse[0m    |
    [33mWhen[0m [33mI filter waypoints for system "X1-GZ7" by trait "SHIPYARD"[0m
    [33mThen[0m [33mI should receive 1 waypoint[0m
    [33mAnd[0m [33mthe waypoint list should contain "X1-GZ7-A1"[0m
=== RUN   TestFeatures/Filter_waypoints_by_trait_(MARKETPLACE)

  [1;37mScenario:[0m Filter waypoints by trait (MARKETPLACE)                    [1;30m# features/infrastructure/waypoint_cache.feature:58[0m
    [33mGiven[0m [33mwaypoints exist in database for system "X1-GZ7":[0m
      | [36msymbol[0m    | [36mtype[0m   | [36mx[0m    | [36my[0m   | [36mtraits[0m          | [36mhas_fuel[0m |
      | [36mX1-GZ7-A1[0m | [36mPLANET[0m | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD,MARKET[0m | [36mtrue[0m     |
      | [36mX1-GZ7-B2[0m | [36mMOON[0m   | [36m-5.0[0m | [36m8.0[0m | [36mMARKETPLACE[0m     | [36mfalse[0m    |
    [33mWhen[0m [33mI filter waypoints for system "X1-GZ7" by trait "MARKETPLACE"[0m
    [33mThen[0m [33mI should receive 2 waypoints[0m
    [33mAnd[0m [33mthe waypoint list should contain "X1-GZ7-A1"[0m
    [33mAnd[0m [33mthe waypoint list should contain "X1-GZ7-B2"[0m
=== RUN   TestFeatures/Filter_waypoints_by_type_(PLANET)

  [1;37mScenario:[0m Filter waypoints by type (PLANET)                    [1;30m# features/infrastructure/waypoint_cache.feature:68[0m
    [33mGiven[0m [33mwaypoints exist in database for system "X1-GZ7":[0m
      | [36msymbol[0m     | [36mtype[0m    | [36mx[0m    | [36my[0m   | [36mtraits[0m          | [36mhas_fuel[0m |
      | [36mX1-GZ7-A1[0m  | [36mPLANET[0m  | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD,MARKET[0m | [36mtrue[0m     |
      | [36mX1-GZ7-A1Z[0m | [36mORBITAL[0m | [36m10.0[0m | [36m5.0[0m | [36m[0m                | [36mfalse[0m    |
      | [36mX1-GZ7-B2[0m  | [36mMOON[0m    | [36m-5.0[0m | [36m8.0[0m | [36mMARKETPLACE[0m     | [36mfalse[0m    |
    [33mWhen[0m [33mI filter waypoints for system "X1-GZ7" by type "PLANET"[0m
    [33mThen[0m [33mI should receive 1 waypoint[0m
    [33mAnd[0m [33mthe waypoint list should contain "X1-GZ7-A1"[0m
=== RUN   TestFeatures/Filter_waypoints_by_has_fuel_flag

  [1;37mScenario:[0m Filter waypoints by has_fuel flag                       [1;30m# features/infrastructure/waypoint_cache.feature:78[0m
    [33mGiven[0m [33mwaypoints exist in database for system "X1-GZ7":[0m
      | [36msymbol[0m     | [36mtype[0m    | [36mx[0m    | [36my[0m   | [36mtraits[0m          | [36mhas_fuel[0m |
      | [36mX1-GZ7-A1[0m  | [36mPLANET[0m  | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD,MARKET[0m | [36mtrue[0m     |
      | [36mX1-GZ7-A1Z[0m | [36mORBITAL[0m | [36m10.0[0m | [36m5.0[0m | [36m[0m                | [36mfalse[0m    |
      | [36mX1-GZ7-B2[0m  | [36mMOON[0m    | [36m-5.0[0m | [36m8.0[0m | [36mMARKETPLACE[0m     | [36mfalse[0m    |
    [33mWhen[0m [33mI filter waypoints for system "X1-GZ7" with fuel available[0m
    [33mThen[0m [33mI should receive 1 waypoint[0m
    [33mAnd[0m [33mthe waypoint list should contain "X1-GZ7-A1"[0m
=== RUN   TestFeatures/Return_empty_list_when_no_waypoints_match_trait_filter

  [1;37mScenario:[0m Return empty list when no waypoints match trait filter  [1;30m# features/infrastructure/waypoint_cache.feature:88[0m
    [33mGiven[0m [33mwaypoints exist in database for system "X1-GZ7":[0m
      | [36msymbol[0m    | [36mtype[0m | [36mx[0m    | [36my[0m   | [36mtraits[0m      | [36mhas_fuel[0m |
      | [36mX1-GZ7-B2[0m | [36mMOON[0m | [36m-5.0[0m | [36m8.0[0m | [36mMARKETPLACE[0m | [36mfalse[0m    |
    [33mWhen[0m [33mI filter waypoints for system "X1-GZ7" by trait "SHIPYARD"[0m
    [33mThen[0m [33mI should receive 0 waypoints[0m
=== RUN   TestFeatures/Return_empty_list_when_no_waypoints_match_type_filter

  [1;37mScenario:[0m Return empty list when no waypoints match type filter [1;30m# features/infrastructure/waypoint_cache.feature:95[0m
    [33mGiven[0m [33mwaypoints exist in database for system "X1-GZ7":[0m
      | [36msymbol[0m    | [36mtype[0m | [36mx[0m    | [36my[0m   | [36mtraits[0m      | [36mhas_fuel[0m |
      | [36mX1-GZ7-B2[0m | [36mMOON[0m | [36m-5.0[0m | [36m8.0[0m | [36mMARKETPLACE[0m | [36mfalse[0m    |
    [33mWhen[0m [33mI filter waypoints for system "X1-GZ7" by type "PLANET"[0m
    [33mThen[0m [33mI should receive 0 waypoints[0m
=== RUN   TestFeatures/Upsert_waypoint_(update_existing_with_new_data)

  [1;37mScenario:[0m Upsert waypoint (update existing with new data)                 [1;30m# features/infrastructure/waypoint_cache.feature:102[0m
    [33mGiven[0m [33mwaypoint "X1-GZ7-A1" exists in database for system "X1-GZ7" with:[0m
      | [36mtype[0m   | [36mx[0m    | [36my[0m   | [36mtraits[0m   | [36mhas_fuel[0m |
      | [36mPLANET[0m | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD[0m | [36mfalse[0m    |
    [33mWhen[0m [33mI save waypoint "X1-GZ7-A1" for system "X1-GZ7" with:[0m
      | [36mtype[0m   | [36mx[0m    | [36my[0m   | [36mtraits[0m          | [36mhas_fuel[0m |
      | [36mPLANET[0m | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD,MARKET[0m | [36mtrue[0m     |
    [33mThen[0m [33mthe waypoint should be saved in the database[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" should have traits "SHIPYARD,MARKET"[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" should have fuel available[0m
=== RUN   TestFeatures/Preserve_waypoint_orbitals_when_saving

  [1;37mScenario:[0m Preserve waypoint orbitals when saving                         [1;30m# features/infrastructure/waypoint_cache.feature:113[0m
    [33mWhen[0m [33mI save waypoint "X1-GZ7-A1" for system "X1-GZ7" with orbitals:[0m
      | [36mtype[0m   | [36mx[0m    | [36my[0m   | [36mtraits[0m   | [36mhas_fuel[0m | [36morbitals[0m              |
      | [36mPLANET[0m | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD[0m | [36mtrue[0m     | [36mX1-GZ7-A1Z,X1-GZ7-A1Y[0m |
    [33mThen[0m [33mwaypoint "X1-GZ7-A1" should have orbitals "X1-GZ7-A1Z,X1-GZ7-A1Y"[0m
=== RUN   TestFeatures/Preserve_waypoint_coordinates_accurately_(no_rounding_errors)

  [1;37mScenario:[0m Preserve waypoint coordinates accurately (no rounding errors) [1;30m# features/infrastructure/waypoint_cache.feature:119[0m
    [33mWhen[0m [33mI save waypoint "X1-GZ7-A1" for system "X1-GZ7" with:[0m
      | [36mtype[0m   | [36mx[0m       | [36my[0m        | [36mtraits[0m | [36mhas_fuel[0m |
      | [36mPLANET[0m | [36m123.456[0m | [36m-789.012[0m | [36mMARKET[0m | [36mfalse[0m    |
    [33mThen[0m [33mwaypoint "X1-GZ7-A1" should have coordinates (123.456, -789.012)[0m
=== RUN   TestFeatures/Deduplication_by_symbol_(same_symbol_overwrites)

  [1;37mScenario:[0m Deduplication by symbol (same symbol overwrites)                [1;30m# features/infrastructure/waypoint_cache.feature:125[0m
    [33mGiven[0m [33mwaypoint "X1-GZ7-A1" exists in database for system "X1-GZ7" with:[0m
      | [36mtype[0m   | [36mx[0m    | [36my[0m   | [36mtraits[0m | [36mhas_fuel[0m |
      | [36mPLANET[0m | [36m10.0[0m | [36m5.0[0m | [36mMARKET[0m | [36mfalse[0m    |
    [33mWhen[0m [33mI save waypoints for system "X1-GZ7" with:[0m
      | [36msymbol[0m    | [36mtype[0m   | [36mx[0m    | [36my[0m   | [36mtraits[0m   | [36mhas_fuel[0m |
      | [36mX1-GZ7-A1[0m | [36mPLANET[0m | [36m10.0[0m | [36m5.0[0m | [36mSHIPYARD[0m | [36mtrue[0m     |
      | [36mX1-GZ7-B2[0m | [36mMOON[0m   | [36m-5.0[0m | [36m8.0[0m | [36mMARKET[0m   | [36mfalse[0m    |
    [33mThen[0m [33mthe database should have 2 waypoints for system "X1-GZ7"[0m
    [33mAnd[0m [33mwaypoint "X1-GZ7-A1" should have traits "SHIPYARD"[0m

[1;37mFeature:[0m Daemon Container Lifecycle
  As a daemon system
  I need containers to properly transition status during daemon operations
  So that container state accurately reflects execution lifecycle in real daemon scenarios
=== RUN   TestFeatures/Container_transitions_to_RUNNING_on_successful_start

  [1;37mScenario:[0m Container transitions to RUNNING on successful start [1;30m# features/daemon/container_lifecycle.feature:10[0m
    [32mGiven[0m [32ma new daemon container is created with type "NAVIGATE"[0m [1;30m# container_lifecycle_steps.go:935 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe daemon starts the container[0m                         [1;30m# container_lifecycle_steps.go:955 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container status should be "RUNNING"[0m                [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container started_at timestamp should be set[0m         [1;30m# container_lifecycle_steps.go:986 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container stopped_at timestamp should be nil[0m         [1;30m# container_lifecycle_steps.go:987 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Container_transitions_to_COMPLETED_on_successful_completion

  [1;37mScenario:[0m Container transitions to COMPLETED on successful completion [1;30m# features/daemon/container_lifecycle.feature:17[0m
    [32mGiven[0m [32ma daemon container is in "RUNNING" status[0m                     [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe container operation completes successfully[0m                 [1;30m# container_lifecycle_steps.go:956 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container status should be "COMPLETED"[0m                     [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container stopped_at timestamp should be set[0m                [1;30m# container_lifecycle_steps.go:988 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container should be marked as finished[0m                      [1;30m# container_lifecycle_steps.go:989 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Container_transitions_to_FAILED_on_error

  [1;37mScenario:[0m Container transitions to FAILED on error                     [1;30m# features/daemon/container_lifecycle.feature:24[0m
    [32mGiven[0m [32ma daemon container is in "RUNNING" status[0m                      [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe container operation encounters an error "Navigation failed"[0m [1;30m# container_lifecycle_steps.go:957 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container status should be "FAILED"[0m                         [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container stopped_at timestamp should be set[0m                 [1;30m# container_lifecycle_steps.go:988 -> *containerLifecycleContext[0m
    [31mAnd[0m [31mthe container last_error should be "Navigation failed"[0m           [1;30m# container_steps.go:688 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).LastError
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:128
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerLastErrorShouldBe
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:504
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mAnd[0m [36mthe container should be marked as finished[0m                       [1;30m# container_lifecycle_steps.go:989 -> *containerLifecycleContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).LastError
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:128
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerLastErrorShouldBe
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:504
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_stays_in_STOPPING_during_graceful_shutdown

  [1;37mScenario:[0m Container stays in STOPPING during graceful shutdown [1;30m# features/daemon/container_lifecycle.feature:32[0m
    [32mGiven[0m [32ma daemon container is in "RUNNING" status[0m              [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe daemon signals the container to stop[0m                [1;30m# container_lifecycle_steps.go:958 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container status should be "STOPPING"[0m               [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container stopped_at timestamp should be nil[0m         [1;30m# container_lifecycle_steps.go:987 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container should not be marked as finished[0m           [1;30m# container_lifecycle_steps.go:990 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Container_finalizes_to_STOPPED_after_graceful_shutdown

  [1;37mScenario:[0m Container finalizes to STOPPED after graceful shutdown [1;30m# features/daemon/container_lifecycle.feature:39[0m
    [32mGiven[0m [32ma daemon container is in "STOPPING" status[0m               [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe daemon finalizes the container shutdown[0m               [1;30m# container_lifecycle_steps.go:959 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container status should be "STOPPED"[0m                  [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container stopped_at timestamp should be set[0m           [1;30m# container_lifecycle_steps.go:988 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container should be marked as finished[0m                 [1;30m# container_lifecycle_steps.go:989 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Quick-running_containers_properly_transition_status

  [1;37mScenario:[0m Quick-running containers properly transition status [1;30m# features/daemon/container_lifecycle.feature:50[0m
    [32mGiven[0m [32ma daemon container that runs for less than 1 second[0m   [1;30m# container_lifecycle_steps.go:937 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe container completes its operation[0m                  [1;30m# container_lifecycle_steps.go:960 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe status should be "COMPLETED" not "RUNNING"[0m         [1;30m# container_lifecycle_steps.go:992 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container should be marked as finished[0m              [1;30m# container_lifecycle_steps.go:989 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Container_status_reflects_completion_even_with_stop_timestamp_set

  [1;37mScenario:[0m Container status reflects completion even with stop timestamp set [1;30m# features/daemon/container_lifecycle.feature:56[0m
    [32mGiven[0m [32ma container with status "RUNNING"[0m                                   [1;30m# container_lifecycle_steps.go:938 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container completes successfully[0m                                  [1;30m# container_lifecycle_steps.go:961 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mI query the container status[0m                                         [1;30m# container_lifecycle_steps.go:962 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe status must be "COMPLETED" not "RUNNING"[0m                         [1;30m# container_lifecycle_steps.go:993 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe stopped_at timestamp should be set[0m                                [1;30m# container_lifecycle_steps.go:994 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/List_containers_shows_correct_status_after_completion

  [1;37mScenario:[0m List containers shows correct status after completion        [1;30m# features/daemon/container_lifecycle.feature:67[0m
    [32mGiven[0m [32ma new daemon container is created with type "DOCK"[0m             [1;30m# container_lifecycle_steps.go:935 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe container operation completes successfully[0m                  [1;30m# container_lifecycle_steps.go:956 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mI list all daemon containers[0m                                     [1;30m# container_lifecycle_steps.go:963 -> *containerLifecycleContext[0m
    [31mThen[0m [31mthe container should appear with status "COMPLETED"[0m             [1;30m# container_lifecycle_steps.go:995 -> *containerLifecycleContext[0m
    [1;31mexpected container status 'COMPLETED' but got 'PENDING'[0m
    [36mAnd[0m [36mthe container should be included in the finished containers list[0m [1;30m# container_lifecycle_steps.go:996 -> *containerLifecycleContext[0m
    suite.go:640: expected container status 'COMPLETED' but got 'PENDING'
=== RUN   TestFeatures/Completed_containers_can_be_queried_by_status

  [1;37mScenario:[0m Completed containers can be queried by status   [1;30m# features/daemon/container_lifecycle.feature:74[0m
    [32mGiven[0m [32ma daemon container is in "COMPLETED" status[0m       [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mI query containers by status "COMPLETED"[0m           [1;30m# container_lifecycle_steps.go:964 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container should appear in the results[0m         [1;30m# container_lifecycle_steps.go:997 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container should have finished flag set to true[0m [1;30m# container_lifecycle_steps.go:998 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Running_containers_excluded_from_finished_containers_list

  [1;37mScenario:[0m Running containers excluded from finished containers list [1;30m# features/daemon/container_lifecycle.feature:80[0m
    [31mGiven[0m [31m3 daemon containers exist:[0m                                  [1;30m# container_lifecycle_steps.go:949 -> *containerLifecycleContext[0m
      | [36mcontainer-1[0m | [36mRUNNING[0m   |
      | [36mcontainer-2[0m | [36mCOMPLETED[0m |
      | [36mcontainer-3[0m | [36mFAILED[0m    |
    [1;31mcannot convert argument 0: "3" of type "string" to *messages.PickleTable[0m
    [36mWhen[0m [36mI list only finished containers[0m                              [1;30m# container_lifecycle_steps.go:965 -> *containerLifecycleContext[0m
    [36mThen[0m [36mthe results should contain 2 containers[0m                      [1;30m# container_lifecycle_steps.go:999 -> *containerLifecycleContext[0m
    [36mAnd[0m [36mthe results should include "container-2" and "container-3"[0m    [1;30m# container_lifecycle_steps.go:1000 -> *containerLifecycleContext[0m
    [36mAnd[0m [36mthe results should not include "container-1"[0m                  [1;30m# container_lifecycle_steps.go:1001 -> *containerLifecycleContext[0m
    suite.go:640: cannot convert argument 0: "3" of type "string" to *messages.PickleTable
=== RUN   TestFeatures/Container_tracks_start_and_stop_timestamps

  [1;37mScenario:[0m Container tracks start and stop timestamps         [1;30m# features/daemon/container_lifecycle.feature:94[0m
    [32mGiven[0m [32ma new daemon container is created with type "REFUEL"[0m [1;30m# container_lifecycle_steps.go:935 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe daemon starts the container[0m                       [1;30m# container_lifecycle_steps.go:955 -> *containerLifecycleContext[0m
    [32mAnd[0m [32m2 seconds pass[0m                                         [1;30m# container_lifecycle_steps.go:966 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container operation completes successfully[0m         [1;30m# container_lifecycle_steps.go:956 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container started_at timestamp should be set[0m      [1;30m# container_lifecycle_steps.go:986 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container stopped_at timestamp should be set[0m       [1;30m# container_lifecycle_steps.go:988 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe runtime duration should be approximately 2 seconds[0m [1;30m# container_steps.go:697 -> *containerContext[0m
=== RUN   TestFeatures/Container_started_at_persists_through_state_transitions

  [1;37mScenario:[0m Container started_at persists through state transitions [1;30m# features/daemon/container_lifecycle.feature:103[0m
    [32mGiven[0m [32ma daemon container is in "RUNNING" status[0m                 [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe container transitions to "COMPLETED"[0m                   [1;30m# container_lifecycle_steps.go:967 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container started_at timestamp should remain unchanged[0m [1;30m# container_lifecycle_steps.go:1003 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container stopped_at timestamp should be set[0m            [1;30m# container_lifecycle_steps.go:988 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Container_stopped_at_is_set_for_all_terminal_states

  [1;37mScenario:[0m Container stopped_at is set for all terminal states      [1;30m# features/daemon/container_lifecycle.feature:109[0m
    [32mGiven[0m [32ma daemon container is in "RUNNING" status[0m                  [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe container transitions to "FAILED"[0m                       [1;30m# container_lifecycle_steps.go:967 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container stopped_at timestamp should be set[0m            [1;30m# container_lifecycle_steps.go:988 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe stopped_at should be greater than or equal to started_at[0m [1;30m# container_lifecycle_steps.go:1004 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Container_increments_iteration_count_on_loop

  [1;37mScenario:[0m Container increments iteration count on loop                  [1;30m# features/daemon/container_lifecycle.feature:119[0m
    [32mGiven[0m [32ma daemon container is in "RUNNING" status with max_iterations 5[0m [1;30m# container_lifecycle_steps.go:950 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe container completes one iteration[0m                            [1;30m# container_lifecycle_steps.go:968 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container current_iteration should increment to 1[0m            [1;30m# container_lifecycle_steps.go:1005 -> *containerLifecycleContext[0m
    [31mAnd[0m [31mthe container should continue running[0m                             [1;30m# container_steps.go:690 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).ShouldContinue
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:222
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerShouldContinueRunning
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:521
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).ShouldContinue
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:222
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerShouldContinueRunning
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:521
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_respects_max_iterations_limit

  [1;37mScenario:[0m Container respects max_iterations limit                        [1;30m# features/daemon/container_lifecycle.feature:125[0m
    [32mGiven[0m [32ma daemon container with max_iterations 3 and current_iteration 2[0m [1;30m# container_lifecycle_steps.go:951 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe container completes one iteration[0m                             [1;30m# container_lifecycle_steps.go:968 -> *containerLifecycleContext[0m
    [31mThen[0m [31mthe container current_iteration should be 3[0m                       [1;30m# container_steps.go:683 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).CurrentIteration
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:119
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerCurrentIterationShouldBe
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:469
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mAnd[0m [36mthe container should not continue running[0m                          [1;30m# container_steps.go:691 -> *containerContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).CurrentIteration
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:119
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerCurrentIterationShouldBe
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:469
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_with_-1_iterations_runs_indefinitely

  [1;37mScenario:[0m Container with -1 iterations runs indefinitely                    [1;30m# features/daemon/container_lifecycle.feature:131[0m
    [32mGiven[0m [32ma daemon container with max_iterations -1 and current_iteration 100[0m [1;30m# container_lifecycle_steps.go:951 -> *containerLifecycleContext[0m
    [31mWhen[0m [31mI check if the container should continue[0m                             [1;30m# container_steps.go:665 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).ShouldContinue
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:222
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iCheckIfTheContainerShouldContinue
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:337
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe container should continue running[0m                                [1;30m# container_steps.go:690 -> *containerContext[0m
    [36mAnd[0m [36mthe current_iteration should be 100[0m                                   [1;30m# container_lifecycle_steps.go:1008 -> *containerLifecycleContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).ShouldContinue
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:222
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iCheckIfTheContainerShouldContinue
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:337
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_exits_after_max_iterations_reached

  [1;37mScenario:[0m Container exits after max_iterations reached [1;30m# features/daemon/container_lifecycle.feature:137[0m
    [32mGiven[0m [32ma daemon container with max_iterations 5[0m       [1;30m# container_lifecycle_steps.go:952 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe container completes 5 iterations[0m            [1;30m# container_lifecycle_steps.go:982 -> *containerLifecycleContext[0m
    [31mThen[0m [31mthe container should not continue running[0m       [1;30m# container_steps.go:691 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).ShouldContinue
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:222
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerShouldNotContinueRunning
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:528
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mAnd[0m [36mthe container current_iteration should be 5[0m      [1;30m# container_steps.go:683 -> *containerContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).ShouldContinue
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:222
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerShouldNotContinueRunning
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:528
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_restart_increments_restart_count

  [1;37mScenario:[0m Container restart increments restart_count               [1;30m# features/daemon/container_lifecycle.feature:147[0m
    [32mGiven[0m [32ma daemon container in "FAILED" status with restart_count 0[0m [1;30m# container_lifecycle_steps.go:939 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe daemon restarts the container[0m                           [1;30m# container_lifecycle_steps.go:970 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container status should be "PENDING"[0m                    [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    [31mAnd[0m [31mthe container restart_count should be 1[0m                      [1;30m# container_steps.go:684 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).RestartCount
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:121
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerRestartCountShouldBe
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:476
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mAnd[0m [36mthe container last_error should be nil[0m                       [1;30m# container_steps.go:689 -> *containerContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).RestartCount
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:121
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerRestartCountShouldBe
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:476
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_respects_max_restarts_policy_(3)

  [1;37mScenario:[0m Container respects max_restarts policy (3)               [1;30m# features/daemon/container_lifecycle.feature:154[0m
    [32mGiven[0m [32ma daemon container in "FAILED" status with restart_count 3[0m [1;30m# container_lifecycle_steps.go:939 -> *containerLifecycleContext[0m
    [31mWhen[0m [31mI check if the container can restart[0m                        [1;30m# container_steps.go:666 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).CanRestart
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:234
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iCheckIfTheContainerCanRestart
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:343
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe restart eligibility should be false[0m                     [1;30m# container_lifecycle_steps.go:1012 -> github.com/andrescamacho/spacetraders-go/test/bdd/steps.InitializeContainerLifecycleScenario.func3[0m
    [36mAnd[0m [36mthe container should remain in "FAILED" status[0m               [1;30m# container_lifecycle_steps.go:1015 -> *containerLifecycleContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).CanRestart
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:234
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iCheckIfTheContainerCanRestart
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:343
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_cannot_restart_after_exceeding_max_restarts

  [1;37mScenario:[0m Container cannot restart after exceeding max_restarts    [1;30m# features/daemon/container_lifecycle.feature:160[0m
    [32mGiven[0m [32ma daemon container in "FAILED" status with restart_count 3[0m [1;30m# container_lifecycle_steps.go:939 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mI attempt to restart the container[0m                          [1;30m# container_lifecycle_steps.go:972 -> *containerLifecycleContext[0m
    [31mThen[0m [31mthe restart operation should fail[0m                           [1;30m# container_lifecycle_steps.go:1016 -> *containerLifecycleContext[0m
    [1;31mexpected restart operation to fail but it succeeded[0m
    [36mAnd[0m [36mthe error should mention "cannot be restarted"[0m               [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
    [36mAnd[0m [36mthe container should remain in "FAILED" status[0m               [1;30m# container_lifecycle_steps.go:1015 -> *containerLifecycleContext[0m
    suite.go:640: expected restart operation to fail but it succeeded
=== RUN   TestFeatures/Container_maintains_player_id_through_restarts

  [1;37mScenario:[0m Container maintains player_id through restarts        [1;30m# features/daemon/container_lifecycle.feature:167[0m
    [32mGiven[0m [32ma daemon container with player_id 42 in "FAILED" status[0m [1;30m# container_lifecycle_steps.go:940 -> github.com/andrescamacho/spacetraders-go/test/bdd/steps.InitializeContainerLifecycleScenario.func2[0m
    [32mWhen[0m [32mthe daemon restarts the container[0m                        [1;30m# container_lifecycle_steps.go:970 -> *containerLifecycleContext[0m
    [31mThen[0m [31mthe container should have player_id 42[0m                   [1;30m# container_steps.go:680 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).PlayerID
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:118
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerShouldHavePlayerID
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:448
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mAnd[0m [36mthe container status should be "PENDING"[0m                  [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).PlayerID
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:118
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerShouldHavePlayerID
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:448
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_maintains_ship_assignment_through_restarts

  [1;37mScenario:[0m Container maintains ship assignment through restarts              [1;30m# features/daemon/container_lifecycle.feature:173[0m
    [32mGiven[0m [32ma daemon container with metadata "ship_symbol" = "SHIP-1"[0m           [1;30m# container_lifecycle_steps.go:946 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container is in "FAILED" status[0m                                   [1;30m# container_lifecycle_steps.go:947 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe daemon restarts the container[0m                                    [1;30m# container_lifecycle_steps.go:970 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe container metadata should still contain "ship_symbol" = "SHIP-1"[0m [1;30m# container_lifecycle_steps.go:1019 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container status should be "PENDING"[0m                              [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Container_tracks_multiple_restart_attempts

  [1;37mScenario:[0m Container tracks multiple restart attempts               [1;30m# features/daemon/container_lifecycle.feature:180[0m
    [32mGiven[0m [32ma daemon container in "FAILED" status with restart_count 0[0m [1;30m# container_lifecycle_steps.go:939 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe daemon restarts the container 2 times[0m                   [1;30m# container_lifecycle_steps.go:973 -> *containerLifecycleContext[0m
    [31mThen[0m [31mthe container restart_count should be 2[0m                     [1;30m# container_steps.go:684 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).RestartCount
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:121
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerRestartCountShouldBe
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:476
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mAnd[0m [36mthe container should still be eligible for restart[0m           [1;30m# container_lifecycle_steps.go:1020 -> *containerLifecycleContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).RestartCount
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:121
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerRestartCountShouldBe
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:476
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Multiple_containers_can_run_simultaneously

  [1;37mScenario:[0m Multiple containers can run simultaneously           [1;30m# features/daemon/container_lifecycle.feature:190[0m
    [32mGiven[0m [32m5 daemon containers are created[0m                        [1;30m# container_lifecycle_steps.go:948 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mthe daemon starts all containers[0m                        [1;30m# container_lifecycle_steps.go:974 -> *containerLifecycleContext[0m
    [32mThen[0m [32mall containers should have status "RUNNING"[0m             [1;30m# container_lifecycle_steps.go:1021 -> *containerLifecycleContext[0m
    [32mAnd[0m [32meach container should have a unique started_at timestamp[0m [1;30m# container_lifecycle_steps.go:1022 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Container_IDs_are_unique_and_sequential

  [1;37mScenario:[0m Container IDs are unique and sequential [1;30m# features/daemon/container_lifecycle.feature:196[0m
    [32mGiven[0m [32m10 daemon containers are created[0m          [1;30m# container_lifecycle_steps.go:948 -> *containerLifecycleContext[0m
    [32mThen[0m [32meach container should have a unique ID[0m     [1;30m# container_lifecycle_steps.go:1023 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container IDs should be sequential[0m      [1;30m# container_lifecycle_steps.go:1024 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Daemon_tracks_containers_independently

  [1;37mScenario:[0m Daemon tracks containers independently  [1;30m# features/daemon/container_lifecycle.feature:201[0m
    [31mGiven[0m [31m3 daemon containers exist:[0m                [1;30m# container_lifecycle_steps.go:949 -> *containerLifecycleContext[0m
      | [36mcontainer-1[0m | [36mRUNNING[0m   |
      | [36mcontainer-2[0m | [36mCOMPLETED[0m |
      | [36mcontainer-3[0m | [36mSTOPPED[0m   |
    [1;31mcannot convert argument 0: "3" of type "string" to *messages.PickleTable[0m
    [36mWhen[0m [36mI query container "container-1"[0m            [1;30m# container_lifecycle_steps.go:975 -> *containerLifecycleContext[0m
    [36mThen[0m [36mthe container status should be "RUNNING"[0m   [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    [36mWhen[0m [36mI query container "container-2"[0m            [1;30m# container_lifecycle_steps.go:975 -> *containerLifecycleContext[0m
    [36mThen[0m [36mthe container status should be "COMPLETED"[0m [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    [36mWhen[0m [36mI query container "container-3"[0m            [1;30m# container_lifecycle_steps.go:975 -> *containerLifecycleContext[0m
    [36mThen[0m [36mthe container status should be "STOPPED"[0m   [1;30m# container_lifecycle_steps.go:985 -> *containerLifecycleContext[0m
    suite.go:640: cannot convert argument 0: "3" of type "string" to *messages.PickleTable
=== RUN   TestFeatures/Completed_containers_can_be_removed_without_stopping

  [1;37mScenario:[0m Completed containers can be removed without stopping [1;30m# features/daemon/container_lifecycle.feature:217[0m
    [32mGiven[0m [32ma daemon container is in "COMPLETED" status[0m            [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mI remove the container[0m                                  [1;30m# container_lifecycle_steps.go:976 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe removal should succeed[0m                              [1;30m# container_lifecycle_steps.go:1025 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container should not appear in the list[0m              [1;30m# container_lifecycle_steps.go:1026 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Failed_containers_can_be_removed_without_stopping

  [1;37mScenario:[0m Failed containers can be removed without stopping [1;30m# features/daemon/container_lifecycle.feature:223[0m
    [32mGiven[0m [32ma daemon container is in "FAILED" status[0m            [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mI remove the container[0m                               [1;30m# container_lifecycle_steps.go:976 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe removal should succeed[0m                           [1;30m# container_lifecycle_steps.go:1025 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container should not appear in the list[0m           [1;30m# container_lifecycle_steps.go:1026 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Stopped_containers_can_be_removed_without_stopping

  [1;37mScenario:[0m Stopped containers can be removed without stopping [1;30m# features/daemon/container_lifecycle.feature:229[0m
    [32mGiven[0m [32ma daemon container is in "STOPPED" status[0m            [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mI remove the container[0m                                [1;30m# container_lifecycle_steps.go:976 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe removal should succeed[0m                            [1;30m# container_lifecycle_steps.go:1025 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container should not appear in the list[0m            [1;30m# container_lifecycle_steps.go:1026 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Running_containers_must_be_stopped_before_removal

  [1;37mScenario:[0m Running containers must be stopped before removal [1;30m# features/daemon/container_lifecycle.feature:235[0m
    [32mGiven[0m [32ma daemon container is in "RUNNING" status[0m           [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mI attempt to remove the container without stopping[0m   [1;30m# container_lifecycle_steps.go:977 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe removal should fail[0m                              [1;30m# container_lifecycle_steps.go:1027 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe error should mention "must be stopped first"[0m      [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe container should still appear in the list[0m         [1;30m# container_lifecycle_steps.go:1028 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Container_cannot_transition_from_COMPLETED_to_RUNNING

  [1;37mScenario:[0m Container cannot transition from COMPLETED to RUNNING            [1;30m# features/daemon/container_lifecycle.feature:246[0m
    [32mGiven[0m [32ma daemon container is in "COMPLETED" status[0m                        [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [31mWhen[0m [31mI attempt to start the container[0m                                    [1;30m# container_steps.go:648 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).Start
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:134
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iAttemptToStartTheContainer
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:250
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe operation should fail[0m                                           [1;30m# container_lifecycle_steps.go:1029 -> *containerLifecycleContext[0m
    [36mAnd[0m [36mthe error should mention "cannot start container in COMPLETED state"[0m [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
    [33mAnd[0m [33mthe container status should remain "COMPLETED"[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).Start
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:134
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iAttemptToStartTheContainer
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:250
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_cannot_transition_from_FAILED_to_RUNNING_without_restart

  [1;37mScenario:[0m Container cannot transition from FAILED to RUNNING without restart [1;30m# features/daemon/container_lifecycle.feature:253[0m
    [32mGiven[0m [32ma daemon container is in "FAILED" status[0m                             [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [31mWhen[0m [31mI attempt to start the container[0m                                      [1;30m# container_steps.go:648 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).Start
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:134
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iAttemptToStartTheContainer
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:250
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe operation should fail[0m                                             [1;30m# container_lifecycle_steps.go:1029 -> *containerLifecycleContext[0m
    [36mAnd[0m [36mthe error should mention "cannot start container in FAILED state"[0m      [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).Start
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:134
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iAttemptToStartTheContainer
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:250
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_cannot_be_completed_if_not_running

  [1;37mScenario:[0m Container cannot be completed if not running                      [1;30m# features/daemon/container_lifecycle.feature:259[0m
    [32mGiven[0m [32ma daemon container is in "PENDING" status[0m                           [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [31mWhen[0m [31mI attempt to complete the container[0m                                  [1;30m# container_steps.go:650 -> *containerContext[0m
    [1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).Complete
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:147
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iAttemptToCompleteTheContainer
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:260
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m
    [36mThen[0m [36mthe operation should fail[0m                                            [1;30m# container_lifecycle_steps.go:1029 -> *containerLifecycleContext[0m
    [36mAnd[0m [36mthe error should mention "cannot complete container in PENDING state"[0m [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
    suite.go:640: runtime error: invalid memory address or nil pointer dereference
        runtime.gopanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
        runtime.panicmem
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
        runtime.sigpanic
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
        github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).Complete
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:147
        github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iAttemptToCompleteTheContainer
        	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:260
        reflect.Value.call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
        reflect.Value.Call
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
        github.com/cucumber/godog/internal/models.(*StepDefinition).Run
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
        github.com/cucumber/godog.(*suite).runStep
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
        github.com/cucumber/godog.(*suite).runSteps
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
        github.com/cucumber/godog.(*suite).runPickle.func1
        	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
        testing.tRunner
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
        runtime.goexit
        	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223
=== RUN   TestFeatures/Container_stopped_at_timestamp_is_immutable_once_set

  [1;37mScenario:[0m Container stopped_at timestamp is immutable once set [1;30m# features/daemon/container_lifecycle.feature:265[0m
    [32mGiven[0m [32ma daemon container is in "COMPLETED" status[0m            [1;30m# container_lifecycle_steps.go:936 -> *containerLifecycleContext[0m
    [32mAnd[0m [32mthe stopped_at timestamp is recorded[0m                     [1;30m# container_lifecycle_steps.go:980 -> *containerLifecycleContext[0m
    [32mWhen[0m [32mtime advances by 5 seconds[0m                              [1;30m# container_lifecycle_steps.go:981 -> *containerLifecycleContext[0m
    [32mThen[0m [32mthe stopped_at timestamp should remain unchanged[0m        [1;30m# container_lifecycle_steps.go:1030 -> *containerLifecycleContext[0m

[1;37mFeature:[0m Container Logging & Persistence
  As a daemon system
  I need containers to log messages to the database with deduplication
  So that I can query container logs by ID, level, and time range with pagination
=== RUN   TestFeatures/Container_logs_INFO_messages_to_database

  [1;37mScenario:[0m Container logs INFO messages to database                              [1;30m# features/daemon/container_logging.feature:10[0m
    [33mGiven[0m [33ma container log repository with in-memory database[0m
    [33mAnd[0m [33ma container with ID "test-container-1" for player 1[0m
    [33mWhen[0m [33mI log an INFO message "Operation started successfully" for the container[0m
    [33mThen[0m [33mthe log should be persisted to the database[0m
    [33mAnd[0m [33mthe log level should be "INFO"[0m
    [33mAnd[0m [33mthe log message should be "Operation started successfully"[0m
=== RUN   TestFeatures/Container_logs_ERROR_messages_to_database

  [1;37mScenario:[0m Container logs ERROR messages to database                                    [1;30m# features/daemon/container_logging.feature:18[0m
    [33mGiven[0m [33ma container log repository with in-memory database[0m
    [33mAnd[0m [33ma container with ID "test-container-2" for player 1[0m
    [33mWhen[0m [33mI log an ERROR message "Navigation failed: insufficient fuel" for the container[0m
    [33mThen[0m [33mthe log should be persisted to the database[0m
    [33mAnd[0m [33mthe log level should be "ERROR"[0m
    [33mAnd[0m [33mthe log message should be "Navigation failed: insufficient fuel"[0m
=== RUN   TestFeatures/Container_logs_include_timestamp_and_container_id

  [1;37mScenario:[0m Container logs include timestamp and container_id               [1;30m# features/daemon/container_logging.feature:26[0m
    [33mGiven[0m [33ma container log repository with in-memory database[0m
    [33mAnd[0m [33ma container with ID "test-container-3" for player 1[0m
    [33mWhen[0m [33mI log an INFO message "Processing waypoint data" for the container[0m
    [33mThen[0m [33mthe log should be persisted to the database[0m
    [33mAnd[0m [33mthe log should have a container_id of "test-container-3"[0m
    [33mAnd[0m [33mthe log should have a player_id of 1[0m
    [33mAnd[0m [33mthe log should have a timestamp within the last 5 seconds[0m
=== RUN   TestFeatures/Container_logs_are_queryable_by_container_id

  [1;37mScenario:[0m Container logs are queryable by container_id        [1;30m# features/daemon/container_logging.feature:39[0m
    [33mGiven[0m [33ma container log repository with in-memory database[0m
    [33mAnd[0m [33ma container with ID "query-test-1" for player 1[0m
    [33mAnd[0m [33ma container with ID "query-test-2" for player 1[0m
    [33mWhen[0m [33mI log 3 INFO messages for container "query-test-1"[0m
    [33mAnd[0m [33mI log 2 ERROR messages for container "query-test-2"[0m
    [33mAnd[0m [33mI query logs for container "query-test-1" with limit 10[0m
    [33mThen[0m [33mI should receive exactly 3 log entries[0m
    [33mAnd[0m [33mall log entries should have container_id "query-test-1"[0m
=== RUN   TestFeatures/Container_logs_are_queryable_by_log_level

  [1;37mScenario:[0m Container logs are queryable by log level            [1;30m# features/daemon/container_logging.feature:49[0m
    [33mGiven[0m [33ma container log repository with in-memory database[0m
    [33mAnd[0m [33ma container with ID "level-test-1" for player 1[0m
    [33mWhen[0m [33mI log 2 INFO messages for the container[0m
    [33mAnd[0m [33mI log 3 ERROR messages for the container[0m
    [33mAnd[0m [33mI log 1 WARNING message for the container[0m
    [33mAnd[0m [33mI query logs for the container filtered by level "ERROR"[0m
    [33mThen[0m [33mI should receive exactly 3 log entries[0m
    [33mAnd[0m [33mall log entries should have level "ERROR"[0m
=== RUN   TestFeatures/Container_logs_deduplicate_within_60_seconds

  [1;37mScenario:[0m Container logs deduplicate within 60 seconds                                     [1;30m# features/daemon/container_logging.feature:63[0m
    [33mGiven[0m [33ma container log repository with in-memory database[0m
    [33mAnd[0m [33ma container with ID "dedup-test-1" for player 1[0m
    [33mWhen[0m [33mI log an INFO message "Duplicate message test" for the container[0m
    [33mAnd[0m [33mI log the same INFO message "Duplicate message test" 2 seconds later[0m
    [33mAnd[0m [33mI log the same INFO message "Duplicate message test" 30 seconds after the first log[0m
    [33mThen[0m [33mI should receive exactly 1 log entry when querying[0m
    [33mAnd[0m [33mthe log message should be "Duplicate message test"[0m
    [33mWhen[0m [33mI log the same INFO message "Duplicate message test" 65 seconds after the first log[0m
    [33mThen[0m [33mI should receive exactly 2 log entries when querying[0m
    [33mAnd[0m [33mboth entries should have the message "Duplicate message test"[0m
=== RUN   TestFeatures/Container_logs_support_pagination_with_limit_and_offset

  [1;37mScenario:[0m Container logs support pagination with limit and offset [1;30m# features/daemon/container_logging.feature:75[0m
    [33mGiven[0m [33ma container log repository with in-memory database[0m
    [33mAnd[0m [33ma container with ID "pagination-test-1" for player 1[0m
    [33mWhen[0m [33mI log 15 unique INFO messages for the container[0m
    [33mAnd[0m [33mI query logs with limit 5 and no offset[0m
    [33mThen[0m [33mI should receive exactly 5 log entries[0m
    [33mWhen[0m [33mI query logs with limit 5 and offset 5[0m
    [33mThen[0m [33mI should receive exactly 5 log entries[0m
    [33mAnd[0m [33mthe log entries should be different from the first page[0m
    [33mWhen[0m [33mI query logs with limit 5 and offset 10[0m
    [33mThen[0m [33mI should receive exactly 5 log entries[0m
    [33mWhen[0m [33mI query logs with limit 10 and offset 10[0m
    [33mThen[0m [33mI should receive exactly 5 log entries[0m
    [33mAnd[0m [33mthe total count of all logs should be 15[0m

[1;37mFeature:[0m Daemon Server Lifecycle
  As a SpaceTraders bot operator
  I need a daemon server to manage background operations
  So that CLI commands can execute asynchronously with proper lifecycle management
=== RUN   TestFeatures/Daemon_server_starts_and_listens_on_Unix_socket

  [1;37mScenario:[0m Daemon server starts and listens on Unix socket          [1;30m# features/daemon/daemon_server.feature:10[0m
    [33mGiven[0m [33mthe daemon server is not running[0m
    [33mWhen[0m [33mI start the daemon server on socket "/tmp/test-daemon.sock"[0m
    [33mThen[0m [33mthe daemon server should be running[0m
    [33mAnd[0m [33mthe Unix socket should exist at "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33mthe socket permissions should be 0600[0m
=== RUN   TestFeatures/Daemon_server_removes_existing_socket_on_startup

  [1;37mScenario:[0m Daemon server removes existing socket on startup         [1;30m# features/daemon/daemon_server.feature:17[0m
    [33mGiven[0m [33ma stale Unix socket exists at "/tmp/test-daemon.sock"[0m
    [33mWhen[0m [33mI start the daemon server on socket "/tmp/test-daemon.sock"[0m
    [33mThen[0m [33mthe daemon server should start successfully[0m
    [33mAnd[0m [33mthe Unix socket should exist at "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33mthe socket should be active[0m
=== RUN   TestFeatures/Daemon_server_fails_to_start_if_socket_path_is_invalid

  [1;37mScenario:[0m Daemon server fails to start if socket path is invalid                              [1;30m# features/daemon/daemon_server.feature:24[0m
    [33mGiven[0m [33mthe daemon server is not running[0m
    [33mWhen[0m [33mI attempt to start the daemon server on invalid socket "/nonexistent/path/daemon.sock"[0m
    [33mThen[0m [33mthe daemon startup should fail[0m
    [36mAnd[0m [36mthe error should mention "failed to create unix socket listener"[0m                        [1;30m# container_lifecycle_steps.go:1017 -> *containerLifecycleContext[0m
=== RUN   TestFeatures/Daemon_server_accepts_gRPC_client_connections

  [1;37mScenario:[0m Daemon server accepts gRPC client connections                [1;30m# features/daemon/daemon_server.feature:34[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mWhen[0m [33ma gRPC client connects to the Unix socket[0m
    [33mThen[0m [33mthe connection should be accepted[0m
    [33mAnd[0m [33mthe client should receive a valid gRPC server response[0m
=== RUN   TestFeatures/Daemon_server_handles_HealthCheck_request

  [1;37mScenario:[0m Daemon server handles HealthCheck request                    [1;30m# features/daemon/daemon_server.feature:40[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33ma gRPC client is connected[0m
    [33mWhen[0m [33mthe client sends a HealthCheck request[0m
    [33mThen[0m [33mthe response should have status "ok"[0m
    [33mAnd[0m [33mthe response should include version "0.1.0"[0m
    [33mAnd[0m [33mthe response should include active_containers count[0m
=== RUN   TestFeatures/Daemon_server_handles_NavigateShip_request

  [1;37mScenario:[0m Daemon server handles NavigateShip request                                    [1;30m# features/daemon/daemon_server.feature:52[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33ma gRPC client is connected[0m
    [33mAnd[0m [33ma ship "TEST-SHIP-1" exists for player 1[0m
    [33mWhen[0m [33mthe client sends a NavigateShip request for ship "TEST-SHIP-1" to "X1-TEST-DEST"[0m
    [33mThen[0m [33mthe response should include a container_id[0m
    [33mAnd[0m [33mthe response should have status "PENDING"[0m
    [33mAnd[0m [33mthe container should be registered in the daemon[0m
=== RUN   TestFeatures/Daemon_server_creates_container_for_navigation_operation

  [1;37mScenario:[0m Daemon server creates container for navigation operation                      [1;30m# features/daemon/daemon_server.feature:61[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33ma gRPC client is connected[0m
    [33mWhen[0m [33mthe client sends a NavigateShip request for ship "TEST-SHIP-1" to "X1-TEST-DEST"[0m
    [33mThen[0m [33ma container should be created with type "NAVIGATE"[0m
    [33mAnd[0m [33mthe container metadata should include ship_symbol "TEST-SHIP-1"[0m
    [33mAnd[0m [33mthe container metadata should include destination "X1-TEST-DEST"[0m
    [36mAnd[0m [36mthe container should have player_id 1[0m                                             [1;30m# container_steps.go:680 -> *containerContext[0m
=== RUN   TestFeatures/Daemon_server_returns_container_ID_immediately

  [1;37mScenario:[0m Daemon server returns container ID immediately                                [1;30m# features/daemon/daemon_server.feature:70[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33ma gRPC client is connected[0m
    [33mWhen[0m [33mthe client sends a NavigateShip request for ship "TEST-SHIP-1" to "X1-TEST-DEST"[0m
    [33mThen[0m [33mthe response should return within 100 milliseconds[0m
    [33mAnd[0m [33mthe response should include a container_id[0m
    [33mAnd[0m [33mthe container should not be in COMPLETED status yet[0m
=== RUN   TestFeatures/Daemon_server_continues_operation_in_background

  [1;37mScenario:[0m Daemon server continues operation in background                               [1;30m# features/daemon/daemon_server.feature:82[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33ma gRPC client is connected[0m
    [33mWhen[0m [33mthe client sends a NavigateShip request for ship "TEST-SHIP-1" to "X1-TEST-DEST"[0m
    [33mAnd[0m [33mthe client disconnects after receiving the container_id[0m
    [33mThen[0m [33mthe container should continue executing in the background[0m
    [33mAnd[0m [33mthe container status should eventually transition to "RUNNING"[0m
=== RUN   TestFeatures/Daemon_server_tracks_multiple_concurrent_operations

  [1;37mScenario:[0m Daemon server tracks multiple concurrent operations          [1;30m# features/daemon/daemon_server.feature:90[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33ma gRPC client is connected[0m
    [33mAnd[0m [33mships exist for player 1:[0m
      | [36mTEST-SHIP-1[0m |
      | [36mTEST-SHIP-2[0m |
      | [36mTEST-SHIP-3[0m |
    [33mWhen[0m [33mthe client sends NavigateShip requests for all 3 ships[0m
    [33mThen[0m [33m3 containers should be created[0m
    [33mAnd[0m [33mall containers should be registered in the daemon[0m
    [33mAnd[0m [33meach container should have a unique container_id[0m
=== RUN   TestFeatures/Daemon_server_initiates_graceful_shutdown_on_SIGTERM

  [1;37mScenario:[0m Daemon server initiates graceful shutdown on SIGTERM         [1;30m# features/daemon/daemon_server.feature:106[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33m2 containers are running in the background[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mThen[0m [33mthe daemon should initiate graceful shutdown[0m
    [33mAnd[0m [33mthe daemon should stop accepting new connections[0m
    [33mAnd[0m [33mthe daemon should wait for running containers to finish[0m
=== RUN   TestFeatures/Daemon_server_waits_for_containers_during_shutdown_(within_timeout)

  [1;37mScenario:[0m Daemon server waits for containers during shutdown (within timeout) [1;30m# features/daemon/daemon_server.feature:114[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33ma container is running that will complete in 5 seconds[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mThen[0m [33mthe daemon should wait for the container to complete[0m
    [33mAnd[0m [33mthe container should finish successfully[0m
    [33mAnd[0m [33mthe daemon should shut down gracefully[0m
=== RUN   TestFeatures/Daemon_server_enforces_30-second_shutdown_timeout

  [1;37mScenario:[0m Daemon server enforces 30-second shutdown timeout                   [1;30m# features/daemon/daemon_server.feature:122[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33ma container is running that will take 60 seconds to complete[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mThen[0m [33mthe daemon should wait up to 30 seconds[0m
    [33mAnd[0m [33mthe daemon should force shutdown after 30 seconds[0m
    [33mAnd[0m [33ma warning should be logged about containers not stopping within timeout[0m
=== RUN   TestFeatures/Daemon_server_stops_all_containers_on_forceful_shutdown

  [1;37mScenario:[0m Daemon server stops all containers on forceful shutdown      [1;30m# features/daemon/daemon_server.feature:130[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33m5 containers are running in the background[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mAnd[0m [33mthe 30-second timeout expires[0m
    [33mThen[0m [33mthe daemon should stop all running containers[0m
    [33mAnd[0m [33mall containers should transition to STOPPED status[0m
=== RUN   TestFeatures/Daemon_server_closes_database_connections_on_shutdown

  [1;37mScenario:[0m Daemon server closes database connections on shutdown        [1;30m# features/daemon/daemon_server.feature:142[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33mthe database has 10 active connections from the daemon[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mAnd[0m [33mthe daemon completes shutdown[0m
    [33mThen[0m [33mall database connections should be closed[0m
    [33mAnd[0m [33mthe connection pool should be released[0m
=== RUN   TestFeatures/Daemon_server_releases_all_ship_assignments_on_shutdown

  [1;37mScenario:[0m Daemon server releases all ship assignments on shutdown      [1;30m# features/daemon/daemon_server.feature:150[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33m3 ships are assigned to running containers[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mAnd[0m [33mthe daemon completes shutdown[0m
    [33mThen[0m [33mall ship assignments should be released[0m
    [33mAnd[0m [33mthe ship assignment release_reason should be "daemon_shutdown"[0m
    [33mAnd[0m [33mno ships should remain locked after shutdown[0m
=== RUN   TestFeatures/Daemon_server_removes_Unix_socket_on_shutdown

  [1;37mScenario:[0m Daemon server removes Unix socket on shutdown                [1;30m# features/daemon/daemon_server.feature:159[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mAnd[0m [33mthe daemon completes shutdown[0m
    [33mThen[0m [33mthe Unix socket at "/tmp/test-daemon.sock" should be removed[0m
    [33mAnd[0m [33mthe socket file should not exist[0m
=== RUN   TestFeatures/Daemon_server_prevents_memory_leaks_during_shutdown

  [1;37mScenario:[0m Daemon server prevents memory leaks during shutdown          [1;30m# features/daemon/daemon_server.feature:166[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33m100 containers have been executed and completed[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mAnd[0m [33mthe daemon completes shutdown[0m
    [33mThen[0m [33mall goroutines spawned by containers should terminate[0m
    [33mAnd[0m [33mno goroutine leaks should be present[0m
    [33mAnd[0m [33mthe daemon process should exit cleanly[0m
=== RUN   TestFeatures/Daemon_server_handles_SIGINT_signal_(Ctrl+C)

  [1;37mScenario:[0m Daemon server handles SIGINT signal (Ctrl+C)                 [1;30m# features/daemon/daemon_server.feature:179[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mWhen[0m [33mI send SIGINT signal to the daemon[0m
    [33mThen[0m [33mthe daemon should initiate graceful shutdown[0m
    [33mAnd[0m [33mthe daemon should shut down within 30 seconds[0m
=== RUN   TestFeatures/Daemon_server_handles_repeated_shutdown_signals_gracefully

  [1;37mScenario:[0m Daemon server handles repeated shutdown signals gracefully   [1;30m# features/daemon/daemon_server.feature:185[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33ma container is running in the background[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mAnd[0m [33mI send another SIGTERM signal 1 second later[0m
    [33mThen[0m [33mthe daemon should continue graceful shutdown[0m
    [33mAnd[0m [33mthe daemon should not panic or exit immediately[0m
    [33mAnd[0m [33mthe container should still be allowed to finish[0m
=== RUN   TestFeatures/Daemon_server_completes_shutdown_even_with_failing_containers

  [1;37mScenario:[0m Daemon server completes shutdown even with failing containers [1;30m# features/daemon/daemon_server.feature:194[0m
    [33mGiven[0m [33mthe daemon server is running on socket "/tmp/test-daemon.sock"[0m
    [33mAnd[0m [33m2 containers are running that will fail with errors[0m
    [33mWhen[0m [33mI send SIGTERM signal to the daemon[0m
    [33mThen[0m [33mthe daemon should wait for containers to fail[0m
    [33mAnd[0m [33mthe daemon should complete shutdown successfully[0m
    [33mAnd[0m [33mthe failed containers should be marked as FAILED[0m

[1;37mFeature:[0m Health Monitor - Container and Ship Health Monitoring
  As an autonomous bot operator
  I need the health monitor to detect and recover from stuck operations
  So that containers and ships don't remain in invalid states indefinitely
=== RUN   TestFeatures/Health_monitor_detects_stale_assignment_after_container_removed

  [1;37mBackground:[0m
    [33mGiven[0m [33mthe clock is mocked[0m
    [33mAnd[0m [33ma health monitor exists with check interval 60 seconds and recovery timeout 300 seconds[0m

  [1;37mScenario:[0m Health monitor detects stale assignment after container removed                                  [1;30m# features/daemon/health_monitor.feature:14[0m
    [33mGiven[0m [33ma ship "SHIP-1" with player ID 1 is assigned to container "container-123" for operation "navigate"[0m
    [33mAnd[0m [33mthe container "container-123" no longer exists[0m
    [33mWhen[0m [33mthe health monitor runs a check[0m
    [33mThen[0m [33mthe stale assignment for ship "SHIP-1" should be detected[0m
    [33mAnd[0m [33mthe ship assignment should be auto-released with reason "stale_cleanup"[0m
    [33mAnd[0m [33m1 stale assignment should be cleaned up[0m
=== RUN   TestFeatures/Health_monitor_ignores_valid_assignments

  [1;37mScenario:[0m Health monitor ignores valid assignments                                                         [1;30m# features/daemon/health_monitor.feature:22[0m
    [33mGiven[0m [33ma ship "SHIP-1" with player ID 1 is assigned to container "container-123" for operation "navigate"[0m
    [33mAnd[0m [33mthe container "container-123" exists and is running[0m
    [33mWhen[0m [33mthe health monitor runs a check[0m
    [33mThen[0m [33mthe ship assignment for "SHIP-1" should remain active[0m
    [33mAnd[0m [33m0 stale assignments should be cleaned up[0m
=== RUN   TestFeatures/Health_monitor_cleans_up_multiple_stale_assignments

  [1;37mScenario:[0m Health monitor cleans up multiple stale assignments                                              [1;30m# features/daemon/health_monitor.feature:29[0m
    [33mGiven[0m [33ma ship "SHIP-1" with player ID 1 is assigned to container "container-123" for operation "navigate"[0m
    [33mAnd[0m [33ma ship "SHIP-2" with player ID 1 is assigned to container "container-456" for operation "scout"[0m
    [33mAnd[0m [33ma ship "SHIP-3" with player ID 1 is assigned to container "container-789" for operation "dock"[0m
    [33mAnd[0m [33mno containers exist[0m
    [33mWhen[0m [33mthe health monitor runs a check[0m
    [33mThen[0m [33m3 stale assignments should be cleaned up[0m
    [33mAnd[0m [33mall ship assignments should be released with reason "stale_cleanup"[0m
=== RUN   TestFeatures/Health_monitor_detects_stuck_IN_TRANSIT_ship

  [1;37mScenario:[0m Health monitor detects stuck IN_TRANSIT ship                                        [1;30m# features/daemon/health_monitor.feature:42[0m
    [33mGiven[0m [33ma ship "SHIP-1" with navigation status "IN_TRANSIT" since 600 seconds ago[0m
    [33mAnd[0m [33ma container "container-123" exists for ship "SHIP-1" with status "RUNNING"[0m
    [33mAnd[0m [33mthe recovery timeout is 300 seconds[0m
    [33mWhen[0m [33mthe health monitor runs a check[0m
    [33mThen[0m [33mthe stuck ship "SHIP-1" should be detected[0m
    [33mAnd[0m [33ma warning should be logged about stuck ship "SHIP-1"[0m
    [33mAnd[0m [33mthe stuck ship count should be 1[0m
=== RUN   TestFeatures/Health_monitor_distinguishes_between_stuck_and_slow_operations

  [1;37mScenario:[0m Health monitor distinguishes between stuck and slow operations                      [1;30m# features/daemon/health_monitor.feature:51[0m
    [33mGiven[0m [33ma ship "SHIP-1" with navigation status "IN_TRANSIT" since 200 seconds ago[0m
    [33mAnd[0m [33mthe recovery timeout is 300 seconds[0m
    [33mWhen[0m [33mthe health monitor runs a check[0m
    [33mThen[0m [33mthe stuck ship "SHIP-1" should not be detected[0m
    [33mAnd[0m [33mthe stuck ship count should be 0[0m
=== RUN   TestFeatures/Health_monitor_detects_missing_arrival_for_completed_route

  [1;37mScenario:[0m Health monitor detects missing arrival for completed route                          [1;30m# features/daemon/health_monitor.feature:58[0m
    [33mGiven[0m [33ma ship "SHIP-1" with navigation status "IN_TRANSIT" since 600 seconds ago[0m
    [33mAnd[0m [33ma route for ship "SHIP-1" exists with status "COMPLETED"[0m
    [33mAnd[0m [33mthe ship has not arrived at its destination[0m
    [33mWhen[0m [33mthe health monitor runs a check[0m
    [33mThen[0m [33mthe stuck ship "SHIP-1" should be detected[0m
    [33mAnd[0m [33ma critical warning should be logged about route-ship state mismatch[0m
=== RUN   TestFeatures/Health_monitor_triggers_recovery_for_stuck_ship

  [1;37mScenario:[0m Health monitor triggers recovery for stuck ship                                     [1;30m# features/daemon/health_monitor.feature:70[0m
    [33mGiven[0m [33ma ship "SHIP-1" with navigation status "IN_TRANSIT" since 600 seconds ago[0m
    [33mAnd[0m [33ma container "container-123" exists for ship "SHIP-1" with status "RUNNING"[0m
    [33mAnd[0m [33mthe health monitor detects ship "SHIP-1" as stuck[0m
    [33mWhen[0m [33mthe health monitor attempts recovery for ship "SHIP-1"[0m
    [33mThen[0m [33ma recovery action should be initiated for ship "SHIP-1"[0m
    [33mAnd[0m [33mthe recovery attempt should be logged[0m
    [33mAnd[0m [33mthe recovery attempt count for ship "SHIP-1" should be 1[0m
=== RUN   TestFeatures/Health_monitor_recovery_succeeds_and_resumes_operation

  [1;37mScenario:[0m Health monitor recovery succeeds and resumes operation                              [1;30m# features/daemon/health_monitor.feature:79[0m
    [33mGiven[0m [33ma ship "SHIP-1" with navigation status "IN_TRANSIT" since 600 seconds ago[0m
    [33mAnd[0m [33ma container "container-123" exists for ship "SHIP-1" with status "RUNNING"[0m
    [33mAnd[0m [33mthe ship is stuck due to missing arrival[0m
    [33mWhen[0m [33mthe health monitor attempts recovery for ship "SHIP-1"[0m
    [33mAnd[0m [33mthe recovery action forces arrival at destination[0m
    [33mThen[0m [33mthe ship navigation status should transition to "IN_ORBIT"[0m
    [33mAnd[0m [33mthe container "container-123" should remain running[0m
    [33mAnd[0m [33mthe recovery should be marked as successful[0m
=== RUN   TestFeatures/Health_monitor_recovery_fails_and_marks_container_as_failed

  [1;37mScenario:[0m Health monitor recovery fails and marks container as failed                         [1;30m# features/daemon/health_monitor.feature:89[0m
    [33mGiven[0m [33ma ship "SHIP-1" with navigation status "IN_TRANSIT" since 600 seconds ago[0m
    [33mAnd[0m [33ma container "container-123" exists for ship "SHIP-1" with status "RUNNING"[0m
    [33mAnd[0m [33mthe recovery action will fail with error "API timeout"[0m
    [33mWhen[0m [33mthe health monitor attempts recovery for ship "SHIP-1"[0m
    [33mThen[0m [33mthe recovery should be marked as failed[0m
    [33mAnd[0m [33mthe container "container-123" should transition to "FAILED"[0m
    [33mAnd[0m [33man error should be logged with reason "API timeout"[0m
=== RUN   TestFeatures/Health_monitor_tracks_recovery_attempts_per_ship

  [1;37mScenario:[0m Health monitor tracks recovery attempts per ship                                    [1;30m# features/daemon/health_monitor.feature:102[0m
    [33mGiven[0m [33ma ship "SHIP-1" with navigation status "IN_TRANSIT" since 600 seconds ago[0m
    [33mWhen[0m [33mthe health monitor attempts recovery for ship "SHIP-1" 3 times[0m
    [33mThen[0m [33mthe recovery attempt count for ship "SHIP-1" should be 3[0m
    [33mAnd[0m [33mall recovery attempts should be persisted[0m
=== RUN   TestFeatures/Health_monitor_abandons_ship_after_max_recovery_attempts

  [1;37mScenario:[0m Health monitor abandons ship after max recovery attempts                            [1;30m# features/daemon/health_monitor.feature:108[0m
    [33mGiven[0m [33ma ship "SHIP-1" with navigation status "IN_TRANSIT" since 600 seconds ago[0m
    [33mAnd[0m [33ma container "container-123" exists for ship "SHIP-1" with status "RUNNING"[0m
    [33mAnd[0m [33mthe max recovery attempts is 5[0m
    [33mAnd[0m [33mthe ship has already failed recovery 5 times[0m
    [33mWhen[0m [33mthe health monitor runs a check[0m
    [33mThen[0m [33mthe ship "SHIP-1" should be marked as abandoned[0m
    [33mAnd[0m [33mthe container "container-123" should transition to "FAILED"[0m
    [33mAnd[0m [33ma critical error should be logged about abandoning ship "SHIP-1"[0m
=== RUN   TestFeatures/Health_monitor_clears_healthy_ship_from_watch_list

  [1;37mScenario:[0m Health monitor clears healthy ship from watch list                                  [1;30m# features/daemon/health_monitor.feature:118[0m
    [33mGiven[0m [33ma ship "SHIP-1" was previously stuck and is on the watch list[0m
    [33mAnd[0m [33mthe ship "SHIP-1" navigation status is now "IN_ORBIT"[0m
    [33mAnd[0m [33mthe ship has been healthy for 120 seconds[0m
    [33mWhen[0m [33mthe health monitor runs a check[0m
    [33mThen[0m [33mthe ship "SHIP-1" should be removed from watch list[0m
    [33mAnd[0m [33mthe recovery attempt count for ship "SHIP-1" should be reset to 0[0m
=== RUN   TestFeatures/Health_monitor_respects_cooldown_between_checks

  [1;37mScenario:[0m Health monitor respects cooldown between checks                                     [1;30m# features/daemon/health_monitor.feature:130[0m
    [33mGiven[0m [33mthe health monitor check interval is 60 seconds[0m
    [33mAnd[0m [33mthe health monitor last ran 30 seconds ago[0m
    [33mWhen[0m [33mthe health monitor is triggered to run[0m
    [33mThen[0m [33mthe health check should be skipped due to cooldown[0m
    [33mAnd[0m [33mno monitoring actions should be performed[0m
=== RUN   TestFeatures/Health_monitor_runs_after_cooldown_period_elapses

  [1;37mScenario:[0m Health monitor runs after cooldown period elapses                                   [1;30m# features/daemon/health_monitor.feature:137[0m
    [33mGiven[0m [33mthe health monitor check interval is 60 seconds[0m
    [33mAnd[0m [33mthe health monitor last ran 65 seconds ago[0m
    [33mWhen[0m [33mthe health monitor is triggered to run[0m
    [33mThen[0m [33mthe health check should execute[0m
    [33mAnd[0m [33mthe last check timestamp should be updated[0m
=== RUN   TestFeatures/Health_monitor_detects_infinite_loop_in_navigation

  [1;37mScenario:[0m Health monitor detects infinite loop in navigation                                  [1;30m# features/daemon/health_monitor.feature:148[0m
    [33mGiven[0m [33ma ship "SHIP-1" is assigned to container "container-123"[0m
    [33mAnd[0m [33mthe container "container-123" has completed 50 iterations in 120 seconds[0m
    [33mAnd[0m [33mthe container max iterations is -1[0m
    [33mAnd[0m [33mthe average iteration duration is 2.4 seconds[0m
    [33mWhen[0m [33mthe health monitor runs a check[0m
    [33mThen[0m [33ma suspicious rapid iteration pattern should be detected for container "container-123"[0m
    [33mAnd[0m [33ma warning should be logged about potential infinite loop[0m
=== RUN   TestFeatures/Health_monitor_reports_metrics_on_recovery_success_rate

  [1;37mScenario:[0m Health monitor reports metrics on recovery success rate                             [1;30m# features/daemon/health_monitor.feature:157[0m
    [33mGiven[0m [33mthe health monitor has attempted 20 recoveries[0m
    [33mAnd[0m [33m15 recoveries were successful[0m
    [33mAnd[0m [33m5 recoveries failed[0m
    [33mWhen[0m [33mthe health monitor reports metrics[0m
    [33mThen[0m [33mthe success rate should be 75 percent[0m
    [33mAnd[0m [33mthe total recovery attempts should be 20[0m
    [33mAnd[0m [33mthe failed recovery count should be 5[0m

[1;37mFeature:[0m Ship Assignment and Locking
  As a daemon orchestrator
  I want to track and enforce ship assignments to containers
  So that ships cannot be used by multiple operations concurrently
=== RUN   TestFeatures/Ship_can_be_assigned_to_container

  [1;37mBackground:[0m
    [33mGiven[0m [33ma player exists with id 1[0m
    [33mAnd[0m [33ma ship "TEST-SHIP-1" exists for player 1[0m

  [1;37mScenario:[0m Ship can be assigned to container                                                 [1;30m# features/daemon/ship_assignment.feature:14[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mWhen[0m [33mI assign ship "TEST-SHIP-1" to container "nav-container-1" with operation "navigate"[0m
    [33mThen[0m [33mship "TEST-SHIP-1" should be assigned to container "nav-container-1"[0m
    [33mAnd[0m [33mthe ship assignment status should be "active"[0m
    [33mAnd[0m [33mthe ship assignment operation should be "navigate"[0m
    [33mAnd[0m [33mthe ship assignment player_id should be 1[0m
    [33mAnd[0m [33mthe ship assignment should have an assigned_at timestamp[0m
=== RUN   TestFeatures/Ship_cannot_be_assigned_to_multiple_containers

  [1;37mScenario:[0m Ship cannot be assigned to multiple containers                                            [1;30m# features/daemon/ship_assignment.feature:23[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mAnd[0m [33ma container "dock-container-2" exists with type "DOCK" for player 1[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" is assigned to container "nav-container-1" with operation "navigate"[0m
    [33mWhen[0m [33mI attempt to assign ship "TEST-SHIP-1" to container "dock-container-2" with operation "dock"[0m
    [33mThen[0m [33mthe assignment should fail with error "ship is already assigned to another container"[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" should still be assigned to container "nav-container-1"[0m
=== RUN   TestFeatures/Ship_assignment_persists_in_database

  [1;37mScenario:[0m Ship assignment persists in database                                              [1;30m# features/daemon/ship_assignment.feature:31[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mWhen[0m [33mI assign ship "TEST-SHIP-1" to container "nav-container-1" with operation "navigate"[0m
    [33mThen[0m [33mthe ship assignment should be persisted in the database[0m
    [33mAnd[0m [33mquerying the database should return the assignment for ship "TEST-SHIP-1"[0m
=== RUN   TestFeatures/Ship_assignment_is_released_when_container_stops

  [1;37mScenario:[0m Ship assignment is released when container stops                                    [1;30m# features/daemon/ship_assignment.feature:41[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" is assigned to container "nav-container-1" with operation "navigate"[0m
    [33mWhen[0m [33mthe container "nav-container-1" transitions to "STOPPED" status[0m
    [33mAnd[0m [33mI release the ship assignment for "TEST-SHIP-1" with reason "container_stopped"[0m
    [33mThen[0m [33mship "TEST-SHIP-1" should no longer be assigned to any container[0m
    [33mAnd[0m [33mthe ship assignment should have a released_at timestamp[0m
    [33mAnd[0m [33mthe ship assignment release_reason should be "container_stopped"[0m
=== RUN   TestFeatures/Ship_assignment_is_released_when_container_fails

  [1;37mScenario:[0m Ship assignment is released when container fails                                    [1;30m# features/daemon/ship_assignment.feature:50[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" is assigned to container "nav-container-1" with operation "navigate"[0m
    [33mWhen[0m [33mthe container "nav-container-1" transitions to "FAILED" status[0m
    [33mAnd[0m [33mI release the ship assignment for "TEST-SHIP-1" with reason "container_failed"[0m
    [33mThen[0m [33mship "TEST-SHIP-1" should no longer be assigned to any container[0m
    [33mAnd[0m [33mthe ship assignment should have a released_at timestamp[0m
    [33mAnd[0m [33mthe ship assignment release_reason should be "container_failed"[0m
=== RUN   TestFeatures/Ship_assignment_is_released_when_daemon_stops_gracefully

  [1;37mScenario:[0m Ship assignment is released when daemon stops gracefully                            [1;30m# features/daemon/ship_assignment.feature:59[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" is assigned to container "nav-container-1" with operation "navigate"[0m
    [33mWhen[0m [33mthe daemon receives shutdown signal[0m
    [33mAnd[0m [33mI release all ship assignments with reason "daemon_shutdown"[0m
    [33mThen[0m [33mship "TEST-SHIP-1" should no longer be assigned to any container[0m
    [33mAnd[0m [33mthe ship assignment release_reason should be "daemon_shutdown"[0m
=== RUN   TestFeatures/Orphaned_ship_assignments_are_cleaned_on_daemon_startup

  [1;37mScenario:[0m Orphaned ship assignments are cleaned on daemon startup                                   [1;30m# features/daemon/ship_assignment.feature:71[0m
    [33mGiven[0m [33mship "TEST-SHIP-1" has an orphaned assignment to non-existent container "old-container-999"[0m
    [33mAnd[0m [33mthe assignment was created 2 hours ago[0m
    [33mWhen[0m [33mthe daemon starts up[0m
    [33mAnd[0m [33mI clean orphaned ship assignments[0m
    [33mThen[0m [33mship "TEST-SHIP-1" should no longer be assigned to any container[0m
    [33mAnd[0m [33mthe orphaned assignment cleanup count should be 1[0m
=== RUN   TestFeatures/Ship_assignment_includes_player_id_validation

  [1;37mScenario:[0m Ship assignment includes player_id validation                                                 [1;30m# features/daemon/ship_assignment.feature:83[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mAnd[0m [33ma ship "OTHER-SHIP-1" exists for player 2[0m
    [33mWhen[0m [33mI attempt to assign ship "OTHER-SHIP-1" to container "nav-container-1" with operation "navigate"[0m
    [33mThen[0m [33mthe assignment should fail with error "ship player_id mismatch"[0m
    [33mAnd[0m [33mship "OTHER-SHIP-1" should not be assigned to any container[0m
=== RUN   TestFeatures/Ship_assignment_prevents_concurrent_navigation_commands

  [1;37mScenario:[0m Ship assignment prevents concurrent navigation commands                             [1;30m# features/daemon/ship_assignment.feature:94[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" is assigned to container "nav-container-1" with operation "navigate"[0m
    [33mWhen[0m [33mI attempt to execute a navigation command for ship "TEST-SHIP-1"[0m
    [33mThen[0m [33mthe navigation command should be rejected with error "ship is locked by container"[0m
    [33mAnd[0m [33mthe error should include container_id "nav-container-1"[0m
=== RUN   TestFeatures/Ship_assignment_allows_read-only_queries_during_lock

  [1;37mScenario:[0m Ship assignment allows read-only queries during lock                                [1;30m# features/daemon/ship_assignment.feature:101[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" is assigned to container "nav-container-1" with operation "navigate"[0m
    [33mWhen[0m [33mI query ship details for "TEST-SHIP-1"[0m
    [36mThen[0m [36mthe query should succeed[0m                                                               [1;30m# get_market_data_steps.go:37 -> *getMarketDataContext[0m
    [33mAnd[0m [33mthe ship details should include assignment status "locked"[0m
    [33mAnd[0m [33mthe ship details should include container_id "nav-container-1"[0m
=== RUN   TestFeatures/Ship_assignment_lock_timeout_after_30_minutes

  [1;37mScenario:[0m Ship assignment lock timeout after 30 minutes                                       [1;30m# features/daemon/ship_assignment.feature:113[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" is assigned to container "nav-container-1" with operation "navigate"[0m
    [33mAnd[0m [33mthe assignment was created 31 minutes ago[0m
    [33mWhen[0m [33mI check if the ship assignment is stale[0m
    [33mThen[0m [33mthe assignment should be marked as stale[0m
    [33mAnd[0m [33mI should be able to forcefully release the stale assignment[0m
=== RUN   TestFeatures/Ship_assignment_reacquire_fails_if_still_locked

  [1;37mScenario:[0m Ship assignment reacquire fails if still locked                                     [1;30m# features/daemon/ship_assignment.feature:121[0m
    [33mGiven[0m [33ma container "nav-container-1" exists with type "NAVIGATE" for player 1[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" is assigned to container "nav-container-1" with operation "navigate"[0m
    [33mWhen[0m [33mI attempt to reassign ship "TEST-SHIP-1" from "nav-container-1" to "nav-container-2"[0m
    [33mThen[0m [33mthe reassignment should fail with error "ship is still locked"[0m
    [33mAnd[0m [33mship "TEST-SHIP-1" should still be assigned to container "nav-container-1"[0m

--- [31mFailed steps:[0m

  [31mScenario: Consume fuel with negative amount raises error[0m [1;30m# features/domain/navigation/ship_entity.feature:163[0m
    [31mThen the operation should fail with error "fuel amount cannot be negative"[0m [1;30m# features/domain/navigation/ship_entity.feature:166[0m
      [31mError: [0m[1;31mexpected error containing 'fuel amount cannot be negative' but got 'consume amount cannot be negative'[0m

  [31mScenario: Consume fuel more than available raises error[0m [1;30m# features/domain/navigation/ship_entity.feature:168[0m
    [31mWhen I attempt to consume 150 units of fuel[0m [1;30m# features/domain/navigation/ship_entity.feature:170[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Fuel).Consume
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/fuel.go:42
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iAttemptToConsumeUnitsOfFuel
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:166
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Select optimal flight mode with high fuel[0m [1;30m# features/domain/navigation/ship_entity.feature:279[0m
    [31mThen the selected mode should be BURN[0m [1;30m# features/domain/navigation/ship_entity.feature:282[0m
      [31mError: [0m[1;31mexpected mode 'BURN' but got 'CRUISE'[0m

  [31mScenario: Select optimal flight mode with low fuel[0m [1;30m# features/domain/navigation/ship_entity.feature:284[0m
    [31mThen the selected mode should be DRIFT[0m [1;30m# features/domain/navigation/ship_entity.feature:287[0m
      [31mError: [0m[1;31mexpected mode 'DRIFT' but got 'CRUISE'[0m

  [31mScenario: Select optimal flight mode with medium fuel[0m [1;30m# features/domain/navigation/ship_entity.feature:289[0m
    [31mGiven a ship with 104 units of fuel at distance 100[0m [1;30m# features/domain/navigation/ship_entity.feature:290[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/navigation.(*Ship).validate
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/navigation/ship.go:95
github.com/andrescamacho/spacetraders-go/internal/domain/navigation.NewShip
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/navigation/ship.go:75
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*shipContext).aShipWithUnitsOfFuelAtDistance
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/ship_steps.go:615
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Is cargo empty when empty[0m [1;30m# features/domain/navigation/ship_entity.feature:338[0m
    [31mWhen I check if cargo is empty[0m [1;30m# features/domain/navigation/ship_entity.feature:340[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsEmpty
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:108
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsEmpty
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:434
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Is cargo empty when not empty[0m [1;30m# features/domain/navigation/ship_entity.feature:343[0m
    [31mWhen I check if cargo is empty[0m [1;30m# features/domain/navigation/ship_entity.feature:345[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsEmpty
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:108
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsEmpty
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:434
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Is cargo full when full[0m [1;30m# features/domain/navigation/ship_entity.feature:348[0m
    [31mWhen I check if cargo is full[0m [1;30m# features/domain/navigation/ship_entity.feature:350[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsFull
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:113
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsFull
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:439
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Is cargo full when not full[0m [1;30m# features/domain/navigation/ship_entity.feature:353[0m
    [31mWhen I check if cargo is full[0m [1;30m# features/domain/navigation/ship_entity.feature:355[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/shared.(*Cargo).IsFull
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/shared/cargo.go:113
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*valueObjectContext).iCheckIfCargoIsFull
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/value_object_steps.go:439
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Create valid market with trade goods[0m [1;30m# features/domain/trading/market_entity.feature:3[0m
    [31mAnd the market should have 2 trade goods[0m [1;30m# features/domain/trading/market_entity.feature:10[0m
      [31mError: [0m[1;31mmarket should not be nil[0m

  [31mScenario: Create valid market with no trade goods[0m [1;30m# features/domain/trading/market_entity.feature:12[0m
    [31mAnd the market should have 0 trade goods[0m [1;30m# features/domain/trading/market_entity.feature:16[0m
      [31mError: [0m[1;31mmarket should not be nil[0m

  [31mScenario: Cannot create market with empty waypoint symbol[0m [1;30m# features/domain/trading/market_entity.feature:18[0m
    [31mThen I should get an error "waypoint symbol cannot be empty"[0m [1;30m# features/domain/trading/market_entity.feature:21[0m
      [31mError: [0m[1;31mexpected error 'waypoint symbol cannot be empty', got nil[0m

  [31mScenario: Dock ship when already docked[0m [1;30m# features/application/dock_ship.feature:10[0m
    [31mThen the command should succeed with status "already_docked"[0m [1;30m# features/application/dock_ship.feature:13[0m
      [31mError: [0m[1;31mexpected success but got error: ship not found[0m

  [31mScenario: Dock ship when in orbit[0m [1;30m# features/application/dock_ship.feature:16[0m
    [31mThen the command should succeed with status "docked"[0m [1;30m# features/application/dock_ship.feature:19[0m
      [31mError: [0m[1;31mexpected success but got error: ship not found[0m

  [31mScenario: Cannot dock ship when in transit[0m [1;30m# features/application/dock_ship.feature:22[0m
    [31mThen the command should fail with error "cannot dock while in transit"[0m [1;30m# features/application/dock_ship.feature:25[0m
      [31mError: [0m[1;31mexpected error 'cannot dock while in transit' but got 'ship not found'[0m

  [31mScenario: Negotiate new contract successfully[0m [1;30m# features/application/negotiate_contract.feature:10[0m
    [31mAnd the contract should not be accepted[0m [1;30m# features/application/negotiate_contract.feature:17[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/contract.(*Contract).Accepted
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/contract/contract.go:68
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*contractContext).theContractShouldNotBeAccepted
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/contract_steps.go:316
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Execute route with pre-departure refuel prevention[0m [1;30m# features/application/route_executor.feature:76[0m
    [31mAnd the ship should have prevented DRIFT mode by refueling at "X1-A1"[0m [1;30m# features/application/route_executor.feature:83[0m
      [31mError: [0m[1;31mship did not prevent DRIFT mode at X1-A1[0m

  [31mScenario: Handle ship already in transit - wait for arrival first[0m [1;30m# features/application/route_executor.feature:87[0m
    [31mThen the route executor should wait for current transit to complete[0m [1;30m# features/application/route_executor.feature:93[0m
      [31mError: [0m[1;31mroute executor did not wait for transit to complete[0m

  [31mScenario: Handle route execution failure - segment navigation fails[0m [1;30m# features/application/route_executor.feature:98[0m
    [31mAnd a route exists for ship "SHIP-1" with 1 segment from "X1-A1" to "X1-B2" in "CRUISE" mode requiring 125 fuel[0m [1;30m# features/application/route_executor.feature:102[0m
      [31mError: [0m[1;31msegment requires 125 fuel but ship capacity is 100[0m

  [31mScenario: Database query timeout after 30 seconds[0m [1;30m# features/infrastructure/database_retry.feature:50[0m
    [31mThen the query should fail with a timeout error[0m [1;30m# features/infrastructure/database_retry.feature:53[0m
      [31mError: [0m[1;31mexpected timeout error but query succeeded[0m

  [31mScenario: Container transitions to FAILED on error[0m [1;30m# features/daemon/container_lifecycle.feature:24[0m
    [31mAnd the container last_error should be "Navigation failed"[0m [1;30m# features/daemon/container_lifecycle.feature:29[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).LastError
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:128
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerLastErrorShouldBe
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:504
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: List containers shows correct status after completion[0m [1;30m# features/daemon/container_lifecycle.feature:67[0m
    [31mThen the container should appear with status "COMPLETED"[0m [1;30m# features/daemon/container_lifecycle.feature:71[0m
      [31mError: [0m[1;31mexpected container status 'COMPLETED' but got 'PENDING'[0m

  [31mScenario: Running containers excluded from finished containers list[0m [1;30m# features/daemon/container_lifecycle.feature:80[0m
    [31mGiven 3 daemon containers exist:[0m [1;30m# features/daemon/container_lifecycle.feature:81[0m
      [31mError: [0m[1;31mcannot convert argument 0: "3" of type "string" to *messages.PickleTable[0m

  [31mScenario: Container increments iteration count on loop[0m [1;30m# features/daemon/container_lifecycle.feature:119[0m
    [31mAnd the container should continue running[0m [1;30m# features/daemon/container_lifecycle.feature:123[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).ShouldContinue
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:222
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerShouldContinueRunning
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:521
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Container respects max_iterations limit[0m [1;30m# features/daemon/container_lifecycle.feature:125[0m
    [31mThen the container current_iteration should be 3[0m [1;30m# features/daemon/container_lifecycle.feature:128[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).CurrentIteration
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:119
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerCurrentIterationShouldBe
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:469
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Container with -1 iterations runs indefinitely[0m [1;30m# features/daemon/container_lifecycle.feature:131[0m
    [31mWhen I check if the container should continue[0m [1;30m# features/daemon/container_lifecycle.feature:133[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).ShouldContinue
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:222
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iCheckIfTheContainerShouldContinue
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:337
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Container exits after max_iterations reached[0m [1;30m# features/daemon/container_lifecycle.feature:137[0m
    [31mThen the container should not continue running[0m [1;30m# features/daemon/container_lifecycle.feature:140[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).ShouldContinue
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:222
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerShouldNotContinueRunning
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:528
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Container restart increments restart_count[0m [1;30m# features/daemon/container_lifecycle.feature:147[0m
    [31mAnd the container restart_count should be 1[0m [1;30m# features/daemon/container_lifecycle.feature:151[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).RestartCount
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:121
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerRestartCountShouldBe
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:476
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Container respects max_restarts policy (3)[0m [1;30m# features/daemon/container_lifecycle.feature:154[0m
    [31mWhen I check if the container can restart[0m [1;30m# features/daemon/container_lifecycle.feature:156[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).CanRestart
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:234
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iCheckIfTheContainerCanRestart
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:343
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Container cannot restart after exceeding max_restarts[0m [1;30m# features/daemon/container_lifecycle.feature:160[0m
    [31mThen the restart operation should fail[0m [1;30m# features/daemon/container_lifecycle.feature:163[0m
      [31mError: [0m[1;31mexpected restart operation to fail but it succeeded[0m

  [31mScenario: Container maintains player_id through restarts[0m [1;30m# features/daemon/container_lifecycle.feature:167[0m
    [31mThen the container should have player_id 42[0m [1;30m# features/daemon/container_lifecycle.feature:170[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).PlayerID
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:118
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerShouldHavePlayerID
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:448
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Container tracks multiple restart attempts[0m [1;30m# features/daemon/container_lifecycle.feature:180[0m
    [31mThen the container restart_count should be 2[0m [1;30m# features/daemon/container_lifecycle.feature:183[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).RestartCount
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:121
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).theContainerRestartCountShouldBe
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:476
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Daemon tracks containers independently[0m [1;30m# features/daemon/container_lifecycle.feature:201[0m
    [31mGiven 3 daemon containers exist:[0m [1;30m# features/daemon/container_lifecycle.feature:202[0m
      [31mError: [0m[1;31mcannot convert argument 0: "3" of type "string" to *messages.PickleTable[0m

  [31mScenario: Container cannot transition from COMPLETED to RUNNING[0m [1;30m# features/daemon/container_lifecycle.feature:246[0m
    [31mWhen I attempt to start the container[0m [1;30m# features/daemon/container_lifecycle.feature:248[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).Start
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:134
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iAttemptToStartTheContainer
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:250
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Container cannot transition from FAILED to RUNNING without restart[0m [1;30m# features/daemon/container_lifecycle.feature:253[0m
    [31mWhen I attempt to start the container[0m [1;30m# features/daemon/container_lifecycle.feature:255[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).Start
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:134
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iAttemptToStartTheContainer
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:250
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m

  [31mScenario: Container cannot be completed if not running[0m [1;30m# features/daemon/container_lifecycle.feature:259[0m
    [31mWhen I attempt to complete the container[0m [1;30m# features/daemon/container_lifecycle.feature:261[0m
      [31mError: [0m[1;31mruntime error: invalid memory address or nil pointer dereference
runtime.gopanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:787
runtime.panicmem
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/panic.go:262
runtime.sigpanic
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/signal_unix.go:925
github.com/andrescamacho/spacetraders-go/internal/domain/container.(*Container).Complete
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/internal/domain/container/container.go:147
github.com/andrescamacho/spacetraders-go/test/bdd/steps.(*containerContext).iAttemptToCompleteTheContainer
	/Users/andres.camacho/Development/Personal/spacetraders/gobot/test/bdd/steps/container_steps.go:260
reflect.Value.call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:581
reflect.Value.Call
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/reflect/value.go:365
github.com/cucumber/godog/internal/models.(*StepDefinition).Run
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/internal/models/stepdef.go:241
github.com/cucumber/godog.(*suite).runStep
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:291
github.com/cucumber/godog.(*suite).runSteps
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:582
github.com/cucumber/godog.(*suite).runPickle.func1
	/Users/andres.camacho/go/pkg/mod/github.com/cucumber/godog@v0.15.1/suite.go:638
testing.tRunner
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/testing/testing.go:1792
runtime.goexit
	/Users/andres.camacho/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.0.darwin-arm64/src/runtime/asm_arm64.s:1223[0m


563 scenarios ([32m326 passed[0m, [31m36 failed[0m, [33m202 undefined[0m)
3007 steps ([32m1766 passed[0m, [31m36 failed[0m, [33m1085 undefined[0m, [36m120 skipped[0m)
6.510421666s

[33mYou can implement step definitions for undefined steps with these snippets:[0m
[33m
func aContainerExistsForShipWithStatus(arg1, arg2, arg3 string) error {
	return godog.ErrPending
}

func aContainerExistsWithTypeForPlayer(arg1, arg2 string, arg3 int) error {
	return godog.ErrPending
}

func aContainerIsRunningInTheBackground() error {
	return godog.ErrPending
}

func aContainerIsRunningThatWillCompleteInSeconds(arg1 int) error {
	return godog.ErrPending
}

func aContainerIsRunningThatWillTakeSecondsToComplete(arg1 int) error {
	return godog.ErrPending
}

func aContainerLogRepositoryWithInmemoryDatabase() error {
	return godog.ErrPending
}

func aContainerShouldBeCreatedWithType(arg1 string) error {
	return godog.ErrPending
}

func aContainerWithIDForPlayer(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func aContractRepository() error {
	return godog.ErrPending
}

func aCriticalErrorShouldBeLoggedAboutAbandoningShip(arg1 string) error {
	return godog.ErrPending
}

func aCriticalWarningShouldBeLoggedAboutRouteshipStateMismatch() error {
	return godog.ErrPending
}

func aGRPCClientConnectsToTheUnixSocket() error {
	return godog.ErrPending
}

func aGRPCClientIsConnected() error {
	return godog.ErrPending
}

func aHealthMonitorExistsWithCheckIntervalSecondsAndRecoveryTimeoutSeconds(arg1, arg2 int) error {
	return godog.ErrPending
}

func aMediatorIsInitialized() error {
	return godog.ErrPending
}

func aMockAPIClient() error {
	return godog.ErrPending
}

func aNewlyCreatedRoute() error {
	return godog.ErrPending
}

func aPIReturnsSegmentTravelTimeOfSeconds(arg1 int) error {
	return godog.ErrPending
}

func aPIReturnsTravelTimeInThePast() error {
	return godog.ErrPending
}

func aPlayerExistsWithId(arg1 int) error {
	return godog.ErrPending
}

func aPlayerExistsWithToken(arg1, arg2 string) error {
	return godog.ErrPending
}

func aPlayerRepository() error {
	return godog.ErrPending
}

func aPlayerWithIDAndToken(arg1 int, arg2 string) error {
	return godog.ErrPending
}

func aRecoveryActionShouldBeInitiatedForShip(arg1 string) error {
	return godog.ErrPending
}

func aRouteForShipExistsWithStatus(arg1, arg2 string) error {
	return godog.ErrPending
}

func aRouteInStatus(arg1 string) error {
	return godog.ErrPending
}

func aRouteInStatusWithSegments(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func aRouteSegmentRequiringUnitsOfFuelInCRUISEMode(arg1 int) error {
	return godog.ErrPending
}

func aRouteSegmentRequiringUnitsOfFuelInDRIFTMode(arg1 int) error {
	return godog.ErrPending
}

func aRouteWithASingleSegment(arg1 *godog.Table) error {
	return godog.ErrPending
}

func aRouteWithRefuel_before_departureFalse() error {
	return godog.ErrPending
}

func aRouteWithRefuel_before_departureTrue() error {
	return godog.ErrPending
}

func aRouteWithSegments(arg1 int) error {
	return godog.ErrPending
}

func aRouteWithSegmentsHavingDistances(arg1 *godog.Table) error {
	return godog.ErrPending
}

func aRouteWithSegmentsHavingTravelTimes(arg1 *godog.Table) error {
	return godog.ErrPending
}

func aRouteWithSegmentsRequiringFuel(arg1 *godog.Table) error {
	return godog.ErrPending
}

func aShipAtWithUnitsOfFuelAndCapacity(arg1 string, arg2, arg3 int) error {
	return godog.ErrPending
}

func aShipExistsForPlayer(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func aShipIsAssignedToContainer(arg1, arg2 string) error {
	return godog.ErrPending
}

func aShipOwnedByPlayerAtWaypointWithInCargo(arg1 string, arg2 int, arg3 string, arg4 int, arg5 string) error {
	return godog.ErrPending
}

func aShipRepository() error {
	return godog.ErrPending
}

func aShipWasPreviouslyStuckAndIsOnTheWatchList(arg1 string) error {
	return godog.ErrPending
}

func aShipWithNavigationStatusSinceSecondsAgo(arg1, arg2 string, arg3 int) error {
	return godog.ErrPending
}

func aShipWithPlayerIDIsAssignedToContainerForOperation(arg1 string, arg2 int, arg3, arg4 string) error {
	return godog.ErrPending
}

func aStaleUnixSocketExistsAt(arg1 string) error {
	return godog.ErrPending
}

func aSuspiciousRapidIterationPatternShouldBeDetectedForContainer(arg1 string) error {
	return godog.ErrPending
}

func aWarningShouldBeLoggedAboutContainersNotStoppingWithinTimeout() error {
	return godog.ErrPending
}

func aWarningShouldBeLoggedAboutParsingFailure() error {
	return godog.ErrPending
}

func aWarningShouldBeLoggedAboutPotentialInfiniteLoop() error {
	return godog.ErrPending
}

func aWarningShouldBeLoggedAboutStuckShip(arg1 string) error {
	return godog.ErrPending
}

func aWaypointWithOrbitals(arg1, arg2 string) error {
	return godog.ErrPending
}

func allContainersShouldBeRegisteredInTheDaemon() error {
	return godog.ErrPending
}

func allContainersShouldTransitionToSTOPPEDStatus() error {
	return godog.ErrPending
}

func allDatabaseConnectionsShouldBeClosed() error {
	return godog.ErrPending
}

func allGoroutinesSpawnedByContainersShouldTerminate() error {
	return godog.ErrPending
}

func allLogEntriesShouldHaveContainer_id(arg1 string) error {
	return godog.ErrPending
}

func allLogEntriesShouldHaveLevel(arg1 string) error {
	return godog.ErrPending
}

func allRecoveryAttemptsShouldBePersisted() error {
	return godog.ErrPending
}

func allShipAssignmentsShouldBeReleased() error {
	return godog.ErrPending
}

func allShipAssignmentsShouldBeReleasedWithReason(arg1 string) error {
	return godog.ErrPending
}

func allWaypointsShouldBeSavedInTheDatabase() error {
	return godog.ErrPending
}

func anAcceptedContractForPlayerWithAllDeliveriesFulfilled(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func anAcceptedContractForPlayerWithDeliveryOfTo(arg1 string, arg2, arg3 int, arg4, arg5 string) error {
	return godog.ErrPending
}

func anAcceptedContractForPlayerWithIncompleteDeliveries(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func anAcceptedContractForPlayerWithOfAlreadyDeliveredTo(arg1 string, arg2, arg3, arg4 int, arg5, arg6 string) error {
	return godog.ErrPending
}

func anErrorShouldBeLoggedWithReason(arg1 string) error {
	return godog.ErrPending
}

func anInmemoryDatabaseIsInitialized() error {
	return godog.ErrPending
}

func bothDistancesShouldBeEqual() error {
	return godog.ErrPending
}

func bothEntriesShouldHaveTheMessage(arg1 string) error {
	return godog.ErrPending
}

func containersAreRunningInTheBackground(arg1 int) error {
	return godog.ErrPending
}

func containersAreRunningThatWillFailWithErrors(arg1 int) error {
	return godog.ErrPending
}

func containersHaveBeenExecutedAndCompleted(arg1 int) error {
	return godog.ErrPending
}

func containersShouldBeCreated(arg1 int) error {
	return godog.ErrPending
}

func currentLocationHasFuelAvailable() error {
	return godog.ErrPending
}

func currentLocationShouldBe(arg1 string) error {
	return godog.ErrPending
}

func currentTimeIs(arg1 string) error {
	return godog.ErrPending
}

func destinationExistsButRoutingEngineFindsNoPath(arg1 string) error {
	return godog.ErrPending
}

func dockAPIIsCalled() error {
	return godog.ErrPending
}

func dockAPIReturnsError(arg1 string) error {
	return godog.ErrPending
}

func eachContainerShouldHaveAUniqueContainer_id() error {
	return godog.ErrPending
}

func finalStatusShouldBeIN_ORBITAt(arg1 string) error {
	return godog.ErrPending
}

func flightModeShouldBeSetToBeforeNavigateAPICall(arg1 string) error {
	return godog.ErrPending
}

func fuelShouldBeAt(arg1 int) error {
	return godog.ErrPending
}

func handlerShouldAddSecondBuffer(arg1 int) error {
	return godog.ErrPending
}

func handlerShouldCalculateWaitTimeAsSeconds(arg1 int) error {
	return godog.ErrPending
}

func hasRefuelAtStartShouldReturnFalse() error {
	return godog.ErrPending
}

func hasRefuelAtStartShouldReturnTrue() error {
	return godog.ErrPending
}

func iAbortTheRouteWithReason(arg1 string) error {
	return godog.ErrPending
}

func iAddUnitsOfFuel(arg1 int) error {
	return godog.ErrPending
}

func iAssignShipToContainerWithOperation(arg1, arg2, arg3 string) error {
	return godog.ErrPending
}

func iAttemptToAddUnitsOfFuel(arg1 int) error {
	return godog.ErrPending
}

func iAttemptToAssignShipToContainerWithOperation(arg1, arg2, arg3 string) error {
	return godog.ErrPending
}

func iAttemptToCompleteTheCurrentSegment() error {
	return godog.ErrPending
}

func iAttemptToCreateCargoWithCapacityUnitsAndInventory(arg1, arg2 int) error {
	return godog.ErrPending
}

func iAttemptToExecuteANavigationCommandForShip(arg1 string) error {
	return godog.ErrPending
}

func iAttemptToReassignShipFromTo(arg1, arg2, arg3 string) error {
	return godog.ErrPending
}

func iAttemptToStartRouteExecution() error {
	return godog.ErrPending
}

func iAttemptToStartTheDaemonServerOnInvalidSocket(arg1 string) error {
	return godog.ErrPending
}

func iCalculateRouteTotals() error {
	return godog.ErrPending
}

func iCalculateTheTotalDistance() error {
	return godog.ErrPending
}

func iCalculateTheTotalFuelRequired() error {
	return godog.ErrPending
}

func iCalculateTheTotalTravelTime() error {
	return godog.ErrPending
}

func iCalculateWaitTimeForArrivalAt(arg1 string) error {
	return godog.ErrPending
}

func iCallIsComplete() error {
	return godog.ErrPending
}

func iCallIsFailed() error {
	return godog.ErrPending
}

func iCallNextSegment() error {
	return godog.ErrPending
}

func iCheckIfFuelCanTravelRequiringWithSafetyMargin(arg1, arg2, arg3 int) error {
	return godog.ErrPending
}

func iCheckIfFuelIsFull() error {
	return godog.ErrPending
}

func iCheckIfIsOrbitalOf(arg1, arg2 string) error {
	return godog.ErrPending
}

func iCheckIfShipShouldPreventDriftModeWithThreshold(arg1, arg2 int) error {
	return godog.ErrPending
}

func iCheckIfShipShouldRefuelOpportunisticallyAtWithThreshold(arg1 string, arg2, arg3 int) error {
	return godog.ErrPending
}

func iCheckIfTheShipAssignmentIsStale() error {
	return godog.ErrPending
}

func iCleanOrphanedShipAssignments() error {
	return godog.ErrPending
}

func iCompleteTheCurrentSegment() error {
	return godog.ErrPending
}

func iExecuteOrbitShipCommandForShipAndPlayer(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func iExecuteSetFlightModeCommandForShipAndPlayerWithMode(arg1 string, arg2 int, arg3 string) error {
	return godog.ErrPending
}

func iExtractTheSystemSymbolFromWaypoint(arg1 string) error {
	return godog.ErrPending
}

func iFailTheRouteWithReason(arg1 string) error {
	return godog.ErrPending
}

func iFilterWaypointsForSystemByTrait(arg1, arg2 string) error {
	return godog.ErrPending
}

func iFilterWaypointsForSystemByType(arg1, arg2 string) error {
	return godog.ErrPending
}

func iFilterWaypointsForSystemWithFuelAvailable(arg1 string) error {
	return godog.ErrPending
}

func iGetTheCurrentSegment() error {
	return godog.ErrPending
}

func iGetTheCurrentSegmentIndex() error {
	return godog.ErrPending
}

func iGetTheNameOfBURNMode() error {
	return godog.ErrPending
}

func iGetTheNameOfCRUISEMode() error {
	return godog.ErrPending
}

func iGetTheNameOfDRIFTMode() error {
	return godog.ErrPending
}

func iGetTheNameOfSTEALTHMode() error {
	return godog.ErrPending
}

func iGetTheRemainingSegments() error {
	return godog.ErrPending
}

func iListWaypointsForSystem(arg1 string) error {
	return godog.ErrPending
}

func iLogAnERRORMessageForTheContainer(arg1 string) error {
	return godog.ErrPending
}

func iLogAnINFOMessageForTheContainer(arg1 string) error {
	return godog.ErrPending
}

func iLogERRORMessagesForContainer(arg1 int, arg2 string) error {
	return godog.ErrPending
}

func iLogERRORMessagesForTheContainer(arg1 int) error {
	return godog.ErrPending
}

func iLogINFOMessagesForContainer(arg1 int, arg2 string) error {
	return godog.ErrPending
}

func iLogINFOMessagesForTheContainer(arg1 int) error {
	return godog.ErrPending
}

func iLogTheSameINFOMessageSecondsAfterTheFirstLog(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func iLogTheSameINFOMessageSecondsLater(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func iLogUniqueINFOMessagesForTheContainer(arg1 int) error {
	return godog.ErrPending
}

func iLogWARNINGMessageForTheContainer(arg1 int) error {
	return godog.ErrPending
}

func iNavigateTo(arg1, arg2 string) error {
	return godog.ErrPending
}

func iQueryLogsForContainerWithLimit(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func iQueryLogsForTheContainerFilteredByLevel(arg1 string) error {
	return godog.ErrPending
}

func iQueryLogsWithLimitAndNoOffset(arg1 int) error {
	return godog.ErrPending
}

func iQueryLogsWithLimitAndOffset(arg1, arg2 int) error {
	return godog.ErrPending
}

func iQueryShipDetailsFor(arg1 string) error {
	return godog.ErrPending
}

func iQueryWaypointFromSystem(arg1, arg2 string) error {
	return godog.ErrPending
}

func iReleaseAllShipAssignmentsWithReason(arg1 string) error {
	return godog.ErrPending
}

func iReleaseTheShipAssignmentForWithReason(arg1, arg2 string) error {
	return godog.ErrPending
}

func iSaveWaypointForSystemWith(arg1, arg2 string, arg3 *godog.Table) error {
	return godog.ErrPending
}

func iSaveWaypointForSystemWithOrbitals(arg1, arg2 string, arg3 *godog.Table) error {
	return godog.ErrPending
}

func iSaveWaypointsForSystemWith(arg1 string, arg2 *godog.Table) error {
	return godog.ErrPending
}

func iSendAnotherSIGTERMSignalSecondLater(arg1 int) error {
	return godog.ErrPending
}

func iSendDeliverContractCommandWithContractShipTradeUnitsPlayer(arg1, arg2, arg3 string, arg4, arg5 int) error {
	return godog.ErrPending
}

func iSendFulfillContractCommandForWithPlayer(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func iSendSIGINTSignalToTheDaemon() error {
	return godog.ErrPending
}

func iSendSIGTERMSignalToTheDaemon() error {
	return godog.ErrPending
}

func iShouldBeAbleToForcefullyReleaseTheStaleAssignment() error {
	return godog.ErrPending
}

func iShouldReceiveExactlyLogEntries(arg1 int) error {
	return godog.ErrPending
}

func iShouldReceiveExactlyLogEntriesWhenQuerying(arg1 int) error {
	return godog.ErrPending
}

func iShouldReceiveExactlyLogEntryWhenQuerying(arg1 int) error {
	return godog.ErrPending
}

func iShouldReceiveTheWaypoint() error {
	return godog.ErrPending
}

func iShouldReceiveWaypoint(arg1 int) error {
	return godog.ErrPending
}

func iShouldReceiveWaypoints(arg1 int) error {
	return godog.ErrPending
}

func iStartRouteExecution() error {
	return godog.ErrPending
}

func iStartTheDaemonServerOnSocket(arg1 string) error {
	return godog.ErrPending
}

func itShouldBeTheFirstSegment() error {
	return godog.ErrPending
}

func itShouldBeTheSecondSegment() error {
	return godog.ErrPending
}

func itShouldReturnFalse() error {
	return godog.ErrPending
}

func itShouldReturnNil() error {
	return godog.ErrPending
}

func itShouldReturnTheFirstSegment() error {
	return godog.ErrPending
}

func itShouldReturnTheSecondSegment() error {
	return godog.ErrPending
}

func itShouldReturnTrue() error {
	return godog.ErrPending
}

func logShouldMention(arg1 string) error {
	return godog.ErrPending
}

func navigateAPIIsCalled() error {
	return godog.ErrPending
}

func navigateAPIReturnsError(arg1 string) error {
	return godog.ErrPending
}

func navigationAPICompletes() error {
	return godog.ErrPending
}

func navigationAPIIsCalled() error {
	return godog.ErrPending
}

func navigationBeginsForTheSegment() error {
	return godog.ErrPending
}

func navigationExecutes() error {
	return godog.ErrPending
}

func navigationShouldSucceed() error {
	return godog.ErrPending
}

func navigationToConsumesFuel(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func noAPICallsShouldBeMade() error {
	return godog.ErrPending
}

func noContainersExist() error {
	return godog.ErrPending
}

func noFuelConsumptionShouldOccur() error {
	return godog.ErrPending
}

func noGoroutineLeaksShouldBePresent() error {
	return godog.ErrPending
}

func noMonitoringActionsShouldBePerformed() error {
	return godog.ErrPending
}

func noNavigateAPICallsShouldBeMade() error {
	return godog.ErrPending
}

func noRefuelAtCBecauseNoFuelStation(arg1 int) error {
	return godog.ErrPending
}

func noRefuelChecksShouldExecute() error {
	return godog.ErrPending
}

func noShipsShouldRemainLockedAfterShutdown() error {
	return godog.ErrPending
}

func noSleepShouldOccur() error {
	return godog.ErrPending
}

func onlyThePlannedRefuelShouldExecute() error {
	return godog.ErrPending
}

func opportunisticRefuelShouldNOTTrigger() error {
	return godog.ErrPending
}

func opportunisticRefuelShouldTrigger() error {
	return godog.ErrPending
}

func opportunisticRefuelShouldTriggerAtB(arg1 int) error {
	return godog.ErrPending
}

func orbitAPIIsCalled() error {
	return godog.ErrPending
}

func plannedRefuelShouldExecuteAtD(arg1 int) error {
	return godog.ErrPending
}

func predepartureRefuelShouldNOTTrigger() error {
	return godog.ErrPending
}

func predepartureRefuelShouldTrigger() error {
	return godog.ErrPending
}

func queryingTheDatabaseShouldReturnTheAssignmentForShip(arg1 string) error {
	return godog.ErrPending
}

func recoveriesFailed(arg1 int) error {
	return godog.ErrPending
}

func recoveriesWereSuccessful(arg1 int) error {
	return godog.ErrPending
}

func refuelAPIIsCalled() error {
	return godog.ErrPending
}

func refuelAPIShouldBeCalled() error {
	return godog.ErrPending
}

func refuelSequenceExecutes() error {
	return godog.ErrPending
}

func routeExecutionBegins() error {
	return godog.ErrPending
}

func routeFailRouteMethodShouldBeCalledWithErrorMessage() error {
	return godog.ErrPending
}

func routeHasRefuel_before_departureSetToTrue() error {
	return godog.ErrPending
}

func routeHasSegmentFromAToB(arg1, arg2, arg3 int) error {
	return godog.ErrPending
}

func routeRequiresRefuelAt(arg1 string) error {
	return godog.ErrPending
}

func routeShouldBeMarkedAsFAILED() error {
	return godog.ErrPending
}

func routeShouldHaveSegments(arg1 int) error {
	return godog.ErrPending
}

func routeStatusShouldBeCOMPLETED() error {
	return godog.ErrPending
}

func routeStatusShouldBeSetToFAILED() error {
	return godog.ErrPending
}

func routingEnginePlansBURNModeForSegment(arg1 int) error {
	return godog.ErrPending
}

func routingEnginePlansCRUISEModeForNextSegment() error {
	return godog.ErrPending
}

func routingEnginePlansCRUISEModeForSegment(arg1 int) error {
	return godog.ErrPending
}

func routingEnginePlansDRIFTModeForNextSegment() error {
	return godog.ErrPending
}

func routingEnginePlansRouteWithSegments(arg1 *godog.Table) error {
	return godog.ErrPending
}

func routingEngineReturnsRouteWithRefuel_before_departureTrue() error {
	return godog.ErrPending
}

func segmentExecutes(arg1 int) error {
	return godog.ErrPending
}

func segmentShouldExecuteFromAToB(arg1, arg2, arg3 int) error {
	return godog.ErrPending
}

func segmentShouldExecuteFromBToC(arg1, arg2, arg3 int) error {
	return godog.ErrPending
}

func segmentShouldExecuteFromCToD(arg1, arg2, arg3 int) error {
	return godog.ErrPending
}

func segmentShouldExecuteToB(arg1, arg2 int) error {
	return godog.ErrPending
}

func segmentShouldExecuteToC(arg1, arg2 int) error {
	return godog.ErrPending
}

func segmentShouldExecuteToD(arg1, arg2 int) error {
	return godog.ErrPending
}

func segmentShouldExecuteToE(arg1, arg2 int) error {
	return godog.ErrPending
}

func shipArriveMethodShouldBeCalledIfStatusIsIN_TRANSIT() error {
	return godog.ErrPending
}

func shipArrivesAtFuelStationWithFuel(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func shipArrivesAtFuelStationWithFuel(arg1, arg2 string, arg3 int) error {
	return godog.ErrPending
}

func shipArrivesAtWithFuel(arg1, arg2 string, arg3 int) error {
	return godog.ErrPending
}

func shipAttemptsToRefuelAt(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipExecutesARouteWithDockRefuelOrbitNavigate(arg1 string) error {
	return godog.ErrPending
}

func shipHasAnOrphanedAssignmentToNonexistentContainer(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipHasFuelCapacity(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func shipIsAssignedToContainerWithOperation(arg1, arg2, arg3 string) error {
	return godog.ErrPending
}

func shipIsAt(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipIsAtFuelStationWithFuel(arg1, arg2 string, arg3 int) error {
	return godog.ErrPending
}

func shipIsAtFuelStationWithLowFuel(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipIsAtWithFuel(arg1, arg2 string, arg3 int) error {
	return godog.ErrPending
}

func shipIsAtWithFuel(arg1, arg2 string, arg3 int) error {
	return godog.ErrPending
}

func shipIsAtWithFuelOutOfCapacity(arg1, arg2 string, arg3, arg4 int) error {
	return godog.ErrPending
}

func shipIsDOCKEDAt(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipIsIN_ORBITAtWithLowFuel(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipIsIN_TRANSITToArrivingInSeconds(arg1, arg2 string, arg3 int) error {
	return godog.ErrPending
}

func shipNavigatesFromTo(arg1, arg2, arg3 string) error {
	return godog.ErrPending
}

func shipNavigatesToDestination(arg1 string) error {
	return godog.ErrPending
}

func shipNavigatesWithSegmentTravelTimeSeconds(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func shipReportsLocation(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipShouldArriveAtD(arg1 int) error {
	return godog.ErrPending
}

func shipShouldArriveAtWithFuel(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func shipShouldBeAssignedToContainer(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipShouldBeIN_ORBITAfterArrival() error {
	return godog.ErrPending
}

func shipShouldBeIN_ORBITBeforeNavigation() error {
	return godog.ErrPending
}

func shipShouldBeIN_TRANSITAfterNavigateAPICall() error {
	return godog.ErrPending
}

func shipShouldDockAt(arg1 string) error {
	return godog.ErrPending
}

func shipShouldHaveFuelAfterRefuelAtC(arg1, arg2 int) error {
	return godog.ErrPending
}

func shipShouldHaveFuelAtB(arg1, arg2 int) error {
	return godog.ErrPending
}

func shipShouldHaveFuelBeforeDeparture(arg1 int) error {
	return godog.ErrPending
}

func shipShouldHaveFuelRemainingAtB(arg1, arg2 int) error {
	return godog.ErrPending
}

func shipShouldNoLongerBeAssignedToAnyContainer(arg1 string) error {
	return godog.ErrPending
}

func shipShouldNotBeAssignedToAnyContainer(arg1 string) error {
	return godog.ErrPending
}

func shipShouldOrbitAfterRefuel() error {
	return godog.ErrPending
}

func shipShouldRefuelAtCBecauseOfPlannedRefuel(arg1 int) error {
	return godog.ErrPending
}

func shipShouldRefuelBeforeDeparting() error {
	return godog.ErrPending
}

func shipShouldRefuelBeforeStartingJourney() error {
	return godog.ErrPending
}

func shipShouldRefuelTo(arg1, arg2 int) error {
	return godog.ErrPending
}

func shipShouldRefuelToFullCapacity() error {
	return godog.ErrPending
}

func shipShouldRemainInOrbit() error {
	return godog.ErrPending
}

func shipShouldStillBeAssignedToContainer(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipShouldTransitionBackToIN_ORBIT() error {
	return godog.ErrPending
}

func shipShouldTransitionToDOCKED() error {
	return godog.ErrPending
}

func shipStartsAtWithFuel(arg1, arg2 string, arg3 int) error {
	return godog.ErrPending
}

func shipStartsNavigationTo(arg1, arg2 string) error {
	return godog.ErrPending
}

func shipStateShouldBeRefetchedAfterSleep() error {
	return godog.ErrPending
}

func shipStateShouldBeRefetchedImmediately() error {
	return godog.ErrPending
}

func shipStateShouldBeResyncedAfterArrival() error {
	return godog.ErrPending
}

func shipStateShouldStillBeRefetched() error {
	return godog.ErrPending
}

func shipStateShouldStillBeResynced() error {
	return godog.ErrPending
}

func shipsAreAssignedToRunningContainers(arg1 int) error {
	return godog.ErrPending
}

func shipsExistForPlayer(arg1 int, arg2 *godog.Table) error {
	return godog.ErrPending
}

func staleAssignmentShouldBeCleanedUp(arg1 int) error {
	return godog.ErrPending
}

func staleAssignmentsShouldBeCleanedUp(arg1 int) error {
	return godog.ErrPending
}

func systemHasACachedGraphWithWaypoints(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func systemHasCachedGraphStructureOnly(arg1 string) error {
	return godog.ErrPending
}

func systemHasNoCachedGraph(arg1 string) error {
	return godog.ErrPending
}

func systemHasOnlyWaypointCached(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func systemHasWaypointCached(arg1, arg2 string) error {
	return godog.ErrPending
}

func systemHasWaypointsCached(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func systemHasWaypointsCached(arg1 string) error {
	return godog.ErrPending
}

func systemHasWaypointsWithFuelStations(arg1 string, arg2, arg3 int) error {
	return godog.ErrPending
}

func systemHasZeroWaypointsInCache(arg1 string) error {
	return godog.ErrPending
}

func theAPIShouldBeCalledToListWaypoints() error {
	return godog.ErrPending
}

func theAPIWillReturnSuccessfulDeliveryWithUnitsDelivered(arg1 int) error {
	return godog.ErrPending
}

func theAPIWillReturnWaypointsForSystem(arg1 int, arg2 string) error {
	return godog.ErrPending
}

func theAPIWillSuccessfullyFulfillTheContract() error {
	return godog.ErrPending
}

func theAssignmentShouldBeMarkedAsStale() error {
	return godog.ErrPending
}

func theAssignmentShouldFailWithError(arg1 string) error {
	return godog.ErrPending
}

func theAssignmentWasCreatedHoursAgo(arg1 int) error {
	return godog.ErrPending
}

func theAssignmentWasCreatedMinutesAgo(arg1 int) error {
	return godog.ErrPending
}

func theAverageIterationDurationIsSeconds(arg1, arg2 int) error {
	return godog.ErrPending
}

func theClientDisconnectsAfterReceivingTheContainer_id() error {
	return godog.ErrPending
}

func theClientSendsAHealthCheckRequest() error {
	return godog.ErrPending
}

func theClientSendsANavigateShipRequestForShipTo(arg1, arg2 string) error {
	return godog.ErrPending
}

func theClientSendsNavigateShipRequestsForAllShips(arg1 int) error {
	return godog.ErrPending
}

func theClientShouldReceiveAValidGRPCServerResponse() error {
	return godog.ErrPending
}

func theClockIsMocked() error {
	return godog.ErrPending
}

func theConnectionPoolShouldBeReleased() error {
	return godog.ErrPending
}

func theConnectionShouldBeAccepted() error {
	return godog.ErrPending
}

func theContainerExistsAndIsRunning(arg1 string) error {
	return godog.ErrPending
}

func theContainerHasCompletedIterationsInSeconds(arg1 string, arg2, arg3 int) error {
	return godog.ErrPending
}

func theContainerMaxIterationsIs(arg1 int) error {
	return godog.ErrPending
}

func theContainerMetadataShouldIncludeDestination(arg1 string) error {
	return godog.ErrPending
}

func theContainerMetadataShouldIncludeShip_symbol(arg1 string) error {
	return godog.ErrPending
}

func theContainerNoLongerExists(arg1 string) error {
	return godog.ErrPending
}

func theContainerShouldBeRegisteredInTheDaemon() error {
	return godog.ErrPending
}

func theContainerShouldContinueExecutingInTheBackground() error {
	return godog.ErrPending
}

func theContainerShouldFinishSuccessfully() error {
	return godog.ErrPending
}

func theContainerShouldNotBeInCOMPLETEDStatusYet() error {
	return godog.ErrPending
}

func theContainerShouldRemainRunning(arg1 string) error {
	return godog.ErrPending
}

func theContainerShouldStillBeAllowedToFinish() error {
	return godog.ErrPending
}

func theContainerShouldTransitionTo(arg1, arg2 string) error {
	return godog.ErrPending
}

func theContainerStatusShouldEventuallyTransitionTo(arg1 string) error {
	return godog.ErrPending
}

func theContainerStatusShouldRemain(arg1 string) error {
	return godog.ErrPending
}

func theContainerTransitionsToStatus(arg1, arg2 string) error {
	return godog.ErrPending
}

func theContractShouldBeMarkedAsFulfilled() error {
	return godog.ErrPending
}

func theContractShouldBePersistedWithFulfilledStatus() error {
	return godog.ErrPending
}

func theContractShouldShowUnitsFulfilledFor(arg1 int, arg2 string) error {
	return godog.ErrPending
}

func theCurrentFlightModeShouldBe(arg1 string) error {
	return godog.ErrPending
}

func theCurrentSegmentShouldBeNil() error {
	return godog.ErrPending
}

func theCurrentTimeIs(arg1 string) error {
	return godog.ErrPending
}

func theCurrent_segment_indexIs(arg1 int) error {
	return godog.ErrPending
}

func theCurrent_segment_indexShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theDaemonCompletesShutdown() error {
	return godog.ErrPending
}

func theDaemonProcessShouldExitCleanly() error {
	return godog.ErrPending
}

func theDaemonReceivesShutdownSignal() error {
	return godog.ErrPending
}

func theDaemonServerIsNotRunning() error {
	return godog.ErrPending
}

func theDaemonServerIsRunningOnSocket(arg1 string) error {
	return godog.ErrPending
}

func theDaemonServerShouldBeRunning() error {
	return godog.ErrPending
}

func theDaemonServerShouldStartSuccessfully() error {
	return godog.ErrPending
}

func theDaemonShouldCompleteShutdownSuccessfully() error {
	return godog.ErrPending
}

func theDaemonShouldContinueGracefulShutdown() error {
	return godog.ErrPending
}

func theDaemonShouldForceShutdownAfterSeconds(arg1 int) error {
	return godog.ErrPending
}

func theDaemonShouldInitiateGracefulShutdown() error {
	return godog.ErrPending
}

func theDaemonShouldNotPanicOrExitImmediately() error {
	return godog.ErrPending
}

func theDaemonShouldShutDownGracefully() error {
	return godog.ErrPending
}

func theDaemonShouldShutDownWithinSeconds(arg1 int) error {
	return godog.ErrPending
}

func theDaemonShouldStopAcceptingNewConnections() error {
	return godog.ErrPending
}

func theDaemonShouldStopAllRunningContainers() error {
	return godog.ErrPending
}

func theDaemonShouldWaitForContainersToFail() error {
	return godog.ErrPending
}

func theDaemonShouldWaitForRunningContainersToFinish() error {
	return godog.ErrPending
}

func theDaemonShouldWaitForTheContainerToComplete() error {
	return godog.ErrPending
}

func theDaemonShouldWaitUpToSeconds(arg1 int) error {
	return godog.ErrPending
}

func theDaemonStartsUp() error {
	return godog.ErrPending
}

func theDaemonStartupShouldFail() error {
	return godog.ErrPending
}

func theDatabaseHasActiveConnectionsFromTheDaemon(arg1 int) error {
	return godog.ErrPending
}

func theDatabaseIsInitialized() error {
	return godog.ErrPending
}

func theDatabaseShouldHaveWaypointsForSystem(arg1 int, arg2 string) error {
	return godog.ErrPending
}

func theErrorOccurs() error {
	return godog.ErrPending
}

func theErrorOccursDuringExecution() error {
	return godog.ErrPending
}

func theErrorShouldBeReturnedToHandler() error {
	return godog.ErrPending
}

func theErrorShouldInclude(arg1 string) error {
	return godog.ErrPending
}

func theErrorShouldIncludeContainer_id(arg1 string) error {
	return godog.ErrPending
}

func theErrorShouldPropagateToCaller() error {
	return godog.ErrPending
}

func theExtractedSystemSymbolShouldBe(arg1 string) error {
	return godog.ErrPending
}

func theFailedContainersShouldBeMarkedAsFAILED() error {
	return godog.ErrPending
}

func theFailedRecoveryCountShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theFuelShouldBeFull() error {
	return godog.ErrPending
}

func theGraphShouldBeEnrichedWithTraitData() error {
	return godog.ErrPending
}

func theGraphShouldBeLoadedFromDatabaseCache() error {
	return godog.ErrPending
}

func theGraphShouldBeSavedToSystem_graphsTable() error {
	return godog.ErrPending
}

func theHandlerShouldCalculateSecondsWaitTime(arg1 int) error {
	return godog.ErrPending
}

func theHandlerShouldDetectIN_TRANSITState() error {
	return godog.ErrPending
}

func theHandlerShouldSleepForSeconds(arg1 int) error {
	return godog.ErrPending
}

func theHandlerShouldWaitForArrival() error {
	return godog.ErrPending
}

func theHealthCheckShouldBeSkippedDueToCooldown() error {
	return godog.ErrPending
}

func theHealthCheckShouldExecute() error {
	return godog.ErrPending
}

func theHealthMonitorAttemptsRecoveryForShip(arg1 string) error {
	return godog.ErrPending
}

func theHealthMonitorAttemptsRecoveryForShipTimes(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func theHealthMonitorCheckIntervalIsSeconds(arg1 int) error {
	return godog.ErrPending
}

func theHealthMonitorDetectsShipAsStuck(arg1 string) error {
	return godog.ErrPending
}

func theHealthMonitorHasAttemptedRecoveries(arg1 int) error {
	return godog.ErrPending
}

func theHealthMonitorIsTriggeredToRun() error {
	return godog.ErrPending
}

func theHealthMonitorLastRanSecondsAgo(arg1 int) error {
	return godog.ErrPending
}

func theHealthMonitorReportsMetrics() error {
	return godog.ErrPending
}

func theHealthMonitorRunsACheck() error {
	return godog.ErrPending
}

func theIndexShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theLastCheckTimestampShouldBeUpdated() error {
	return godog.ErrPending
}

func theLogEntriesShouldBeDifferentFromTheFirstPage() error {
	return godog.ErrPending
}

func theLogLevelShouldBe(arg1 string) error {
	return godog.ErrPending
}

func theLogMessageShouldBe(arg1 string) error {
	return godog.ErrPending
}

func theLogShouldBePersistedToTheDatabase() error {
	return godog.ErrPending
}

func theLogShouldHaveAContainer_idOf(arg1 string) error {
	return godog.ErrPending
}

func theLogShouldHaveAPlayer_idOf(arg1 int) error {
	return godog.ErrPending
}

func theLogShouldHaveATimestampWithinTheLastSeconds(arg1 int) error {
	return godog.ErrPending
}

func theMaxRecoveryAttemptsIs(arg1 int) error {
	return godog.ErrPending
}

func theModeNameShouldBe(arg1 string) error {
	return godog.ErrPending
}

func theNavigationCommandShouldBeRejectedWithError(arg1 string) error {
	return godog.ErrPending
}

func theNavigationSegmentCompletes() error {
	return godog.ErrPending
}

func theNavigationUtilitiesAreAvailable() error {
	return godog.ErrPending
}

func theNewFuelShouldHaveCapacity(arg1 int) error {
	return godog.ErrPending
}

func theOriginalFuelShouldStillHaveCurrent(arg1 int) error {
	return godog.ErrPending
}

func theOrphanedAssignmentCleanupCountShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theReassignmentShouldFailWithError(arg1 string) error {
	return godog.ErrPending
}

func theRecoveryActionForcesArrivalAtDestination() error {
	return godog.ErrPending
}

func theRecoveryActionWillFailWithError(arg1 string) error {
	return godog.ErrPending
}

func theRecoveryAttemptCountForShipShouldBe(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func theRecoveryAttemptCountForShipShouldBeResetTo(arg1 string, arg2 int) error {
	return godog.ErrPending
}

func theRecoveryAttemptShouldBeLogged() error {
	return godog.ErrPending
}

func theRecoveryShouldBeMarkedAsFailed() error {
	return godog.ErrPending
}

func theRecoveryShouldBeMarkedAsSuccessful() error {
	return godog.ErrPending
}

func theRecoveryTimeoutIsSeconds(arg1 int) error {
	return godog.ErrPending
}

func theRemainingSegmentShouldBeTheSecondSegment() error {
	return godog.ErrPending
}

func theResponseShouldHaveStatus(arg1 string) error {
	return godog.ErrPending
}

func theResponseShouldIncludeAContainer_id() error {
	return godog.ErrPending
}

func theResponseShouldIncludeActive_containersCount() error {
	return godog.ErrPending
}

func theResponseShouldIncludeVersion(arg1 string) error {
	return godog.ErrPending
}

func theResponseShouldReturnWithinMilliseconds(arg1 int) error {
	return godog.ErrPending
}

func theResponseStatusShouldBe(arg1 string) error {
	return godog.ErrPending
}

func theRoutingEnginePlansDirectRouteWithoutPlannedRefuel() error {
	return godog.ErrPending
}

func theSecondTimeoutExpires(arg1 int) error {
	return godog.ErrPending
}

func theSegmentHasRequires_refuelSetToTrue() error {
	return godog.ErrPending
}

func theShipAssignmentForShouldRemainActive(arg1 string) error {
	return godog.ErrPending
}

func theShipAssignmentOperationShouldBe(arg1 string) error {
	return godog.ErrPending
}

func theShipAssignmentPlayer_idShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theShipAssignmentRelease_reasonShouldBe(arg1 string) error {
	return godog.ErrPending
}

func theShipAssignmentShouldBeAutoreleasedWithReason(arg1 string) error {
	return godog.ErrPending
}

func theShipAssignmentShouldBePersistedInTheDatabase() error {
	return godog.ErrPending
}

func theShipAssignmentShouldHaveAReleased_atTimestamp() error {
	return godog.ErrPending
}

func theShipAssignmentShouldHaveAnAssigned_atTimestamp() error {
	return godog.ErrPending
}

func theShipAssignmentStatusShouldBe(arg1 string) error {
	return godog.ErrPending
}

func theShipDetailsShouldIncludeAssignmentStatus(arg1 string) error {
	return godog.ErrPending
}

func theShipDetailsShouldIncludeContainer_id(arg1 string) error {
	return godog.ErrPending
}

func theShipHasAlreadyFailedRecoveryTimes(arg1 int) error {
	return godog.ErrPending
}

func theShipHasBeenHealthyForSeconds(arg1 int) error {
	return godog.ErrPending
}

func theShipHasNotArrivedAtItsDestination() error {
	return godog.ErrPending
}

func theShipIsStuckDueToMissingArrival() error {
	return godog.ErrPending
}

func theShipNavigationStatusIsNow(arg1, arg2 string) error {
	return godog.ErrPending
}

func theShipNavigationStatusShouldTransitionTo(arg1 string) error {
	return godog.ErrPending
}

func theShipShouldBeInOrbitAt(arg1 string) error {
	return godog.ErrPending
}

func theShipShouldBeMarkedAsAbandoned(arg1 string) error {
	return godog.ErrPending
}

func theShipShouldBeRemovedFromWatchList(arg1 string) error {
	return godog.ErrPending
}

func theSocketFileShouldNotExist() error {
	return godog.ErrPending
}

func theSocketPermissionsShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theSocketShouldBeActive() error {
	return godog.ErrPending
}

func theStaleAssignmentForShipShouldBeDetected(arg1 string) error {
	return godog.ErrPending
}

func theStuckShipCountShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theStuckShipShouldBeDetected(arg1 string) error {
	return godog.ErrPending
}

func theStuckShipShouldNotBeDetected(arg1 string) error {
	return godog.ErrPending
}

func theSuccessRateShouldBePercent(arg1 int) error {
	return godog.ErrPending
}

func theTotalCountOfAllLogsShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theTotalDistanceShouldBe(arg1, arg2 int) error {
	return godog.ErrPending
}

func theTotalFuelRequiredShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theTotalRecoveryAttemptsShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theTotalTravelTimeShouldBe(arg1 int) error {
	return godog.ErrPending
}

func theUnixSocketAtShouldBeRemoved(arg1 string) error {
	return godog.ErrPending
}

func theUnixSocketShouldExistAt(arg1 string) error {
	return godog.ErrPending
}

func theWaitTimeShouldBeSeconds(arg1 int) error {
	return godog.ErrPending
}

func theWaypointListShouldContain(arg1 string) error {
	return godog.ErrPending
}

func theWaypointShouldBeSavedInTheDatabase() error {
	return godog.ErrPending
}

func theWaypointShouldHaveCoordinates(arg1, arg2, arg3, arg4 int) error {
	return godog.ErrPending
}

func theWaypointShouldHaveFuelAvailable() error {
	return godog.ErrPending
}

func theWaypointShouldHaveTraits(arg1 string) error {
	return godog.ErrPending
}

func theWaypointShouldHaveType(arg1 string) error {
	return godog.ErrPending
}

func theWaypointShouldHaveXCoordinate(arg1, arg2 int) error {
	return godog.ErrPending
}

func theWaypointShouldHaveYCoordinate(arg1, arg2 int) error {
	return godog.ErrPending
}

func thenFirstSegmentShouldExecute() error {
	return godog.ErrPending
}

func thenNavigationToShouldBegin(arg1 string) error {
	return godog.ErrPending
}

func thenSegmentToBShouldExecute(arg1 int) error {
	return godog.ErrPending
}

func thereShouldBeRemainingSegment(arg1 int) error {
	return godog.ErrPending
}

func thereShouldBeRemainingSegments(arg1 int) error {
	return godog.ErrPending
}

func totalSleepTimeShouldBeSeconds(arg1 int) error {
	return godog.ErrPending
}

func unitsShouldBeDelivered(arg1 int) error {
	return godog.ErrPending
}

func waitTimeShouldBeSeconds(arg1 int) error {
	return godog.ErrPending
}

func waypointExistsInDatabaseForSystemWith(arg1, arg2 string, arg3 *godog.Table) error {
	return godog.ErrPending
}

func waypointHasNoFuelAvailable(arg1 string) error {
	return godog.ErrPending
}

func waypointHasNoFuelStation(arg1 string) error {
	return godog.ErrPending
}

func waypointHasNoFuelStationTrait(arg1 string) error {
	return godog.ErrPending
}

func waypointHasNoTraitsInWaypointsTable(arg1 string) error {
	return godog.ErrPending
}

func waypointHasTraitAndFuelAvailable(arg1, arg2 string) error {
	return godog.ErrPending
}

func waypointHasTraitInWaypointsTable(arg1, arg2 string) error {
	return godog.ErrPending
}

func waypointIsAFuelStation(arg1 string) error {
	return godog.ErrPending
}

func waypointIsNOTCached(arg1 string) error {
	return godog.ErrPending
}

func waypointIsNOTInTheCache(arg1 string) error {
	return godog.ErrPending
}

func waypointShouldBeEnrichedWithHas_fuelFalse(arg1 string) error {
	return godog.ErrPending
}

func waypointShouldBeEnrichedWithHas_fuelTrue(arg1 string) error {
	return godog.ErrPending
}

func waypointShouldExistInTheDatabase(arg1 string) error {
	return godog.ErrPending
}

func waypointShouldHaveCoordinates(arg1 string, arg2, arg3, arg4, arg5 int) error {
	return godog.ErrPending
}

func waypointShouldHaveFuelAvailable(arg1 string) error {
	return godog.ErrPending
}

func waypointShouldHaveOrbitals(arg1, arg2 string) error {
	return godog.ErrPending
}

func waypointShouldHaveTraits(arg1, arg2 string) error {
	return godog.ErrPending
}

func waypointsExistInDatabaseForSystem(arg1 string, arg2 *godog.Table) error {
	return godog.ErrPending
}

func waypointsShouldBeEnrichedWithHas_fuelTraitData() error {
	return godog.ErrPending
}

func waypointsShouldBeSavedToWaypointsTable() error {
	return godog.ErrPending
}

func InitializeScenario(ctx *godog.ScenarioContext) {
	ctx.Step(`^a container "([^"]*)" exists for ship "([^"]*)" with status "([^"]*)"$`, aContainerExistsForShipWithStatus)
	ctx.Step(`^a container "([^"]*)" exists with type "([^"]*)" for player (\d+)$`, aContainerExistsWithTypeForPlayer)
	ctx.Step(`^a container is running in the background$`, aContainerIsRunningInTheBackground)
	ctx.Step(`^a container is running that will complete in (\d+) seconds$`, aContainerIsRunningThatWillCompleteInSeconds)
	ctx.Step(`^a container is running that will take (\d+) seconds to complete$`, aContainerIsRunningThatWillTakeSecondsToComplete)
	ctx.Step(`^a container log repository with in-memory database$`, aContainerLogRepositoryWithInmemoryDatabase)
	ctx.Step(`^a container should be created with type "([^"]*)"$`, aContainerShouldBeCreatedWithType)
	ctx.Step(`^a container with ID "([^"]*)" for player (\d+)$`, aContainerWithIDForPlayer)
	ctx.Step(`^a contract repository$`, aContractRepository)
	ctx.Step(`^a critical error should be logged about abandoning ship "([^"]*)"$`, aCriticalErrorShouldBeLoggedAboutAbandoningShip)
	ctx.Step(`^a critical warning should be logged about route-ship state mismatch$`, aCriticalWarningShouldBeLoggedAboutRouteshipStateMismatch)
	ctx.Step(`^a gRPC client connects to the Unix socket$`, aGRPCClientConnectsToTheUnixSocket)
	ctx.Step(`^a gRPC client is connected$`, aGRPCClientIsConnected)
	ctx.Step(`^a health monitor exists with check interval (\d+) seconds and recovery timeout (\d+) seconds$`, aHealthMonitorExistsWithCheckIntervalSecondsAndRecoveryTimeoutSeconds)
	ctx.Step(`^a mediator is initialized$`, aMediatorIsInitialized)
	ctx.Step(`^a mock API client$`, aMockAPIClient)
	ctx.Step(`^a newly created route$`, aNewlyCreatedRoute)
	ctx.Step(`^API returns segment travel time of (\d+) seconds$`, aPIReturnsSegmentTravelTimeOfSeconds)
	ctx.Step(`^API returns travel time in the past$`, aPIReturnsTravelTimeInThePast)
	ctx.Step(`^a player exists with id (\d+)$`, aPlayerExistsWithId)
	ctx.Step(`^a player "([^"]*)" exists with token "([^"]*)"$`, aPlayerExistsWithToken)
	ctx.Step(`^a player repository$`, aPlayerRepository)
	ctx.Step(`^a player with ID (\d+) and token "([^"]*)"$`, aPlayerWithIDAndToken)
	ctx.Step(`^a recovery action should be initiated for ship "([^"]*)"$`, aRecoveryActionShouldBeInitiatedForShip)
	ctx.Step(`^a route for ship "([^"]*)" exists with status "([^"]*)"$`, aRouteForShipExistsWithStatus)
	ctx.Step(`^a route in "([^"]*)" status$`, aRouteInStatus)
	ctx.Step(`^a route in "([^"]*)" status with (\d+) segments$`, aRouteInStatusWithSegments)
	ctx.Step(`^a route segment requiring (\d+) units of fuel in CRUISE mode$`, aRouteSegmentRequiringUnitsOfFuelInCRUISEMode)
	ctx.Step(`^a route segment requiring (\d+) units of fuel in DRIFT mode$`, aRouteSegmentRequiringUnitsOfFuelInDRIFTMode)
	ctx.Step(`^a route with a single segment:$`, aRouteWithASingleSegment)
	ctx.Step(`^a route with refuel_before_departure false$`, aRouteWithRefuel_before_departureFalse)
	ctx.Step(`^a route with refuel_before_departure true$`, aRouteWithRefuel_before_departureTrue)
	ctx.Step(`^a route with (\d+) segments$`, aRouteWithSegments)
	ctx.Step(`^a route with segments having distances:$`, aRouteWithSegmentsHavingDistances)
	ctx.Step(`^a route with segments having travel times:$`, aRouteWithSegmentsHavingTravelTimes)
	ctx.Step(`^a route with segments requiring fuel:$`, aRouteWithSegmentsRequiringFuel)
	ctx.Step(`^a ship at "([^"]*)" with (\d+) units of fuel and capacity (\d+)$`, aShipAtWithUnitsOfFuelAndCapacity)
	ctx.Step(`^a ship "([^"]*)" exists for player (\d+)$`, aShipExistsForPlayer)
	ctx.Step(`^a ship "([^"]*)" is assigned to container "([^"]*)"$`, aShipIsAssignedToContainer)
	ctx.Step(`^a ship "([^"]*)" owned by player (\d+) at waypoint "([^"]*)" with (\d+) "([^"]*)" in cargo$`, aShipOwnedByPlayerAtWaypointWithInCargo)
	ctx.Step(`^a ship repository$`, aShipRepository)
	ctx.Step(`^a ship "([^"]*)" was previously stuck and is on the watch list$`, aShipWasPreviouslyStuckAndIsOnTheWatchList)
	ctx.Step(`^a ship "([^"]*)" with navigation status "([^"]*)" since (\d+) seconds ago$`, aShipWithNavigationStatusSinceSecondsAgo)
	ctx.Step(`^a ship "([^"]*)" with player ID (\d+) is assigned to container "([^"]*)" for operation "([^"]*)"$`, aShipWithPlayerIDIsAssignedToContainerForOperation)
	ctx.Step(`^a stale Unix socket exists at "([^"]*)"$`, aStaleUnixSocketExistsAt)
	ctx.Step(`^a suspicious rapid iteration pattern should be detected for container "([^"]*)"$`, aSuspiciousRapidIterationPatternShouldBeDetectedForContainer)
	ctx.Step(`^a warning should be logged about containers not stopping within timeout$`, aWarningShouldBeLoggedAboutContainersNotStoppingWithinTimeout)
	ctx.Step(`^a warning should be logged about parsing failure$`, aWarningShouldBeLoggedAboutParsingFailure)
	ctx.Step(`^a warning should be logged about potential infinite loop$`, aWarningShouldBeLoggedAboutPotentialInfiniteLoop)
	ctx.Step(`^a warning should be logged about stuck ship "([^"]*)"$`, aWarningShouldBeLoggedAboutStuckShip)
	ctx.Step(`^a waypoint "([^"]*)" with orbitals \["([^"]*)"\]$`, aWaypointWithOrbitals)
	ctx.Step(`^all containers should be registered in the daemon$`, allContainersShouldBeRegisteredInTheDaemon)
	ctx.Step(`^all containers should transition to STOPPED status$`, allContainersShouldTransitionToSTOPPEDStatus)
	ctx.Step(`^all database connections should be closed$`, allDatabaseConnectionsShouldBeClosed)
	ctx.Step(`^all goroutines spawned by containers should terminate$`, allGoroutinesSpawnedByContainersShouldTerminate)
	ctx.Step(`^all log entries should have container_id "([^"]*)"$`, allLogEntriesShouldHaveContainer_id)
	ctx.Step(`^all log entries should have level "([^"]*)"$`, allLogEntriesShouldHaveLevel)
	ctx.Step(`^all recovery attempts should be persisted$`, allRecoveryAttemptsShouldBePersisted)
	ctx.Step(`^all ship assignments should be released$`, allShipAssignmentsShouldBeReleased)
	ctx.Step(`^all ship assignments should be released with reason "([^"]*)"$`, allShipAssignmentsShouldBeReleasedWithReason)
	ctx.Step(`^all waypoints should be saved in the database$`, allWaypointsShouldBeSavedInTheDatabase)
	ctx.Step(`^an accepted contract "([^"]*)" for player (\d+) with all deliveries fulfilled$`, anAcceptedContractForPlayerWithAllDeliveriesFulfilled)
	ctx.Step(`^an accepted contract "([^"]*)" for player (\d+) with delivery of (\d+) "([^"]*)" to "([^"]*)"$`, anAcceptedContractForPlayerWithDeliveryOfTo)
	ctx.Step(`^an accepted contract "([^"]*)" for player (\d+) with incomplete deliveries$`, anAcceptedContractForPlayerWithIncompleteDeliveries)
	ctx.Step(`^an accepted contract "([^"]*)" for player (\d+) with (\d+) of (\d+) "([^"]*)" already delivered to "([^"]*)"$`, anAcceptedContractForPlayerWithOfAlreadyDeliveredTo)
	ctx.Step(`^an error should be logged with reason "([^"]*)"$`, anErrorShouldBeLoggedWithReason)
	ctx.Step(`^an in-memory database is initialized$`, anInmemoryDatabaseIsInitialized)
	ctx.Step(`^both distances should be equal$`, bothDistancesShouldBeEqual)
	ctx.Step(`^both entries should have the message "([^"]*)"$`, bothEntriesShouldHaveTheMessage)
	ctx.Step(`^(\d+) containers are running in the background$`, containersAreRunningInTheBackground)
	ctx.Step(`^(\d+) containers are running that will fail with errors$`, containersAreRunningThatWillFailWithErrors)
	ctx.Step(`^(\d+) containers have been executed and completed$`, containersHaveBeenExecutedAndCompleted)
	ctx.Step(`^(\d+) containers should be created$`, containersShouldBeCreated)
	ctx.Step(`^current location has fuel available$`, currentLocationHasFuelAvailable)
	ctx.Step(`^current location should be "([^"]*)"$`, currentLocationShouldBe)
	ctx.Step(`^current time is "([^"]*)"$`, currentTimeIs)
	ctx.Step(`^destination "([^"]*)" exists but routing engine finds no path$`, destinationExistsButRoutingEngineFindsNoPath)
	ctx.Step(`^dock API is called$`, dockAPIIsCalled)
	ctx.Step(`^dock API returns error "([^"]*)"$`, dockAPIReturnsError)
	ctx.Step(`^each container should have a unique container_id$`, eachContainerShouldHaveAUniqueContainer_id)
	ctx.Step(`^final status should be IN_ORBIT at "([^"]*)"$`, finalStatusShouldBeIN_ORBITAt)
	ctx.Step(`^flight mode should be set to "([^"]*)" before navigate API call$`, flightModeShouldBeSetToBeforeNavigateAPICall)
	ctx.Step(`^fuel should be at (\d+)%$`, fuelShouldBeAt)
	ctx.Step(`^handler should add (\d+) second buffer$`, handlerShouldAddSecondBuffer)
	ctx.Step(`^handler should calculate wait time as (\d+) seconds$`, handlerShouldCalculateWaitTimeAsSeconds)
	ctx.Step(`^HasRefuelAtStart should return false$`, hasRefuelAtStartShouldReturnFalse)
	ctx.Step(`^HasRefuelAtStart should return true$`, hasRefuelAtStartShouldReturnTrue)
	ctx.Step(`^I abort the route with reason "([^"]*)"$`, iAbortTheRouteWithReason)
	ctx.Step(`^I add (\d+) units of fuel$`, iAddUnitsOfFuel)
	ctx.Step(`^I assign ship "([^"]*)" to container "([^"]*)" with operation "([^"]*)"$`, iAssignShipToContainerWithOperation)
	ctx.Step(`^I attempt to add -(\d+) units of fuel$`, iAttemptToAddUnitsOfFuel)
	ctx.Step(`^I attempt to assign ship "([^"]*)" to container "([^"]*)" with operation "([^"]*)"$`, iAttemptToAssignShipToContainerWithOperation)
	ctx.Step(`^I attempt to complete the current segment$`, iAttemptToCompleteTheCurrentSegment)
	ctx.Step(`^I attempt to create cargo with capacity (\d+), units (\d+), and inventory$`, iAttemptToCreateCargoWithCapacityUnitsAndInventory)
	ctx.Step(`^I attempt to execute a navigation command for ship "([^"]*)"$`, iAttemptToExecuteANavigationCommandForShip)
	ctx.Step(`^I attempt to reassign ship "([^"]*)" from "([^"]*)" to "([^"]*)"$`, iAttemptToReassignShipFromTo)
	ctx.Step(`^I attempt to start route execution$`, iAttemptToStartRouteExecution)
	ctx.Step(`^I attempt to start the daemon server on invalid socket "([^"]*)"$`, iAttemptToStartTheDaemonServerOnInvalidSocket)
	ctx.Step(`^I calculate route totals$`, iCalculateRouteTotals)
	ctx.Step(`^I calculate the total distance$`, iCalculateTheTotalDistance)
	ctx.Step(`^I calculate the total fuel required$`, iCalculateTheTotalFuelRequired)
	ctx.Step(`^I calculate the total travel time$`, iCalculateTheTotalTravelTime)
	ctx.Step(`^I calculate wait time for arrival at "([^"]*)"$`, iCalculateWaitTimeForArrivalAt)
	ctx.Step(`^I call IsComplete$`, iCallIsComplete)
	ctx.Step(`^I call IsFailed$`, iCallIsFailed)
	ctx.Step(`^I call NextSegment$`, iCallNextSegment)
	ctx.Step(`^I check if fuel can travel requiring (\d+) with safety margin (\d+)\.(\d+)$`, iCheckIfFuelCanTravelRequiringWithSafetyMargin)
	ctx.Step(`^I check if fuel is full$`, iCheckIfFuelIsFull)
	ctx.Step(`^I check if "([^"]*)" is orbital of "([^"]*)"$`, iCheckIfIsOrbitalOf)
	ctx.Step(`^I check if ship should prevent drift mode with threshold (\d+)\.(\d+)$`, iCheckIfShipShouldPreventDriftModeWithThreshold)
	ctx.Step(`^I check if ship should refuel opportunistically at "([^"]*)" with threshold (\d+)\.(\d+)$`, iCheckIfShipShouldRefuelOpportunisticallyAtWithThreshold)
	ctx.Step(`^I check if the ship assignment is stale$`, iCheckIfTheShipAssignmentIsStale)
	ctx.Step(`^I clean orphaned ship assignments$`, iCleanOrphanedShipAssignments)
	ctx.Step(`^I complete the current segment$`, iCompleteTheCurrentSegment)
	ctx.Step(`^I execute OrbitShipCommand for ship "([^"]*)" and player (\d+)$`, iExecuteOrbitShipCommandForShipAndPlayer)
	ctx.Step(`^I execute SetFlightModeCommand for ship "([^"]*)" and player (\d+) with mode "([^"]*)"$`, iExecuteSetFlightModeCommandForShipAndPlayerWithMode)
	ctx.Step(`^I extract the system symbol from waypoint "([^"]*)"$`, iExtractTheSystemSymbolFromWaypoint)
	ctx.Step(`^I fail the route with reason "([^"]*)"$`, iFailTheRouteWithReason)
	ctx.Step(`^I filter waypoints for system "([^"]*)" by trait "([^"]*)"$`, iFilterWaypointsForSystemByTrait)
	ctx.Step(`^I filter waypoints for system "([^"]*)" by type "([^"]*)"$`, iFilterWaypointsForSystemByType)
	ctx.Step(`^I filter waypoints for system "([^"]*)" with fuel available$`, iFilterWaypointsForSystemWithFuelAvailable)
	ctx.Step(`^I get the current segment$`, iGetTheCurrentSegment)
	ctx.Step(`^I get the current segment index$`, iGetTheCurrentSegmentIndex)
	ctx.Step(`^I get the name of BURN mode$`, iGetTheNameOfBURNMode)
	ctx.Step(`^I get the name of CRUISE mode$`, iGetTheNameOfCRUISEMode)
	ctx.Step(`^I get the name of DRIFT mode$`, iGetTheNameOfDRIFTMode)
	ctx.Step(`^I get the name of STEALTH mode$`, iGetTheNameOfSTEALTHMode)
	ctx.Step(`^I get the remaining segments$`, iGetTheRemainingSegments)
	ctx.Step(`^I list waypoints for system "([^"]*)"$`, iListWaypointsForSystem)
	ctx.Step(`^I log an ERROR message "([^"]*)" for the container$`, iLogAnERRORMessageForTheContainer)
	ctx.Step(`^I log an INFO message "([^"]*)" for the container$`, iLogAnINFOMessageForTheContainer)
	ctx.Step(`^I log (\d+) ERROR messages for container "([^"]*)"$`, iLogERRORMessagesForContainer)
	ctx.Step(`^I log (\d+) ERROR messages for the container$`, iLogERRORMessagesForTheContainer)
	ctx.Step(`^I log (\d+) INFO messages for container "([^"]*)"$`, iLogINFOMessagesForContainer)
	ctx.Step(`^I log (\d+) INFO messages for the container$`, iLogINFOMessagesForTheContainer)
	ctx.Step(`^I log the same INFO message "([^"]*)" (\d+) seconds after the first log$`, iLogTheSameINFOMessageSecondsAfterTheFirstLog)
	ctx.Step(`^I log the same INFO message "([^"]*)" (\d+) seconds later$`, iLogTheSameINFOMessageSecondsLater)
	ctx.Step(`^I log (\d+) unique INFO messages for the container$`, iLogUniqueINFOMessagesForTheContainer)
	ctx.Step(`^I log (\d+) WARNING message for the container$`, iLogWARNINGMessageForTheContainer)
	ctx.Step(`^I navigate "([^"]*)" to "([^"]*)"$`, iNavigateTo)
	ctx.Step(`^I query logs for container "([^"]*)" with limit (\d+)$`, iQueryLogsForContainerWithLimit)
	ctx.Step(`^I query logs for the container filtered by level "([^"]*)"$`, iQueryLogsForTheContainerFilteredByLevel)
	ctx.Step(`^I query logs with limit (\d+) and no offset$`, iQueryLogsWithLimitAndNoOffset)
	ctx.Step(`^I query logs with limit (\d+) and offset (\d+)$`, iQueryLogsWithLimitAndOffset)
	ctx.Step(`^I query ship details for "([^"]*)"$`, iQueryShipDetailsFor)
	ctx.Step(`^I query waypoint "([^"]*)" from system "([^"]*)"$`, iQueryWaypointFromSystem)
	ctx.Step(`^I release all ship assignments with reason "([^"]*)"$`, iReleaseAllShipAssignmentsWithReason)
	ctx.Step(`^I release the ship assignment for "([^"]*)" with reason "([^"]*)"$`, iReleaseTheShipAssignmentForWithReason)
	ctx.Step(`^I save waypoint "([^"]*)" for system "([^"]*)" with:$`, iSaveWaypointForSystemWith)
	ctx.Step(`^I save waypoint "([^"]*)" for system "([^"]*)" with orbitals:$`, iSaveWaypointForSystemWithOrbitals)
	ctx.Step(`^I save waypoints for system "([^"]*)" with:$`, iSaveWaypointsForSystemWith)
	ctx.Step(`^I send another SIGTERM signal (\d+) second later$`, iSendAnotherSIGTERMSignalSecondLater)
	ctx.Step(`^I send DeliverContractCommand with contract "([^"]*)", ship "([^"]*)", trade "([^"]*)", (\d+) units, player (\d+)$`, iSendDeliverContractCommandWithContractShipTradeUnitsPlayer)
	ctx.Step(`^I send FulfillContractCommand for "([^"]*)" with player (\d+)$`, iSendFulfillContractCommandForWithPlayer)
	ctx.Step(`^I send SIGINT signal to the daemon$`, iSendSIGINTSignalToTheDaemon)
	ctx.Step(`^I send SIGTERM signal to the daemon$`, iSendSIGTERMSignalToTheDaemon)
	ctx.Step(`^I should be able to forcefully release the stale assignment$`, iShouldBeAbleToForcefullyReleaseTheStaleAssignment)
	ctx.Step(`^I should receive exactly (\d+) log entries$`, iShouldReceiveExactlyLogEntries)
	ctx.Step(`^I should receive exactly (\d+) log entries when querying$`, iShouldReceiveExactlyLogEntriesWhenQuerying)
	ctx.Step(`^I should receive exactly (\d+) log entry when querying$`, iShouldReceiveExactlyLogEntryWhenQuerying)
	ctx.Step(`^I should receive the waypoint$`, iShouldReceiveTheWaypoint)
	ctx.Step(`^I should receive (\d+) waypoint$`, iShouldReceiveWaypoint)
	ctx.Step(`^I should receive (\d+) waypoints$`, iShouldReceiveWaypoints)
	ctx.Step(`^I start route execution$`, iStartRouteExecution)
	ctx.Step(`^I start the daemon server on socket "([^"]*)"$`, iStartTheDaemonServerOnSocket)
	ctx.Step(`^it should be the first segment$`, itShouldBeTheFirstSegment)
	ctx.Step(`^it should be the second segment$`, itShouldBeTheSecondSegment)
	ctx.Step(`^it should return false$`, itShouldReturnFalse)
	ctx.Step(`^it should return nil$`, itShouldReturnNil)
	ctx.Step(`^it should return the first segment$`, itShouldReturnTheFirstSegment)
	ctx.Step(`^it should return the second segment$`, itShouldReturnTheSecondSegment)
	ctx.Step(`^it should return true$`, itShouldReturnTrue)
	ctx.Step(`^log should mention "([^"]*)"$`, logShouldMention)
	ctx.Step(`^navigate API is called$`, navigateAPIIsCalled)
	ctx.Step(`^navigate API returns error "([^"]*)"$`, navigateAPIReturnsError)
	ctx.Step(`^navigation API completes$`, navigationAPICompletes)
	ctx.Step(`^navigation API is called$`, navigationAPIIsCalled)
	ctx.Step(`^navigation begins for the segment$`, navigationBeginsForTheSegment)
	ctx.Step(`^navigation executes$`, navigationExecutes)
	ctx.Step(`^navigation should succeed$`, navigationShouldSucceed)
	ctx.Step(`^navigation to "([^"]*)" consumes (\d+) fuel$`, navigationToConsumesFuel)
	ctx.Step(`^no API calls should be made$`, noAPICallsShouldBeMade)
	ctx.Step(`^no containers exist$`, noContainersExist)
	ctx.Step(`^no fuel consumption should occur$`, noFuelConsumptionShouldOccur)
	ctx.Step(`^no goroutine leaks should be present$`, noGoroutineLeaksShouldBePresent)
	ctx.Step(`^no monitoring actions should be performed$`, noMonitoringActionsShouldBePerformed)
	ctx.Step(`^no navigate API calls should be made$`, noNavigateAPICallsShouldBeMade)
	ctx.Step(`^no refuel at C(\d+) because no fuel station$`, noRefuelAtCBecauseNoFuelStation)
	ctx.Step(`^no refuel checks should execute$`, noRefuelChecksShouldExecute)
	ctx.Step(`^no ships should remain locked after shutdown$`, noShipsShouldRemainLockedAfterShutdown)
	ctx.Step(`^no sleep should occur$`, noSleepShouldOccur)
	ctx.Step(`^only the planned refuel should execute$`, onlyThePlannedRefuelShouldExecute)
	ctx.Step(`^opportunistic refuel should NOT trigger$`, opportunisticRefuelShouldNOTTrigger)
	ctx.Step(`^opportunistic refuel should trigger$`, opportunisticRefuelShouldTrigger)
	ctx.Step(`^opportunistic refuel should trigger at B(\d+)$`, opportunisticRefuelShouldTriggerAtB)
	ctx.Step(`^orbit API is called$`, orbitAPIIsCalled)
	ctx.Step(`^planned refuel should execute at D(\d+)$`, plannedRefuelShouldExecuteAtD)
	ctx.Step(`^pre-departure refuel should NOT trigger$`, predepartureRefuelShouldNOTTrigger)
	ctx.Step(`^pre-departure refuel should trigger$`, predepartureRefuelShouldTrigger)
	ctx.Step(`^querying the database should return the assignment for ship "([^"]*)"$`, queryingTheDatabaseShouldReturnTheAssignmentForShip)
	ctx.Step(`^(\d+) recoveries failed$`, recoveriesFailed)
	ctx.Step(`^(\d+) recoveries were successful$`, recoveriesWereSuccessful)
	ctx.Step(`^refuel API is called$`, refuelAPIIsCalled)
	ctx.Step(`^refuel API should be called$`, refuelAPIShouldBeCalled)
	ctx.Step(`^refuel sequence executes$`, refuelSequenceExecutes)
	ctx.Step(`^route execution begins$`, routeExecutionBegins)
	ctx.Step(`^route FailRoute method should be called with error message$`, routeFailRouteMethodShouldBeCalledWithErrorMessage)
	ctx.Step(`^route has refuel_before_departure set to true$`, routeHasRefuel_before_departureSetToTrue)
	ctx.Step(`^route has (\d+) segment from A(\d+) to B(\d+)$`, routeHasSegmentFromAToB)
	ctx.Step(`^route requires refuel at "([^"]*)"$`, routeRequiresRefuelAt)
	ctx.Step(`^route should be marked as FAILED$`, routeShouldBeMarkedAsFAILED)
	ctx.Step(`^route should have (\d+) segments$`, routeShouldHaveSegments)
	ctx.Step(`^route status should be COMPLETED$`, routeStatusShouldBeCOMPLETED)
	ctx.Step(`^route status should be set to FAILED$`, routeStatusShouldBeSetToFAILED)
	ctx.Step(`^routing engine plans BURN mode for segment (\d+)$`, routingEnginePlansBURNModeForSegment)
	ctx.Step(`^routing engine plans CRUISE mode for next segment$`, routingEnginePlansCRUISEModeForNextSegment)
	ctx.Step(`^routing engine plans CRUISE mode for segment (\d+)$`, routingEnginePlansCRUISEModeForSegment)
	ctx.Step(`^routing engine plans DRIFT mode for next segment$`, routingEnginePlansDRIFTModeForNextSegment)
	ctx.Step(`^routing engine plans route with segments:$`, routingEnginePlansRouteWithSegments)
	ctx.Step(`^routing engine returns route with refuel_before_departure true$`, routingEngineReturnsRouteWithRefuel_before_departureTrue)
	ctx.Step(`^segment (\d+) executes$`, segmentExecutes)
	ctx.Step(`^segment (\d+) should execute from A(\d+) to B(\d+)$`, segmentShouldExecuteFromAToB)
	ctx.Step(`^segment (\d+) should execute from B(\d+) to C(\d+)$`, segmentShouldExecuteFromBToC)
	ctx.Step(`^segment (\d+) should execute from C(\d+) to D(\d+)$`, segmentShouldExecuteFromCToD)
	ctx.Step(`^segment (\d+) should execute to B(\d+)$`, segmentShouldExecuteToB)
	ctx.Step(`^segment (\d+) should execute to C(\d+)$`, segmentShouldExecuteToC)
	ctx.Step(`^segment (\d+) should execute to D(\d+)$`, segmentShouldExecuteToD)
	ctx.Step(`^segment (\d+) should execute to E(\d+)$`, segmentShouldExecuteToE)
	ctx.Step(`^ship Arrive method should be called if status is IN_TRANSIT$`, shipArriveMethodShouldBeCalledIfStatusIsIN_TRANSIT)
	ctx.Step(`^ship arrives at fuel station "([^"]*)" with (\d+) fuel$`, shipArrivesAtFuelStationWithFuel)
	ctx.Step(`^ship "([^"]*)" arrives at fuel station "([^"]*)" with (\d+)% fuel$`, shipArrivesAtFuelStationWithFuel)
	ctx.Step(`^ship "([^"]*)" arrives at "([^"]*)" with (\d+)% fuel$`, shipArrivesAtWithFuel)
	ctx.Step(`^ship "([^"]*)" attempts to refuel at "([^"]*)"$`, shipAttemptsToRefuelAt)
	ctx.Step(`^ship "([^"]*)" executes a route with dock refuel orbit navigate$`, shipExecutesARouteWithDockRefuelOrbitNavigate)
	ctx.Step(`^ship "([^"]*)" has an orphaned assignment to non-existent container "([^"]*)"$`, shipHasAnOrphanedAssignmentToNonexistentContainer)
	ctx.Step(`^ship "([^"]*)" has (\d+) fuel capacity$`, shipHasFuelCapacity)
	ctx.Step(`^ship "([^"]*)" is assigned to container "([^"]*)" with operation "([^"]*)"$`, shipIsAssignedToContainerWithOperation)
	ctx.Step(`^ship "([^"]*)" is at "([^"]*)"$`, shipIsAt)
	ctx.Step(`^ship "([^"]*)" is at fuel station "([^"]*)" with (\d+)% fuel$`, shipIsAtFuelStationWithFuel)
	ctx.Step(`^ship "([^"]*)" is at fuel station "([^"]*)" with low fuel$`, shipIsAtFuelStationWithLowFuel)
	ctx.Step(`^ship "([^"]*)" is at "([^"]*)" with (\d+)% fuel$`, shipIsAtWithFuel)
	ctx.Step(`^ship "([^"]*)" is at "([^"]*)" with (\d+) fuel$`, shipIsAtWithFuel)
	ctx.Step(`^ship "([^"]*)" is at "([^"]*)" with (\d+) fuel out of (\d+) capacity$`, shipIsAtWithFuelOutOfCapacity)
	ctx.Step(`^ship "([^"]*)" is DOCKED at "([^"]*)"$`, shipIsDOCKEDAt)
	ctx.Step(`^ship "([^"]*)" is IN_ORBIT at "([^"]*)" with low fuel$`, shipIsIN_ORBITAtWithLowFuel)
	ctx.Step(`^ship "([^"]*)" is IN_TRANSIT to "([^"]*)" arriving in (\d+) seconds$`, shipIsIN_TRANSITToArrivingInSeconds)
	ctx.Step(`^ship "([^"]*)" navigates from "([^"]*)" to "([^"]*)"$`, shipNavigatesFromTo)
	ctx.Step(`^ship "([^"]*)" navigates to destination$`, shipNavigatesToDestination)
	ctx.Step(`^ship "([^"]*)" navigates with segment travel time (\d+) seconds$`, shipNavigatesWithSegmentTravelTimeSeconds)
	ctx.Step(`^ship "([^"]*)" reports location "([^"]*)"$`, shipReportsLocation)
	ctx.Step(`^ship should arrive at D(\d+)$`, shipShouldArriveAtD)
	ctx.Step(`^ship should arrive at "([^"]*)" with (\d+)% fuel$`, shipShouldArriveAtWithFuel)
	ctx.Step(`^ship "([^"]*)" should be assigned to container "([^"]*)"$`, shipShouldBeAssignedToContainer)
	ctx.Step(`^ship should be IN_ORBIT after arrival$`, shipShouldBeIN_ORBITAfterArrival)
	ctx.Step(`^ship should be IN_ORBIT before navigation$`, shipShouldBeIN_ORBITBeforeNavigation)
	ctx.Step(`^ship should be IN_TRANSIT after navigate API call$`, shipShouldBeIN_TRANSITAfterNavigateAPICall)
	ctx.Step(`^ship should dock at "([^"]*)"$`, shipShouldDockAt)
	ctx.Step(`^ship should have (\d+) fuel after refuel at C(\d+)$`, shipShouldHaveFuelAfterRefuelAtC)
	ctx.Step(`^ship should have (\d+)% fuel at B(\d+)$`, shipShouldHaveFuelAtB)
	ctx.Step(`^ship should have (\d+)% fuel before departure$`, shipShouldHaveFuelBeforeDeparture)
	ctx.Step(`^ship should have (\d+) fuel remaining at B(\d+)$`, shipShouldHaveFuelRemainingAtB)
	ctx.Step(`^ship "([^"]*)" should no longer be assigned to any container$`, shipShouldNoLongerBeAssignedToAnyContainer)
	ctx.Step(`^ship "([^"]*)" should not be assigned to any container$`, shipShouldNotBeAssignedToAnyContainer)
	ctx.Step(`^ship should orbit after refuel$`, shipShouldOrbitAfterRefuel)
	ctx.Step(`^ship should refuel at C(\d+) because of planned refuel$`, shipShouldRefuelAtCBecauseOfPlannedRefuel)
	ctx.Step(`^ship should refuel before departing$`, shipShouldRefuelBeforeDeparting)
	ctx.Step(`^ship should refuel before starting journey$`, shipShouldRefuelBeforeStartingJourney)
	ctx.Step(`^ship should refuel to (\d+)\/(\d+)$`, shipShouldRefuelTo)
	ctx.Step(`^ship should refuel to full capacity$`, shipShouldRefuelToFullCapacity)
	ctx.Step(`^ship should remain in orbit$`, shipShouldRemainInOrbit)
	ctx.Step(`^ship "([^"]*)" should still be assigned to container "([^"]*)"$`, shipShouldStillBeAssignedToContainer)
	ctx.Step(`^ship should transition back to IN_ORBIT$`, shipShouldTransitionBackToIN_ORBIT)
	ctx.Step(`^ship should transition to DOCKED$`, shipShouldTransitionToDOCKED)
	ctx.Step(`^ship "([^"]*)" starts at "([^"]*)" with (\d+) fuel$`, shipStartsAtWithFuel)
	ctx.Step(`^ship "([^"]*)" starts navigation to "([^"]*)"$`, shipStartsNavigationTo)
	ctx.Step(`^ship state should be re-fetched after sleep$`, shipStateShouldBeRefetchedAfterSleep)
	ctx.Step(`^ship state should be re-fetched immediately$`, shipStateShouldBeRefetchedImmediately)
	ctx.Step(`^ship state should be re-synced after arrival$`, shipStateShouldBeResyncedAfterArrival)
	ctx.Step(`^ship state should still be re-fetched$`, shipStateShouldStillBeRefetched)
	ctx.Step(`^ship state should still be re-synced$`, shipStateShouldStillBeResynced)
	ctx.Step(`^(\d+) ships are assigned to running containers$`, shipsAreAssignedToRunningContainers)
	ctx.Step(`^ships exist for player (\d+):$`, shipsExistForPlayer)
	ctx.Step(`^(\d+) stale assignment should be cleaned up$`, staleAssignmentShouldBeCleanedUp)
	ctx.Step(`^(\d+) stale assignments should be cleaned up$`, staleAssignmentsShouldBeCleanedUp)
	ctx.Step(`^system "([^"]*)" has a cached graph with (\d+) waypoints$`, systemHasACachedGraphWithWaypoints)
	ctx.Step(`^system "([^"]*)" has cached graph structure only$`, systemHasCachedGraphStructureOnly)
	ctx.Step(`^system "([^"]*)" has no cached graph$`, systemHasNoCachedGraph)
	ctx.Step(`^system "([^"]*)" has only (\d+) waypoint cached$`, systemHasOnlyWaypointCached)
	ctx.Step(`^system "([^"]*)" has waypoint "([^"]*)" cached$`, systemHasWaypointCached)
	ctx.Step(`^system "([^"]*)" has (\d+) waypoints cached$`, systemHasWaypointsCached)
	ctx.Step(`^system "([^"]*)" has waypoints cached$`, systemHasWaypointsCached)
	ctx.Step(`^system "([^"]*)" has (\d+) waypoints with (\d+) fuel stations$`, systemHasWaypointsWithFuelStations)
	ctx.Step(`^system "([^"]*)" has zero waypoints in cache$`, systemHasZeroWaypointsInCache)
	ctx.Step(`^the API should be called to list waypoints$`, theAPIShouldBeCalledToListWaypoints)
	ctx.Step(`^the API will return successful delivery with (\d+) units delivered$`, theAPIWillReturnSuccessfulDeliveryWithUnitsDelivered)
	ctx.Step(`^the API will return (\d+) waypoints for system "([^"]*)"$`, theAPIWillReturnWaypointsForSystem)
	ctx.Step(`^the API will successfully fulfill the contract$`, theAPIWillSuccessfullyFulfillTheContract)
	ctx.Step(`^the assignment should be marked as stale$`, theAssignmentShouldBeMarkedAsStale)
	ctx.Step(`^the assignment should fail with error "([^"]*)"$`, theAssignmentShouldFailWithError)
	ctx.Step(`^the assignment was created (\d+) hours ago$`, theAssignmentWasCreatedHoursAgo)
	ctx.Step(`^the assignment was created (\d+) minutes ago$`, theAssignmentWasCreatedMinutesAgo)
	ctx.Step(`^the average iteration duration is (\d+)\.(\d+) seconds$`, theAverageIterationDurationIsSeconds)
	ctx.Step(`^the client disconnects after receiving the container_id$`, theClientDisconnectsAfterReceivingTheContainer_id)
	ctx.Step(`^the client sends a HealthCheck request$`, theClientSendsAHealthCheckRequest)
	ctx.Step(`^the client sends a NavigateShip request for ship "([^"]*)" to "([^"]*)"$`, theClientSendsANavigateShipRequestForShipTo)
	ctx.Step(`^the client sends NavigateShip requests for all (\d+) ships$`, theClientSendsNavigateShipRequestsForAllShips)
	ctx.Step(`^the client should receive a valid gRPC server response$`, theClientShouldReceiveAValidGRPCServerResponse)
	ctx.Step(`^the clock is mocked$`, theClockIsMocked)
	ctx.Step(`^the connection pool should be released$`, theConnectionPoolShouldBeReleased)
	ctx.Step(`^the connection should be accepted$`, theConnectionShouldBeAccepted)
	ctx.Step(`^the container "([^"]*)" exists and is running$`, theContainerExistsAndIsRunning)
	ctx.Step(`^the container "([^"]*)" has completed (\d+) iterations in (\d+) seconds$`, theContainerHasCompletedIterationsInSeconds)
	ctx.Step(`^the container max iterations is -(\d+)$`, theContainerMaxIterationsIs)
	ctx.Step(`^the container metadata should include destination "([^"]*)"$`, theContainerMetadataShouldIncludeDestination)
	ctx.Step(`^the container metadata should include ship_symbol "([^"]*)"$`, theContainerMetadataShouldIncludeShip_symbol)
	ctx.Step(`^the container "([^"]*)" no longer exists$`, theContainerNoLongerExists)
	ctx.Step(`^the container should be registered in the daemon$`, theContainerShouldBeRegisteredInTheDaemon)
	ctx.Step(`^the container should continue executing in the background$`, theContainerShouldContinueExecutingInTheBackground)
	ctx.Step(`^the container should finish successfully$`, theContainerShouldFinishSuccessfully)
	ctx.Step(`^the container should not be in COMPLETED status yet$`, theContainerShouldNotBeInCOMPLETEDStatusYet)
	ctx.Step(`^the container "([^"]*)" should remain running$`, theContainerShouldRemainRunning)
	ctx.Step(`^the container should still be allowed to finish$`, theContainerShouldStillBeAllowedToFinish)
	ctx.Step(`^the container "([^"]*)" should transition to "([^"]*)"$`, theContainerShouldTransitionTo)
	ctx.Step(`^the container status should eventually transition to "([^"]*)"$`, theContainerStatusShouldEventuallyTransitionTo)
	ctx.Step(`^the container status should remain "([^"]*)"$`, theContainerStatusShouldRemain)
	ctx.Step(`^the container "([^"]*)" transitions to "([^"]*)" status$`, theContainerTransitionsToStatus)
	ctx.Step(`^the contract should be marked as fulfilled$`, theContractShouldBeMarkedAsFulfilled)
	ctx.Step(`^the contract should be persisted with fulfilled status$`, theContractShouldBePersistedWithFulfilledStatus)
	ctx.Step(`^the contract should show (\d+) units fulfilled for "([^"]*)"$`, theContractShouldShowUnitsFulfilledFor)
	ctx.Step(`^the current flight mode should be "([^"]*)"$`, theCurrentFlightModeShouldBe)
	ctx.Step(`^the current segment should be nil$`, theCurrentSegmentShouldBeNil)
	ctx.Step(`^the current time is "([^"]*)"$`, theCurrentTimeIs)
	ctx.Step(`^the current_segment_index is (\d+)$`, theCurrent_segment_indexIs)
	ctx.Step(`^the current_segment_index should be (\d+)$`, theCurrent_segment_indexShouldBe)
	ctx.Step(`^the daemon completes shutdown$`, theDaemonCompletesShutdown)
	ctx.Step(`^the daemon process should exit cleanly$`, theDaemonProcessShouldExitCleanly)
	ctx.Step(`^the daemon receives shutdown signal$`, theDaemonReceivesShutdownSignal)
	ctx.Step(`^the daemon server is not running$`, theDaemonServerIsNotRunning)
	ctx.Step(`^the daemon server is running on socket "([^"]*)"$`, theDaemonServerIsRunningOnSocket)
	ctx.Step(`^the daemon server should be running$`, theDaemonServerShouldBeRunning)
	ctx.Step(`^the daemon server should start successfully$`, theDaemonServerShouldStartSuccessfully)
	ctx.Step(`^the daemon should complete shutdown successfully$`, theDaemonShouldCompleteShutdownSuccessfully)
	ctx.Step(`^the daemon should continue graceful shutdown$`, theDaemonShouldContinueGracefulShutdown)
	ctx.Step(`^the daemon should force shutdown after (\d+) seconds$`, theDaemonShouldForceShutdownAfterSeconds)
	ctx.Step(`^the daemon should initiate graceful shutdown$`, theDaemonShouldInitiateGracefulShutdown)
	ctx.Step(`^the daemon should not panic or exit immediately$`, theDaemonShouldNotPanicOrExitImmediately)
	ctx.Step(`^the daemon should shut down gracefully$`, theDaemonShouldShutDownGracefully)
	ctx.Step(`^the daemon should shut down within (\d+) seconds$`, theDaemonShouldShutDownWithinSeconds)
	ctx.Step(`^the daemon should stop accepting new connections$`, theDaemonShouldStopAcceptingNewConnections)
	ctx.Step(`^the daemon should stop all running containers$`, theDaemonShouldStopAllRunningContainers)
	ctx.Step(`^the daemon should wait for containers to fail$`, theDaemonShouldWaitForContainersToFail)
	ctx.Step(`^the daemon should wait for running containers to finish$`, theDaemonShouldWaitForRunningContainersToFinish)
	ctx.Step(`^the daemon should wait for the container to complete$`, theDaemonShouldWaitForTheContainerToComplete)
	ctx.Step(`^the daemon should wait up to (\d+) seconds$`, theDaemonShouldWaitUpToSeconds)
	ctx.Step(`^the daemon starts up$`, theDaemonStartsUp)
	ctx.Step(`^the daemon startup should fail$`, theDaemonStartupShouldFail)
	ctx.Step(`^the database has (\d+) active connections from the daemon$`, theDatabaseHasActiveConnectionsFromTheDaemon)
	ctx.Step(`^the database is initialized$`, theDatabaseIsInitialized)
	ctx.Step(`^the database should have (\d+) waypoints for system "([^"]*)"$`, theDatabaseShouldHaveWaypointsForSystem)
	ctx.Step(`^the error occurs$`, theErrorOccurs)
	ctx.Step(`^the error occurs during execution$`, theErrorOccursDuringExecution)
	ctx.Step(`^the error should be returned to handler$`, theErrorShouldBeReturnedToHandler)
	ctx.Step(`^the error should include "([^"]*)"$`, theErrorShouldInclude)
	ctx.Step(`^the error should include container_id "([^"]*)"$`, theErrorShouldIncludeContainer_id)
	ctx.Step(`^the error should propagate to caller$`, theErrorShouldPropagateToCaller)
	ctx.Step(`^the extracted system symbol should be "([^"]*)"$`, theExtractedSystemSymbolShouldBe)
	ctx.Step(`^the failed containers should be marked as FAILED$`, theFailedContainersShouldBeMarkedAsFAILED)
	ctx.Step(`^the failed recovery count should be (\d+)$`, theFailedRecoveryCountShouldBe)
	ctx.Step(`^the fuel should be full$`, theFuelShouldBeFull)
	ctx.Step(`^the graph should be enriched with trait data$`, theGraphShouldBeEnrichedWithTraitData)
	ctx.Step(`^the graph should be loaded from database cache$`, theGraphShouldBeLoadedFromDatabaseCache)
	ctx.Step(`^the graph should be saved to system_graphs table$`, theGraphShouldBeSavedToSystem_graphsTable)
	ctx.Step(`^the handler should calculate (\d+) seconds wait time$`, theHandlerShouldCalculateSecondsWaitTime)
	ctx.Step(`^the handler should detect IN_TRANSIT state$`, theHandlerShouldDetectIN_TRANSITState)
	ctx.Step(`^the handler should sleep for (\d+) seconds$`, theHandlerShouldSleepForSeconds)
	ctx.Step(`^the handler should wait for arrival$`, theHandlerShouldWaitForArrival)
	ctx.Step(`^the health check should be skipped due to cooldown$`, theHealthCheckShouldBeSkippedDueToCooldown)
	ctx.Step(`^the health check should execute$`, theHealthCheckShouldExecute)
	ctx.Step(`^the health monitor attempts recovery for ship "([^"]*)"$`, theHealthMonitorAttemptsRecoveryForShip)
	ctx.Step(`^the health monitor attempts recovery for ship "([^"]*)" (\d+) times$`, theHealthMonitorAttemptsRecoveryForShipTimes)
	ctx.Step(`^the health monitor check interval is (\d+) seconds$`, theHealthMonitorCheckIntervalIsSeconds)
	ctx.Step(`^the health monitor detects ship "([^"]*)" as stuck$`, theHealthMonitorDetectsShipAsStuck)
	ctx.Step(`^the health monitor has attempted (\d+) recoveries$`, theHealthMonitorHasAttemptedRecoveries)
	ctx.Step(`^the health monitor is triggered to run$`, theHealthMonitorIsTriggeredToRun)
	ctx.Step(`^the health monitor last ran (\d+) seconds ago$`, theHealthMonitorLastRanSecondsAgo)
	ctx.Step(`^the health monitor reports metrics$`, theHealthMonitorReportsMetrics)
	ctx.Step(`^the health monitor runs a check$`, theHealthMonitorRunsACheck)
	ctx.Step(`^the index should be (\d+)$`, theIndexShouldBe)
	ctx.Step(`^the last check timestamp should be updated$`, theLastCheckTimestampShouldBeUpdated)
	ctx.Step(`^the log entries should be different from the first page$`, theLogEntriesShouldBeDifferentFromTheFirstPage)
	ctx.Step(`^the log level should be "([^"]*)"$`, theLogLevelShouldBe)
	ctx.Step(`^the log message should be "([^"]*)"$`, theLogMessageShouldBe)
	ctx.Step(`^the log should be persisted to the database$`, theLogShouldBePersistedToTheDatabase)
	ctx.Step(`^the log should have a container_id of "([^"]*)"$`, theLogShouldHaveAContainer_idOf)
	ctx.Step(`^the log should have a player_id of (\d+)$`, theLogShouldHaveAPlayer_idOf)
	ctx.Step(`^the log should have a timestamp within the last (\d+) seconds$`, theLogShouldHaveATimestampWithinTheLastSeconds)
	ctx.Step(`^the max recovery attempts is (\d+)$`, theMaxRecoveryAttemptsIs)
	ctx.Step(`^the mode name should be "([^"]*)"$`, theModeNameShouldBe)
	ctx.Step(`^the navigation command should be rejected with error "([^"]*)"$`, theNavigationCommandShouldBeRejectedWithError)
	ctx.Step(`^the navigation segment completes$`, theNavigationSegmentCompletes)
	ctx.Step(`^the navigation utilities are available$`, theNavigationUtilitiesAreAvailable)
	ctx.Step(`^the new fuel should have capacity (\d+)$`, theNewFuelShouldHaveCapacity)
	ctx.Step(`^the original fuel should still have current (\d+)$`, theOriginalFuelShouldStillHaveCurrent)
	ctx.Step(`^the orphaned assignment cleanup count should be (\d+)$`, theOrphanedAssignmentCleanupCountShouldBe)
	ctx.Step(`^the reassignment should fail with error "([^"]*)"$`, theReassignmentShouldFailWithError)
	ctx.Step(`^the recovery action forces arrival at destination$`, theRecoveryActionForcesArrivalAtDestination)
	ctx.Step(`^the recovery action will fail with error "([^"]*)"$`, theRecoveryActionWillFailWithError)
	ctx.Step(`^the recovery attempt count for ship "([^"]*)" should be (\d+)$`, theRecoveryAttemptCountForShipShouldBe)
	ctx.Step(`^the recovery attempt count for ship "([^"]*)" should be reset to (\d+)$`, theRecoveryAttemptCountForShipShouldBeResetTo)
	ctx.Step(`^the recovery attempt should be logged$`, theRecoveryAttemptShouldBeLogged)
	ctx.Step(`^the recovery should be marked as failed$`, theRecoveryShouldBeMarkedAsFailed)
	ctx.Step(`^the recovery should be marked as successful$`, theRecoveryShouldBeMarkedAsSuccessful)
	ctx.Step(`^the recovery timeout is (\d+) seconds$`, theRecoveryTimeoutIsSeconds)
	ctx.Step(`^the remaining segment should be the second segment$`, theRemainingSegmentShouldBeTheSecondSegment)
	ctx.Step(`^the response should have status "([^"]*)"$`, theResponseShouldHaveStatus)
	ctx.Step(`^the response should include a container_id$`, theResponseShouldIncludeAContainer_id)
	ctx.Step(`^the response should include active_containers count$`, theResponseShouldIncludeActive_containersCount)
	ctx.Step(`^the response should include version "([^"]*)"$`, theResponseShouldIncludeVersion)
	ctx.Step(`^the response should return within (\d+) milliseconds$`, theResponseShouldReturnWithinMilliseconds)
	ctx.Step(`^the response status should be "([^"]*)"$`, theResponseStatusShouldBe)
	ctx.Step(`^the routing engine plans direct route without planned refuel$`, theRoutingEnginePlansDirectRouteWithoutPlannedRefuel)
	ctx.Step(`^the (\d+)-second timeout expires$`, theSecondTimeoutExpires)
	ctx.Step(`^the segment has requires_refuel set to true$`, theSegmentHasRequires_refuelSetToTrue)
	ctx.Step(`^the ship assignment for "([^"]*)" should remain active$`, theShipAssignmentForShouldRemainActive)
	ctx.Step(`^the ship assignment operation should be "([^"]*)"$`, theShipAssignmentOperationShouldBe)
	ctx.Step(`^the ship assignment player_id should be (\d+)$`, theShipAssignmentPlayer_idShouldBe)
	ctx.Step(`^the ship assignment release_reason should be "([^"]*)"$`, theShipAssignmentRelease_reasonShouldBe)
	ctx.Step(`^the ship assignment should be auto-released with reason "([^"]*)"$`, theShipAssignmentShouldBeAutoreleasedWithReason)
	ctx.Step(`^the ship assignment should be persisted in the database$`, theShipAssignmentShouldBePersistedInTheDatabase)
	ctx.Step(`^the ship assignment should have a released_at timestamp$`, theShipAssignmentShouldHaveAReleased_atTimestamp)
	ctx.Step(`^the ship assignment should have an assigned_at timestamp$`, theShipAssignmentShouldHaveAnAssigned_atTimestamp)
	ctx.Step(`^the ship assignment status should be "([^"]*)"$`, theShipAssignmentStatusShouldBe)
	ctx.Step(`^the ship details should include assignment status "([^"]*)"$`, theShipDetailsShouldIncludeAssignmentStatus)
	ctx.Step(`^the ship details should include container_id "([^"]*)"$`, theShipDetailsShouldIncludeContainer_id)
	ctx.Step(`^the ship has already failed recovery (\d+) times$`, theShipHasAlreadyFailedRecoveryTimes)
	ctx.Step(`^the ship has been healthy for (\d+) seconds$`, theShipHasBeenHealthyForSeconds)
	ctx.Step(`^the ship has not arrived at its destination$`, theShipHasNotArrivedAtItsDestination)
	ctx.Step(`^the ship is stuck due to missing arrival$`, theShipIsStuckDueToMissingArrival)
	ctx.Step(`^the ship "([^"]*)" navigation status is now "([^"]*)"$`, theShipNavigationStatusIsNow)
	ctx.Step(`^the ship navigation status should transition to "([^"]*)"$`, theShipNavigationStatusShouldTransitionTo)
	ctx.Step(`^the ship should be in orbit at "([^"]*)"$`, theShipShouldBeInOrbitAt)
	ctx.Step(`^the ship "([^"]*)" should be marked as abandoned$`, theShipShouldBeMarkedAsAbandoned)
	ctx.Step(`^the ship "([^"]*)" should be removed from watch list$`, theShipShouldBeRemovedFromWatchList)
	ctx.Step(`^the socket file should not exist$`, theSocketFileShouldNotExist)
	ctx.Step(`^the socket permissions should be (\d+)$`, theSocketPermissionsShouldBe)
	ctx.Step(`^the socket should be active$`, theSocketShouldBeActive)
	ctx.Step(`^the stale assignment for ship "([^"]*)" should be detected$`, theStaleAssignmentForShipShouldBeDetected)
	ctx.Step(`^the stuck ship count should be (\d+)$`, theStuckShipCountShouldBe)
	ctx.Step(`^the stuck ship "([^"]*)" should be detected$`, theStuckShipShouldBeDetected)
	ctx.Step(`^the stuck ship "([^"]*)" should not be detected$`, theStuckShipShouldNotBeDetected)
	ctx.Step(`^the success rate should be (\d+) percent$`, theSuccessRateShouldBePercent)
	ctx.Step(`^the total count of all logs should be (\d+)$`, theTotalCountOfAllLogsShouldBe)
	ctx.Step(`^the total distance should be (\d+)\.(\d+)$`, theTotalDistanceShouldBe)
	ctx.Step(`^the total fuel required should be (\d+)$`, theTotalFuelRequiredShouldBe)
	ctx.Step(`^the total recovery attempts should be (\d+)$`, theTotalRecoveryAttemptsShouldBe)
	ctx.Step(`^the total travel time should be (\d+)$`, theTotalTravelTimeShouldBe)
	ctx.Step(`^the Unix socket at "([^"]*)" should be removed$`, theUnixSocketAtShouldBeRemoved)
	ctx.Step(`^the Unix socket should exist at "([^"]*)"$`, theUnixSocketShouldExistAt)
	ctx.Step(`^the wait time should be (\d+) seconds$`, theWaitTimeShouldBeSeconds)
	ctx.Step(`^the waypoint list should contain "([^"]*)"$`, theWaypointListShouldContain)
	ctx.Step(`^the waypoint should be saved in the database$`, theWaypointShouldBeSavedInTheDatabase)
	ctx.Step(`^the waypoint should have coordinates \((\d+)\.(\d+), (\d+)\.(\d+)\)$`, theWaypointShouldHaveCoordinates)
	ctx.Step(`^the waypoint should have fuel available$`, theWaypointShouldHaveFuelAvailable)
	ctx.Step(`^the waypoint should have traits "([^"]*)"$`, theWaypointShouldHaveTraits)
	ctx.Step(`^the waypoint should have type "([^"]*)"$`, theWaypointShouldHaveType)
	ctx.Step(`^the waypoint should have x coordinate (\d+)\.(\d+)$`, theWaypointShouldHaveXCoordinate)
	ctx.Step(`^the waypoint should have y coordinate (\d+)\.(\d+)$`, theWaypointShouldHaveYCoordinate)
	ctx.Step(`^then first segment should execute$`, thenFirstSegmentShouldExecute)
	ctx.Step(`^then navigation to "([^"]*)" should begin$`, thenNavigationToShouldBegin)
	ctx.Step(`^then segment to B(\d+) should execute$`, thenSegmentToBShouldExecute)
	ctx.Step(`^there should be (\d+) remaining segment$`, thereShouldBeRemainingSegment)
	ctx.Step(`^there should be (\d+) remaining segments$`, thereShouldBeRemainingSegments)
	ctx.Step(`^total sleep time should be (\d+) seconds$`, totalSleepTimeShouldBeSeconds)
	ctx.Step(`^(\d+) units should be delivered$`, unitsShouldBeDelivered)
	ctx.Step(`^wait time should be (\d+) seconds$`, waitTimeShouldBeSeconds)
	ctx.Step(`^waypoint "([^"]*)" exists in database for system "([^"]*)" with:$`, waypointExistsInDatabaseForSystemWith)
	ctx.Step(`^waypoint "([^"]*)" has no fuel available$`, waypointHasNoFuelAvailable)
	ctx.Step(`^waypoint "([^"]*)" has no fuel station$`, waypointHasNoFuelStation)
	ctx.Step(`^waypoint "([^"]*)" has no fuel station trait$`, waypointHasNoFuelStationTrait)
	ctx.Step(`^waypoint "([^"]*)" has no traits in waypoints table$`, waypointHasNoTraitsInWaypointsTable)
	ctx.Step(`^waypoint "([^"]*)" has trait "([^"]*)" and fuel available$`, waypointHasTraitAndFuelAvailable)
	ctx.Step(`^waypoint "([^"]*)" has trait "([^"]*)" in waypoints table$`, waypointHasTraitInWaypointsTable)
	ctx.Step(`^waypoint "([^"]*)" is a fuel station$`, waypointIsAFuelStation)
	ctx.Step(`^waypoint "([^"]*)" is NOT cached$`, waypointIsNOTCached)
	ctx.Step(`^waypoint "([^"]*)" is NOT in the cache$`, waypointIsNOTInTheCache)
	ctx.Step(`^waypoint "([^"]*)" should be enriched with has_fuel false$`, waypointShouldBeEnrichedWithHas_fuelFalse)
	ctx.Step(`^waypoint "([^"]*)" should be enriched with has_fuel true$`, waypointShouldBeEnrichedWithHas_fuelTrue)
	ctx.Step(`^waypoint "([^"]*)" should exist in the database$`, waypointShouldExistInTheDatabase)
	ctx.Step(`^waypoint "([^"]*)" should have coordinates \((\d+)\.(\d+), -(\d+)\.(\d+)\)$`, waypointShouldHaveCoordinates)
	ctx.Step(`^waypoint "([^"]*)" should have fuel available$`, waypointShouldHaveFuelAvailable)
	ctx.Step(`^waypoint "([^"]*)" should have orbitals "([^"]*)"$`, waypointShouldHaveOrbitals)
	ctx.Step(`^waypoint "([^"]*)" should have traits "([^"]*)"$`, waypointShouldHaveTraits)
	ctx.Step(`^waypoints exist in database for system "([^"]*)":$`, waypointsExistInDatabaseForSystem)
	ctx.Step(`^waypoints should be enriched with has_fuel trait data$`, waypointsShouldBeEnrichedWithHas_fuelTraitData)
	ctx.Step(`^waypoints should be saved to waypoints table$`, waypointsShouldBeSavedToWaypointsTable)
}
[0m
=== NAME  TestFeatures
    bdd_test.go:22: non-zero status returned, failed to run feature tests
--- FAIL: TestFeatures (6.56s)
    --- PASS: TestFeatures/Create_container_with_valid_data (0.00s)
    --- PASS: TestFeatures/Create_container_with_infinite_iterations (0.00s)
    --- PASS: TestFeatures/Create_container_with_metadata (0.00s)
    --- PASS: TestFeatures/Start_container_from_pending (0.00s)
    --- PASS: TestFeatures/Start_container_from_stopped (0.00s)
    --- PASS: TestFeatures/Cannot_start_container_from_running (0.00s)
    --- PASS: TestFeatures/Cannot_start_container_from_completed (0.00s)
    --- PASS: TestFeatures/Complete_container_from_running (0.00s)
    --- PASS: TestFeatures/Cannot_complete_container_from_pending (0.00s)
    --- PASS: TestFeatures/Fail_container_from_running (0.00s)
    --- PASS: TestFeatures/Cannot_fail_container_from_completed (0.00s)
    --- PASS: TestFeatures/Stop_container_from_running_transitions_to_stopping (0.00s)
    --- PASS: TestFeatures/Mark_stopped_finalizes_stop_transition (0.00s)
    --- PASS: TestFeatures/Cannot_mark_stopped_when_not_stopping (0.00s)
    --- PASS: TestFeatures/Cannot_stop_already_completed_container (0.00s)
    --- PASS: TestFeatures/Increment_iteration_advances_counter (0.00s)
    --- PASS: TestFeatures/Cannot_increment_iteration_when_not_running (0.00s)
    --- PASS: TestFeatures/Should_continue_with_infinite_iterations (0.00s)
    --- PASS: TestFeatures/Should_continue_with_remaining_iterations (0.00s)
    --- PASS: TestFeatures/Should_not_continue_when_iterations_exhausted (0.00s)
    --- PASS: TestFeatures/Multiple_iterations_in_sequence (0.00s)
    --- PASS: TestFeatures/Failed_container_can_be_restarted (0.00s)
    --- PASS: TestFeatures/Container_at_max_restarts_cannot_be_restarted (0.00s)
    --- PASS: TestFeatures/Running_container_cannot_be_restarted (0.00s)
    --- PASS: TestFeatures/Reset_container_for_restart (0.00s)
    --- PASS: TestFeatures/Cannot_reset_container_exceeding_restart_limit (0.00s)
    --- PASS: TestFeatures/Update_metadata_adds_new_keys (0.00s)
    --- PASS: TestFeatures/Update_metadata_overwrites_existing_keys (0.00s)
    --- PASS: TestFeatures/Get_metadata_value_returns_value_if_exists (0.00s)
    --- PASS: TestFeatures/Get_metadata_value_returns_false_if_not_exists (0.00s)
    --- PASS: TestFeatures/Is_running_returns_true_when_running (0.00s)
    --- PASS: TestFeatures/Is_running_returns_false_when_pending (0.00s)
    --- PASS: TestFeatures/Is_finished_returns_true_when_completed (0.00s)
    --- PASS: TestFeatures/Is_finished_returns_true_when_failed (0.00s)
    --- PASS: TestFeatures/Is_finished_returns_true_when_stopped (0.00s)
    --- PASS: TestFeatures/Is_finished_returns_false_when_running (0.00s)
    --- PASS: TestFeatures/Is_stopping_returns_true_when_stopping (0.00s)
    --- PASS: TestFeatures/Is_stopping_returns_false_when_running (0.00s)
    --- PASS: TestFeatures/Runtime_duration_returns_zero_when_not_started (0.00s)
    --- PASS: TestFeatures/Runtime_duration_calculates_correctly_for_running_container (0.00s)
    --- PASS: TestFeatures/Runtime_duration_uses_stopped_time_when_stopped (0.00s)
    --- PASS: TestFeatures/Create_a_valid_contract_with_single_delivery (0.00s)
    --- PASS: TestFeatures/Accept_a_pending_contract (0.00s)
    --- PASS: TestFeatures/Cannot_accept_an_already_accepted_contract (0.00s)
    --- PASS: TestFeatures/Deliver_cargo_for_valid_delivery (0.00s)
    --- PASS: TestFeatures/Deliver_remaining_cargo_completes_delivery (0.00s)
    --- PASS: TestFeatures/Cannot_deliver_more_than_required (0.00s)
    --- PASS: TestFeatures/Cannot_deliver_invalid_trade_symbol (0.00s)
    --- PASS: TestFeatures/Check_if_contract_can_be_fulfilled_(all_complete) (0.00s)
    --- PASS: TestFeatures/Check_if_contract_cannot_be_fulfilled_(incomplete) (0.00s)
    --- PASS: TestFeatures/Fulfill_a_complete_contract (0.00s)
    --- PASS: TestFeatures/Cannot_fulfill_incomplete_contract (0.00s)
    --- PASS: TestFeatures/Create_market_with_multiple_trade_goods (0.00s)
    --- PASS: TestFeatures/Create_market_with_no_trade_goods (0.00s)
    --- PASS: TestFeatures/Find_specific_trade_good_in_market (0.00s)
    --- PASS: TestFeatures/Check_if_market_has_specific_good (0.00s)
    --- PASS: TestFeatures/Count_goods_in_market (0.00s)
    --- PASS: TestFeatures/Reject_market_with_empty_waypoint_symbol (0.00s)
    --- PASS: TestFeatures/Reject_market_with_invalid_timestamp (0.00s)
    --- PASS: TestFeatures/Create_valid_trade_good_with_all_fields (0.00s)
    --- PASS: TestFeatures/Create_trade_good_with_optional_nil_fields (0.00s)
    --- PASS: TestFeatures/Reject_trade_good_with_negative_purchase_price (0.00s)
    --- PASS: TestFeatures/Reject_trade_good_with_negative_sell_price (0.00s)
    --- PASS: TestFeatures/Reject_trade_good_with_negative_trade_volume (0.00s)
    --- PASS: TestFeatures/Reject_trade_good_with_empty_symbol (0.00s)
    --- PASS: TestFeatures/Accept_valid_supply_values (0.00s)
    --- PASS: TestFeatures/Accept_valid_activity_values (0.00s)
    --- PASS: TestFeatures/Reject_invalid_supply_value (0.00s)
    --- PASS: TestFeatures/Reject_invalid_activity_value (0.00s)
    --- PASS: TestFeatures/Create_route_segment_with_required_fields (0.00s)
    --- PASS: TestFeatures/Create_route_segment_with_refuel_flag (0.00s)
    --- PASS: TestFeatures/Create_route_with_valid_data (0.00s)
    --- PASS: TestFeatures/Can_create_route_with_empty_segments_for_already-at-destination_case (0.00s)
    --- PASS: TestFeatures/Cannot_create_route_with_disconnected_segments (0.00s)
    --- PASS: TestFeatures/Cannot_create_route_when_segment_exceeds_fuel_capacity (0.00s)
    --- PASS: TestFeatures/Allow_segment_at_capacity_limit (0.00s)
    --- PASS: TestFeatures/Route_starts_in_planned_status (0.00s)
    --- PASS: TestFeatures/Start_execution_transitions_to_executing (0.00s)
    --- PASS: TestFeatures/Cannot_start_execution_when_already_executing (0.00s)
    --- PASS: TestFeatures/Cannot_start_execution_when_completed (0.00s)
    --- PASS: TestFeatures/Complete_segment_advances_index (0.00s)
    --- PASS: TestFeatures/Complete_segment_multiple_times (0.00s)
    --- PASS: TestFeatures/Complete_segment_transitions_to_completed_when_done (0.00s)
    --- PASS: TestFeatures/Cannot_complete_segment_when_not_executing (0.00s)
    --- PASS: TestFeatures/Fail_route_transitions_to_failed (0.00s)
    --- PASS: TestFeatures/Abort_route_transitions_to_aborted (0.00s)
    --- PASS: TestFeatures/Calculate_total_distance (0.00s)
    --- PASS: TestFeatures/Calculate_total_fuel_required (0.00s)
    --- PASS: TestFeatures/Calculate_total_travel_time (0.00s)
    --- PASS: TestFeatures/Calculations_with_single_segment (0.00s)
    --- PASS: TestFeatures/Get_first_segment_initially (0.00s)
    --- PASS: TestFeatures/Get_next_segment_after_completion (0.00s)
    --- PASS: TestFeatures/Returns_nil_when_route_completed (0.00s)
    --- PASS: TestFeatures/Returns_all_segments_initially (0.00s)
    --- PASS: TestFeatures/Returns_remaining_after_completion (0.00s)
    --- PASS: TestFeatures/Returns_empty_list_when_completed (0.00s)
    --- PASS: TestFeatures/Returns_zero_initially (0.00s)
    --- PASS: TestFeatures/Returns_updated_index_after_completion (0.00s)
    --- PASS: TestFeatures/Returns_segment_count_when_completed (0.00s)
    --- PASS: TestFeatures/Has_refuel_at_start_when_route_requires_refuel_before_departure (0.00s)
    --- PASS: TestFeatures/Does_not_have_refuel_at_start_when_route_does_not_require_refuel_before_departure (0.00s)
    --- PASS: TestFeatures/NextSegment_returns_first_segment_initially (0.00s)
    --- PASS: TestFeatures/NextSegment_returns_current_segment_when_executing (0.00s)
    --- PASS: TestFeatures/NextSegment_returns_nil_when_route_completed (0.00s)
    --- PASS: TestFeatures/IsComplete_returns_false_when_route_is_planned (0.00s)
    --- PASS: TestFeatures/IsComplete_returns_false_when_route_is_executing (0.00s)
    --- PASS: TestFeatures/IsComplete_returns_true_when_route_is_completed (0.00s)
    --- PASS: TestFeatures/IsFailed_returns_false_when_route_is_planned (0.00s)
    --- PASS: TestFeatures/IsFailed_returns_false_when_route_is_executing (0.01s)
    --- PASS: TestFeatures/IsFailed_returns_true_when_route_is_failed (0.00s)
    --- PASS: TestFeatures/Create_ship_with_valid_data (0.00s)
    --- PASS: TestFeatures/Create_ship_with_invalid_empty_symbol (0.01s)
    --- PASS: TestFeatures/Create_ship_with_zero_player_id (0.00s)
    --- PASS: TestFeatures/Create_ship_with_negative_player_id (0.00s)
    --- PASS: TestFeatures/Create_ship_with_negative_fuel_capacity (0.00s)
    --- PASS: TestFeatures/Create_ship_with_mismatched_fuel_capacity (0.00s)
    --- PASS: TestFeatures/Create_ship_with_negative_cargo_capacity (0.00s)
    --- PASS: TestFeatures/Create_ship_with_negative_cargo_units (0.00s)
    --- PASS: TestFeatures/Create_ship_with_cargo_units_exceeding_capacity (0.00s)
    --- PASS: TestFeatures/Create_ship_with_zero_engine_speed (0.00s)
    --- PASS: TestFeatures/Create_ship_with_negative_engine_speed (0.00s)
    --- PASS: TestFeatures/Create_ship_with_invalid_nav_status (0.00s)
    --- PASS: TestFeatures/Depart_from_docked_to_in_orbit (0.00s)
    --- PASS: TestFeatures/Depart_when_in_transit_raises_error (0.00s)
    --- PASS: TestFeatures/Dock_from_in_orbit_to_docked (0.00s)
    --- PASS: TestFeatures/Dock_when_in_transit_raises_error (0.00s)
    --- PASS: TestFeatures/Start_transit_from_in_orbit (0.00s)
    --- PASS: TestFeatures/Start_transit_when_not_in_orbit_raises_error (0.00s)
    --- PASS: TestFeatures/Arrive_from_in_transit_to_in_orbit (0.00s)
    --- PASS: TestFeatures/Arrive_when_not_in_transit_raises_error (0.00s)
    --- PASS: TestFeatures/Ensure_in_orbit_from_docked_transitions_to_orbit (0.00s)
    --- PASS: TestFeatures/Ensure_in_orbit_when_already_in_orbit_returns_false (0.00s)
    --- PASS: TestFeatures/Ensure_in_orbit_when_in_transit_raises_error (0.00s)
    --- PASS: TestFeatures/Ensure_docked_from_in_orbit_transitions_to_docked (0.00s)
    --- PASS: TestFeatures/Ensure_docked_when_already_docked_returns_false (0.00s)
    --- PASS: TestFeatures/Ensure_docked_when_in_transit_raises_error (0.00s)
    --- PASS: TestFeatures/Consume_fuel_reduces_fuel_amount (0.00s)
    --- PASS: TestFeatures/Consume_fuel_with_zero_amount (0.00s)
    --- FAIL: TestFeatures/Consume_fuel_with_negative_amount_raises_error (0.00s)
    --- FAIL: TestFeatures/Consume_fuel_more_than_available_raises_error (0.00s)
    --- PASS: TestFeatures/Consume_all_fuel (0.00s)
    --- PASS: TestFeatures/Refuel_increases_fuel_amount (0.00s)
    --- PASS: TestFeatures/Refuel_with_zero_amount (0.00s)
    --- PASS: TestFeatures/Refuel_with_negative_amount_raises_error (0.00s)
    --- PASS: TestFeatures/Refuel_caps_at_capacity (0.00s)
    --- PASS: TestFeatures/Refuel_to_full_when_partially_filled (0.00s)
    --- PASS: TestFeatures/Refuel_to_full_when_already_full (0.00s)
    --- PASS: TestFeatures/Can_navigate_to_nearby_destination_with_enough_fuel (0.00s)
    --- PASS: TestFeatures/Cannot_navigate_to_destination_without_enough_fuel (0.00s)
    --- PASS: TestFeatures/Can_navigate_to_same_location (0.00s)
    --- PASS: TestFeatures/Calculate_fuel_for_trip_with_cruise_mode (0.00s)
    --- PASS: TestFeatures/Calculate_fuel_for_trip_with_drift_mode (0.00s)
    --- PASS: TestFeatures/Calculate_fuel_for_trip_with_burn_mode (0.00s)
    --- PASS: TestFeatures/Needs_refuel_for_journey_with_low_fuel (0.00s)
    --- PASS: TestFeatures/Does_not_need_refuel_with_enough_fuel_and_zero_safety_margin (0.00s)
    --- PASS: TestFeatures/Calculate_travel_time_with_cruise_mode (0.00s)
    --- PASS: TestFeatures/Calculate_travel_time_with_drift_mode (0.00s)
    --- PASS: TestFeatures/Calculate_travel_time_with_burn_mode (0.00s)
    --- FAIL: TestFeatures/Select_optimal_flight_mode_with_high_fuel (0.00s)
    --- FAIL: TestFeatures/Select_optimal_flight_mode_with_low_fuel (0.00s)
    --- FAIL: TestFeatures/Select_optimal_flight_mode_with_medium_fuel (0.00s)
    --- PASS: TestFeatures/Has_cargo_space_with_empty_cargo (0.00s)
    --- PASS: TestFeatures/Has_cargo_space_with_partial_cargo (0.00s)
    --- PASS: TestFeatures/Has_cargo_space_with_full_cargo (0.00s)
    --- PASS: TestFeatures/Has_cargo_space_with_specific_units (0.00s)
    --- PASS: TestFeatures/Has_cargo_space_with_specific_units_exceeding_available (0.00s)
    --- PASS: TestFeatures/Available_cargo_space_with_empty_cargo (0.00s)
    --- PASS: TestFeatures/Available_cargo_space_with_partial_cargo (0.00s)
    --- PASS: TestFeatures/Available_cargo_space_with_full_cargo (0.00s)
    --- FAIL: TestFeatures/Is_cargo_empty_when_empty (0.00s)
    --- FAIL: TestFeatures/Is_cargo_empty_when_not_empty (0.01s)
    --- FAIL: TestFeatures/Is_cargo_full_when_full (0.00s)
    --- FAIL: TestFeatures/Is_cargo_full_when_not_full (0.00s)
    --- PASS: TestFeatures/Is_docked_when_docked (0.00s)
    --- PASS: TestFeatures/Is_docked_when_in_orbit (0.00s)
    --- PASS: TestFeatures/Is_in_orbit_when_in_orbit (0.00s)
    --- PASS: TestFeatures/Is_in_orbit_when_docked (0.00s)
    --- PASS: TestFeatures/Is_in_transit_when_in_transit (0.00s)
    --- PASS: TestFeatures/Is_in_transit_when_docked (0.00s)
    --- PASS: TestFeatures/Is_at_location_when_at_location (0.00s)
    --- PASS: TestFeatures/Is_at_location_when_not_at_location (0.00s)
    --- PASS: TestFeatures/Should_refuel_opportunistically_when_at_fuel_station_with_low_fuel (0.00s)
    --- PASS: TestFeatures/Should_not_refuel_opportunistically_when_fuel_above_threshold (0.00s)
    --- PASS: TestFeatures/Should_not_refuel_opportunistically_when_no_fuel_available_at_waypoint (0.00s)
    --- PASS: TestFeatures/Should_prevent_drift_mode_when_fuel_below_threshold (0.00s)
    --- PASS: TestFeatures/Should_not_prevent_drift_mode_when_fuel_above_threshold (0.00s)
    --- PASS: TestFeatures/Should_not_prevent_drift_mode_when_not_using_drift_flight_mode (0.00s)
    --- PASS: TestFeatures/Create_cargo_item_with_valid_data (0.00s)
    --- PASS: TestFeatures/Create_cargo_item_with_empty_symbol_fails (0.00s)
    --- PASS: TestFeatures/Create_cargo_item_with_negative_units_fails (0.00s)
    --- PASS: TestFeatures/Create_cargo_item_with_zero_units_succeeds (0.00s)
    --- PASS: TestFeatures/Create_cargo_with_valid_data (0.00s)
    --- PASS: TestFeatures/Create_empty_cargo_succeeds (0.00s)
    --- PASS: TestFeatures/Create_cargo_with_negative_units_fails (0.00s)
    --- PASS: TestFeatures/Create_cargo_with_negative_capacity_fails (0.00s)
    --- PASS: TestFeatures/Create_cargo_with_units_exceeding_capacity_fails (0.00s)
    --- PASS: TestFeatures/Create_cargo_with_mismatched_inventory_sum_fails (0.00s)
    --- PASS: TestFeatures/Has_item_returns_true_when_item_exists (0.00s)
    --- PASS: TestFeatures/Has_item_returns_false_when_insufficient_units (0.00s)
    --- PASS: TestFeatures/Has_item_returns_false_when_item_not_present (0.00s)
    --- PASS: TestFeatures/Get_item_units_returns_correct_amount (0.00s)
    --- PASS: TestFeatures/Get_item_units_returns_zero_for_non-existent_item (0.00s)
    --- PASS: TestFeatures/Has_items_other_than_specific_symbol (0.00s)
    --- PASS: TestFeatures/Has_no_items_other_than_specific_symbol (0.00s)
    --- PASS: TestFeatures/Calculate_available_capacity_with_empty_cargo (0.00s)
    --- PASS: TestFeatures/Calculate_available_capacity_with_partial_cargo (0.00s)
    --- PASS: TestFeatures/Calculate_available_capacity_with_full_cargo (0.00s)
    --- PASS: TestFeatures/Is_empty_returns_true_when_no_cargo (0.00s)
    --- PASS: TestFeatures/Is_empty_returns_false_when_cargo_present (0.00s)
    --- PASS: TestFeatures/Is_full_returns_true_when_at_capacity (0.00s)
    --- PASS: TestFeatures/Is_full_returns_false_when_below_capacity (0.00s)
    --- PASS: TestFeatures/Is_full_returns_false_when_empty (0.00s)
    --- PASS: TestFeatures/Get_other_items_from_cargo_with_multiple_types (0.00s)
    --- PASS: TestFeatures/Get_other_items_returns_empty_when_only_specified_item_exists (0.00s)
    --- PASS: TestFeatures/Get_other_items_from_empty_cargo (0.00s)
    --- PASS: TestFeatures/Calculate_cruise_mode_fuel_cost (0.00s)
    --- PASS: TestFeatures/Calculate_drift_mode_fuel_cost (0.00s)
    --- PASS: TestFeatures/Calculate_burn_mode_fuel_cost (0.00s)
    --- PASS: TestFeatures/Calculate_stealth_mode_fuel_cost (0.00s)
    --- PASS: TestFeatures/Fuel_cost_for_zero_distance_is_zero (0.00s)
    --- PASS: TestFeatures/Minimum_fuel_cost_is_1_for_very_small_distances (0.00s)
    --- PASS: TestFeatures/Drift_mode_has_minimal_fuel_consumption (0.00s)
    --- PASS: TestFeatures/Calculate_cruise_mode_travel_time (0.00s)
    --- PASS: TestFeatures/Calculate_drift_mode_travel_time (0.00s)
    --- PASS: TestFeatures/Calculate_burn_mode_travel_time (0.00s)
    --- PASS: TestFeatures/Calculate_stealth_mode_travel_time (0.00s)
    --- PASS: TestFeatures/Travel_time_for_zero_distance_is_zero (0.00s)
    --- PASS: TestFeatures/Minimum_travel_time_is_1_for_very_small_distances (0.00s)
    --- PASS: TestFeatures/Higher_speed_reduces_travel_time (0.00s)
    --- PASS: TestFeatures/Select_burn_mode_with_high_fuel_and_safety_margin (0.00s)
    --- PASS: TestFeatures/Select_cruise_mode_with_medium_fuel (0.00s)
    --- PASS: TestFeatures/Select_drift_mode_with_low_fuel (0.00s)
    --- PASS: TestFeatures/Select_burn_with_exact_fuel_for_burn_plus_safety (0.00s)
    --- PASS: TestFeatures/Select_cruise_when_burn_would_exceed_safety (0.00s)
    --- PASS: TestFeatures/Select_drift_when_cruise_would_exceed_safety (0.00s)
    --- PASS: TestFeatures/Always_select_fastest_mode_that_maintains_safety_margin (0.00s)
    --- PASS: TestFeatures/Get_cruise_mode_name (0.00s)
    --- PASS: TestFeatures/Get_drift_mode_name (0.00s)
    --- PASS: TestFeatures/Get_burn_mode_name (0.00s)
    --- PASS: TestFeatures/Get_stealth_mode_name (0.00s)
    --- PASS: TestFeatures/Create_fuel_with_valid_data (0.00s)
    --- PASS: TestFeatures/Create_fuel_with_negative_current_fails (0.00s)
    --- PASS: TestFeatures/Create_fuel_with_negative_capacity_fails (0.00s)
    --- PASS: TestFeatures/Create_fuel_with_current_exceeding_capacity_fails (0.00s)
    --- PASS: TestFeatures/Create_fuel_at_full_capacity_succeeds (0.00s)
    --- PASS: TestFeatures/Create_fuel_at_zero_capacity_succeeds (0.00s)
    --- PASS: TestFeatures/Calculate_fuel_percentage (0.00s)
    --- PASS: TestFeatures/Calculate_fuel_percentage_when_full (0.00s)
    --- PASS: TestFeatures/Calculate_fuel_percentage_when_empty (0.00s)
    --- PASS: TestFeatures/Calculate_fuel_percentage_with_zero_capacity_returns_zero (0.00s)
    --- PASS: TestFeatures/Consume_fuel_returns_new_fuel_object (0.00s)
    --- PASS: TestFeatures/Consume_negative_fuel_fails (0.00s)
    --- PASS: TestFeatures/Consume_more_fuel_than_available_sets_to_zero (0.00s)
    --- PASS: TestFeatures/Consume_all_fuel#01 (0.00s)
    --- PASS: TestFeatures/Consume_zero_fuel_returns_same_values (0.00s)
    --- PASS: TestFeatures/Original_fuel_object_is_unchanged_after_consume (0.00s)
    --- PASS: TestFeatures/Add_fuel_returns_new_fuel_object (0.00s)
    --- PASS: TestFeatures/Add_negative_fuel_fails (0.00s)
    --- PASS: TestFeatures/Add_fuel_caps_at_capacity (0.00s)
    --- PASS: TestFeatures/Add_fuel_to_empty_tank (0.00s)
    --- PASS: TestFeatures/Add_zero_fuel_returns_same_values (0.00s)
    --- PASS: TestFeatures/Original_fuel_object_is_unchanged_after_add (0.00s)
    --- PASS: TestFeatures/Can_travel_with_sufficient_fuel (0.00s)
    --- PASS: TestFeatures/Cannot_travel_with_insufficient_fuel (0.00s)
    --- PASS: TestFeatures/Can_travel_with_exact_fuel_and_no_safety_margin (0.00s)
    --- PASS: TestFeatures/Cannot_travel_with_exact_fuel_but_with_safety_margin (0.01s)
    --- PASS: TestFeatures/Is_full_when_at_capacity (0.00s)
    --- PASS: TestFeatures/Is_not_full_when_below_capacity (0.00s)
    --- PASS: TestFeatures/Is_not_full_when_empty (0.01s)
    --- PASS: TestFeatures/Create_waypoint_with_valid_data (0.00s)
    --- PASS: TestFeatures/Create_waypoint_with_empty_symbol_fails (0.00s)
    --- PASS: TestFeatures/Calculate_distance_between_two_waypoints (0.00s)
    --- PASS: TestFeatures/Calculate_distance_to_same_waypoint_is_zero (0.00s)
    --- PASS: TestFeatures/Calculate_distance_with_negative_coordinates (0.01s)
    --- PASS: TestFeatures/Distance_calculation_is_symmetric (0.00s)
    --- PASS: TestFeatures/Check_if_waypoint_is_orbital_of_another (0.00s)
    --- PASS: TestFeatures/Check_waypoint_is_not_orbital_of_unrelated_waypoint (0.00s)
    --- PASS: TestFeatures/Orbital_relationship_is_bidirectional (0.00s)
    --- FAIL: TestFeatures/Create_valid_market_with_trade_goods (0.00s)
    --- FAIL: TestFeatures/Create_valid_market_with_no_trade_goods (0.00s)
    --- FAIL: TestFeatures/Cannot_create_market_with_empty_waypoint_symbol (0.00s)
    --- PASS: TestFeatures/Get_existing_trade_good (0.01s)
    --- PASS: TestFeatures/Get_non-existent_trade_good (0.00s)
    --- PASS: TestFeatures/Get_transaction_limit_for_existing_good (0.01s)
    --- PASS: TestFeatures/Get_transaction_limit_for_non-existent_good_returns_unlimited (0.00s)
    --- PASS: TestFeatures/Check_market_has_good_(true) (0.00s)
    --- PASS: TestFeatures/Check_market_has_good_(false) (0.00s)
    --- PASS: TestFeatures/Accept_unaccepted_contract (0.00s)
    --- PASS: TestFeatures/Accept_already_accepted_contract (0.00s)
    --- PASS: TestFeatures/Accept_non-existent_contract (0.00s)
    --- PASS: TestFeatures/Accept_contract_with_API_integration (0.00s)
    --- PASS: TestFeatures/Single_contract_workflow_end-to-end (0.00s)
    --- PASS: TestFeatures/Resume_existing_active_contract_(idempotency) (0.00s)
    --- PASS: TestFeatures/Multi-trip_delivery_when_cargo_capacity_is_less_than_required_units (0.00s)
    --- PASS: TestFeatures/Jettison_wrong_cargo_before_purchase_when_cargo_is_full (0.00s)
    --- PASS: TestFeatures/Jettison_wrong_cargo_when_ship_has_mixed_cargo_and_needs_more_space (0.00s)
    --- PASS: TestFeatures/Transaction_splitting_when_market_has_transaction_limits (0.00s)
    --- PASS: TestFeatures/Multiple_iterations_with_profit_tracking (0.00s)
    --- PASS: TestFeatures/Graceful_error_handling_-_continue_to_next_iteration_on_failure (0.00s)
    --- PASS: TestFeatures/Unprofitable_contract_still_accepted_(matches_Python_behavior) (0.00s)
    --- PASS: TestFeatures/Deliver_cargo_for_valid_delivery#01 (0.00s)
    --- PASS: TestFeatures/Deliver_remaining_cargo_completes_delivery#01 (0.00s)
    --- PASS: TestFeatures/Cannot_deliver_more_than_required#01 (0.00s)
    --- PASS: TestFeatures/Cannot_deliver_invalid_trade_symbol#01 (0.00s)
    --- PASS: TestFeatures/Cannot_deliver_when_contract_not_found (0.00s)
    --- PASS: TestFeatures/Cannot_deliver_when_player_not_found (0.00s)
    --- FAIL: TestFeatures/Dock_ship_when_already_docked (0.00s)
    --- FAIL: TestFeatures/Dock_ship_when_in_orbit (0.00s)
    --- FAIL: TestFeatures/Cannot_dock_ship_when_in_transit (0.00s)
    --- PASS: TestFeatures/Cannot_dock_ship_that_does_not_exist (0.00s)
    --- PASS: TestFeatures/Cannot_dock_ship_belonging_to_different_player (0.00s)
    --- PASS: TestFeatures/Profitable_contract_with_single_delivery (0.00s)
    --- PASS: TestFeatures/Acceptable_small_loss_within_threshold (0.00s)
    --- PASS: TestFeatures/Unacceptable_loss_exceeding_threshold (0.00s)
    --- PASS: TestFeatures/Multi-delivery_contract (0.01s)
    --- PASS: TestFeatures/No_cheapest_market_found (0.00s)
    --- PASS: TestFeatures/Ship_not_found (0.01s)
    --- PASS: TestFeatures/Contract_with_partially_fulfilled_deliveries (0.00s)
    --- PASS: TestFeatures/Multiple_deliveries_with_same_trade_symbol (0.00s)
    --- PASS: TestFeatures/Fulfill_contract_with_all_deliveries_complete (0.00s)
    --- PASS: TestFeatures/Cannot_fulfill_contract_with_incomplete_deliveries (0.00s)
    --- PASS: TestFeatures/Fulfill_non-existent_contract (0.00s)
    --- PASS: TestFeatures/Fulfill_contract_without_valid_player (0.00s)
    --- PASS: TestFeatures/Fulfill_contract_with_API_integration (0.00s)
    --- PASS: TestFeatures/Jettison_cargo_successfully_from_ship_in_orbit (0.00s)
    --- PASS: TestFeatures/Jettison_all_cargo_of_a_type (0.00s)
    --- PASS: TestFeatures/Cannot_jettison_more_cargo_than_ship_has (0.00s)
    --- PASS: TestFeatures/Cannot_jettison_cargo_ship_doesn't_have_at_all (0.00s)
    --- PASS: TestFeatures/Ship_not_found#01 (0.00s)
    --- PASS: TestFeatures/Auto-orbit_ship_before_jettisoning_when_docked (0.00s)
    --- PASS: TestFeatures/Load_graph_from_database_cache_when_available (0.00s)
    --- PASS: TestFeatures/Build_graph_from_API_when_cache_is_empty (0.00s)
    --- PASS: TestFeatures/Merge_graph_structure_with_waypoint_trait_data (0.00s)
    --- PASS: TestFeatures/Reject_navigation_with_empty_waypoint_cache (0.00s)
    --- PASS: TestFeatures/Reject_navigation_when_ship_location_missing_from_cache (0.00s)
    --- PASS: TestFeatures/Reject_navigation_when_destination_missing_from_cache (0.00s)
    --- PASS: TestFeatures/Route_not_found_-_provide_detailed_statistics (0.00s)
    --- PASS: TestFeatures/Ship_already_at_destination_-_return_success_immediately (0.00s)
    --- PASS: TestFeatures/Wait_for_previous_command_completion_before_starting_new_navigation (0.00s)
    --- PASS: TestFeatures/Opportunistically_refuel_when_arriving_at_fuel_station_with_less_than_90%_fuel (0.00s)
    --- PASS: TestFeatures/Skip_opportunistic_refuel_when_fuel_is_at_or_above_90% (0.00s)
    --- PASS: TestFeatures/Skip_opportunistic_refuel_at_non-fuel-station (0.00s)
    --- PASS: TestFeatures/Skip_opportunistic_refuel_when_segment_already_requires_refuel (0.00s)
    --- PASS: TestFeatures/Refuel_before_departure_when_DRIFT_mode_planned_at_fuel_station (0.00s)
    --- PASS: TestFeatures/Skip_pre-departure_refuel_when_using_CRUISE_mode (0.00s)
    --- PASS: TestFeatures/Skip_pre-departure_refuel_when_fuel_is_at_or_above_90% (0.00s)
    --- PASS: TestFeatures/Skip_pre-departure_refuel_when_not_at_fuel_station (0.00s)
    --- PASS: TestFeatures/Refuel_at_start_location_when_route_requires_it (0.00s)
    --- PASS: TestFeatures/Set_flight_mode_before_each_navigation_segment (0.00s)
    --- PASS: TestFeatures/Wait_for_ship_to_arrive_after_navigation (0.00s)
    --- PASS: TestFeatures/Handle_arrival_time_in_the_past_-_ship_already_arrived (0.00s)
    --- PASS: TestFeatures/Re-sync_ship_state_after_every_API_call (0.00s)
    --- PASS: TestFeatures/Mark_route_as_failed_when_navigation_fails (0.00s)
    --- PASS: TestFeatures/Handle_dock_failure_during_refuel_sequence (0.00s)
    --- PASS: TestFeatures/Execute_multi-segment_route_with_planned_refueling (0.00s)
    --- PASS: TestFeatures/Execute_route_with_opportunistic_and_planned_refueling (0.00s)
    --- PASS: TestFeatures/Ship_transitions_through_states_during_navigation (0.00s)
    --- PASS: TestFeatures/Refuel_sequence_follows_dock_orbit_pattern (0.00s)
    --- PASS: TestFeatures/Ship_with_zero_fuel_capacity_navigates_without_refueling (0.00s)
    --- PASS: TestFeatures/Single_waypoint_system_-_already_at_destination (0.00s)
    --- PASS: TestFeatures/Route_with_only_refuel_before_departure (0.00s)
    --- PASS: TestFeatures/Calculate_correct_wait_time_with_3_second_buffer (0.00s)
    --- PASS: TestFeatures/Zero_wait_time_for_instant_arrival (0.00s)
    --- PASS: TestFeatures/Successfully_navigate_ship_from_orbit (0.00s)
    --- PASS: TestFeatures/Navigate_ship_that_is_docked_(auto-orbits_first) (0.00s)
    --- PASS: TestFeatures/Ship_already_at_destination_(idempotent) (0.00s)
    --- PASS: TestFeatures/Invalid_destination_waypoint (0.00s)
    --- PASS: TestFeatures/Ship_already_in_transit (0.00s)
    --- PASS: TestFeatures/Ship_not_found#02 (0.00s)
    --- PASS: TestFeatures/Navigate_with_custom_flight_mode (0.00s)
    --- PASS: TestFeatures/Extract_system_symbol_from_valid_waypoint_symbol (0.00s)
    --- PASS: TestFeatures/Extract_system_symbol_from_waypoint_with_multiple_hyphens (0.00s)
    --- PASS: TestFeatures/Extract_system_symbol_from_waypoint_without_hyphen (0.00s)
    --- PASS: TestFeatures/Extract_system_symbol_from_single_segment_waypoint (0.00s)
    --- PASS: TestFeatures/Calculate_wait_time_for_future_arrival (0.00s)
    --- PASS: TestFeatures/Calculate_wait_time_for_past_arrival_returns_zero (0.00s)
    --- PASS: TestFeatures/Calculate_wait_time_handles_Z_suffix (0.00s)
    --- PASS: TestFeatures/Calculate_wait_time_handles_+00:00_suffix (0.00s)
    --- PASS: TestFeatures/Calculate_wait_time_for_invalid_time_string_returns_zero (0.00s)
    --- FAIL: TestFeatures/Negotiate_new_contract_successfully (0.00s)
    --- PASS: TestFeatures/Resume_existing_contract_when_agent_already_has_one_(error_4511) (0.00s)
    --- PASS: TestFeatures/Dock_ship_before_negotiating (0.00s)
    --- PASS: TestFeatures/Cannot_negotiate_contract_for_ship_that_does_not_exist (0.00s)
    --- PASS: TestFeatures/Cannot_negotiate_contract_with_ship_in_transit (0.01s)
    --- PASS: TestFeatures/Orbit_ship_when_already_in_orbit (0.00s)
    --- PASS: TestFeatures/Orbit_ship_when_docked (0.01s)
    --- PASS: TestFeatures/Cannot_orbit_ship_when_in_transit (0.00s)
    --- PASS: TestFeatures/Cannot_orbit_ship_that_does_not_exist (0.00s)
    --- PASS: TestFeatures/Cannot_orbit_ship_belonging_to_different_player (0.00s)
    --- PASS: TestFeatures/Purchase_cargo_successfully (0.00s)
    --- PASS: TestFeatures/Cannot_purchase_when_ship_not_docked (0.00s)
    --- PASS: TestFeatures/Cannot_purchase_more_than_cargo_space (0.00s)
    --- PASS: TestFeatures/Ship_not_found#03 (0.00s)
    --- PASS: TestFeatures/Refuel_ship_to_full_capacity_at_fuel_station (0.00s)
    --- PASS: TestFeatures/Refuel_ship_with_specific_units_at_fuel_station (0.00s)
    --- PASS: TestFeatures/Refuel_ship_that_already_has_full_fuel_(idempotent) (0.00s)
    --- PASS: TestFeatures/Auto-dock_ship_before_refueling_when_in_orbit (0.00s)
    --- PASS: TestFeatures/Cannot_refuel_ship_not_at_fuel_station (0.00s)
    --- PASS: TestFeatures/Cannot_refuel_ship_that_does_not_exist (0.00s)
    --- PASS: TestFeatures/Execute_single-segment_route (0.00s)
    --- PASS: TestFeatures/Execute_multi-segment_route (0.00s)
    --- PASS: TestFeatures/Execute_route_with_refuel_before_departure (0.00s)
    --- PASS: TestFeatures/Execute_route_with_mid-route_refueling (0.00s)
    --- PASS: TestFeatures/Execute_route_with_opportunistic_refueling (0.00s)
    --- FAIL: TestFeatures/Execute_route_with_pre-departure_refuel_prevention (0.00s)
    --- FAIL: TestFeatures/Handle_ship_already_in_transit_-_wait_for_arrival_first (0.00s)
    --- FAIL: TestFeatures/Handle_route_execution_failure_-_segment_navigation_fails (0.00s)
    --- PASS: TestFeatures/Plan_simple_single-segment_direct_route (0.00s)
    --- PASS: TestFeatures/Plan_multi-segment_route_with_mid-route_refueling (0.00s)
    --- PASS: TestFeatures/Plan_route_with_refuel_before_departure_flag (0.00s)
    --- PASS: TestFeatures/Plan_route_with_BURN_flight_mode (0.00s)
    --- PASS: TestFeatures/Plan_route_with_DRIFT_flight_mode (0.00s)
    --- PASS: TestFeatures/Plan_route_with_STEALTH_flight_mode (0.00s)
    --- PASS: TestFeatures/Handle_empty_route_response_from_routing_client (0.00s)
    --- PASS: TestFeatures/Handle_routing_client_error (0.00s)
    --- PASS: TestFeatures/Convert_complex_multi-step_route_correctly (0.00s)
    --- PASS: TestFeatures/Handle_route_with_only_REFUEL_steps_(edge_case) (0.00s)
    --- PASS: TestFeatures/Generate_correct_route_ID (0.00s)
    --- PASS: TestFeatures/Handle_missing_waypoint_in_cache_during_route_conversion (0.00s)
    --- PASS: TestFeatures/Successfully_get_market_data (0.00s)
    --- PASS: TestFeatures/Query_non-existent_market_returns_nil (0.00s)
    --- PASS: TestFeatures/Successfully_list_all_markets_in_a_system (0.00s)
    --- PASS: TestFeatures/Filter_markets_by_max_age (0.00s)
    --- PASS: TestFeatures/Query_empty_system_returns_empty_list (0.00s)
    --- PASS: TestFeatures/Query_with_zero_max_age_returns_all_markets (0.00s)
    --- PASS: TestFeatures/Deploy_single_ship_to_scout_all_markets (0.00s)
    --- PASS: TestFeatures/Deploy_multiple_ships_with_VRP_optimization (0.00s)
    --- PASS: TestFeatures/Idempotent_container_reuse_-_ship_already_has_active_container (0.00s)
    --- PASS: TestFeatures/Partial_container_reuse_-_some_ships_have_containers (0.00s)
    --- PASS: TestFeatures/Early_return_when_all_ships_already_have_containers (0.00s)
    --- PASS: TestFeatures/Scout_a_single-market_tour_(stationary_scout) (0.00s)
    --- PASS: TestFeatures/Scout_a_multi-market_tour (0.00s)
    --- PASS: TestFeatures/Idempotent_tour_rotation_-_resume_from_current_position (0.00s)
    --- PASS: TestFeatures/Successfully_set_flight_mode_to_CRUISE (0.00s)
    --- PASS: TestFeatures/Successfully_set_flight_mode_to_DRIFT (0.01s)
    --- PASS: TestFeatures/Successfully_set_flight_mode_to_BURN (0.00s)
    --- PASS: TestFeatures/Successfully_set_flight_mode_to_STEALTH (0.00s)
    --- PASS: TestFeatures/Ship_not_found#04 (0.00s)
    --- PASS: TestFeatures/Invalid_flight_mode (0.00s)
    --- PASS: TestFeatures/Cannot_set_flight_mode_for_ship_belonging_to_different_player (0.00s)
    --- PASS: TestFeatures/Upsert_market_data_for_the_first_time (0.00s)
    --- PASS: TestFeatures/Upsert_market_data_updates_existing_record (0.00s)
    --- PASS: TestFeatures/Get_market_data_by_waypoint (0.00s)
    --- PASS: TestFeatures/Get_non-existent_market_data_returns_nil (0.00s)
    --- PASS: TestFeatures/List_markets_in_system_with_fresh_data (0.00s)
    --- PASS: TestFeatures/List_markets_in_system_filters_stale_data (0.00s)
    --- PASS: TestFeatures/List_markets_in_empty_system_returns_empty_list (0.00s)
    --- PASS: TestFeatures/Upsert_with_empty_trade_goods_list (0.00s)
    --- PASS: TestFeatures/Different_players_can_have_separate_market_data_for_same_waypoint (0.00s)
    --- PASS: TestFeatures/Database_connection_pool_maintains_5_connections (0.00s)
    --- PASS: TestFeatures/Database_connection_retry_on_transient_failure_(max_3_attempts) (0.00s)
    --- PASS: TestFeatures/Database_connection_exponential_backoff_(1s,_2s,_4s) (0.00s)
    --- PASS: TestFeatures/Database_connection_fails_after_max_retries (0.01s)
    --- PASS: TestFeatures/Database_transaction_rollback_on_error (0.00s)
    --- PASS: TestFeatures/Database_transaction_commit_on_success (0.00s)
    --- FAIL: TestFeatures/Database_query_timeout_after_30_seconds (0.00s)
    --- PASS: TestFeatures/Database_connection_health_check_on_borrow (0.00s)
    --- PASS: TestFeatures/Database_graceful_close_releases_all_connections (0.02s)
    --- PASS: TestFeatures/Database_connection_pooling_prevents_exhaustion (0.00s)
    --- PASS: TestFeatures/Save_single_waypoint_to_database (0.01s)
    --- PASS: TestFeatures/Save_multiple_waypoints_for_a_system_(batch_insert) (0.00s)
    --- PASS: TestFeatures/Retrieve_cached_waypoint_by_symbol (0.00s)
    --- PASS: TestFeatures/List_all_waypoints_in_a_system (0.00s)
    --- PASS: TestFeatures/Filter_waypoints_by_trait_(SHIPYARD) (0.00s)
    --- PASS: TestFeatures/Filter_waypoints_by_trait_(MARKETPLACE) (0.01s)
    --- PASS: TestFeatures/Filter_waypoints_by_type_(PLANET) (0.01s)
    --- PASS: TestFeatures/Filter_waypoints_by_has_fuel_flag (0.00s)
    --- PASS: TestFeatures/Return_empty_list_when_no_waypoints_match_trait_filter (0.02s)
    --- PASS: TestFeatures/Return_empty_list_when_no_waypoints_match_type_filter (0.00s)
    --- PASS: TestFeatures/Upsert_waypoint_(update_existing_with_new_data) (0.00s)
    --- PASS: TestFeatures/Preserve_waypoint_orbitals_when_saving (0.03s)
    --- PASS: TestFeatures/Preserve_waypoint_coordinates_accurately_(no_rounding_errors) (0.00s)
    --- PASS: TestFeatures/Deduplication_by_symbol_(same_symbol_overwrites) (0.02s)
    --- PASS: TestFeatures/Container_transitions_to_RUNNING_on_successful_start (0.00s)
    --- PASS: TestFeatures/Container_transitions_to_COMPLETED_on_successful_completion (0.00s)
    --- FAIL: TestFeatures/Container_transitions_to_FAILED_on_error (0.00s)
    --- PASS: TestFeatures/Container_stays_in_STOPPING_during_graceful_shutdown (0.00s)
    --- PASS: TestFeatures/Container_finalizes_to_STOPPED_after_graceful_shutdown (0.00s)
    --- PASS: TestFeatures/Quick-running_containers_properly_transition_status (0.00s)
    --- PASS: TestFeatures/Container_status_reflects_completion_even_with_stop_timestamp_set (0.00s)
    --- FAIL: TestFeatures/List_containers_shows_correct_status_after_completion (0.00s)
    --- PASS: TestFeatures/Completed_containers_can_be_queried_by_status (0.00s)
    --- FAIL: TestFeatures/Running_containers_excluded_from_finished_containers_list (0.01s)
    --- PASS: TestFeatures/Container_tracks_start_and_stop_timestamps (0.00s)
    --- PASS: TestFeatures/Container_started_at_persists_through_state_transitions (0.00s)
    --- PASS: TestFeatures/Container_stopped_at_is_set_for_all_terminal_states (0.00s)
    --- FAIL: TestFeatures/Container_increments_iteration_count_on_loop (0.00s)
    --- FAIL: TestFeatures/Container_respects_max_iterations_limit (0.00s)
    --- FAIL: TestFeatures/Container_with_-1_iterations_runs_indefinitely (0.00s)
    --- FAIL: TestFeatures/Container_exits_after_max_iterations_reached (0.00s)
    --- FAIL: TestFeatures/Container_restart_increments_restart_count (0.01s)
    --- FAIL: TestFeatures/Container_respects_max_restarts_policy_(3) (0.00s)
    --- FAIL: TestFeatures/Container_cannot_restart_after_exceeding_max_restarts (0.00s)
    --- FAIL: TestFeatures/Container_maintains_player_id_through_restarts (0.00s)
    --- PASS: TestFeatures/Container_maintains_ship_assignment_through_restarts (0.00s)
    --- FAIL: TestFeatures/Container_tracks_multiple_restart_attempts (0.01s)
    --- PASS: TestFeatures/Multiple_containers_can_run_simultaneously (0.00s)
    --- PASS: TestFeatures/Container_IDs_are_unique_and_sequential (0.00s)
    --- FAIL: TestFeatures/Daemon_tracks_containers_independently (0.00s)
    --- PASS: TestFeatures/Completed_containers_can_be_removed_without_stopping (0.00s)
    --- PASS: TestFeatures/Failed_containers_can_be_removed_without_stopping (0.00s)
    --- PASS: TestFeatures/Stopped_containers_can_be_removed_without_stopping (0.00s)
    --- PASS: TestFeatures/Running_containers_must_be_stopped_before_removal (0.00s)
    --- FAIL: TestFeatures/Container_cannot_transition_from_COMPLETED_to_RUNNING (0.01s)
    --- FAIL: TestFeatures/Container_cannot_transition_from_FAILED_to_RUNNING_without_restart (0.00s)
    --- FAIL: TestFeatures/Container_cannot_be_completed_if_not_running (0.00s)
    --- PASS: TestFeatures/Container_stopped_at_timestamp_is_immutable_once_set (0.00s)
    --- PASS: TestFeatures/Container_logs_INFO_messages_to_database (0.00s)
    --- PASS: TestFeatures/Container_logs_ERROR_messages_to_database (0.00s)
    --- PASS: TestFeatures/Container_logs_include_timestamp_and_container_id (0.00s)
    --- PASS: TestFeatures/Container_logs_are_queryable_by_container_id (0.01s)
    --- PASS: TestFeatures/Container_logs_are_queryable_by_log_level (0.00s)
    --- PASS: TestFeatures/Container_logs_deduplicate_within_60_seconds (0.00s)
    --- PASS: TestFeatures/Container_logs_support_pagination_with_limit_and_offset (0.00s)
    --- PASS: TestFeatures/Daemon_server_starts_and_listens_on_Unix_socket (0.00s)
    --- PASS: TestFeatures/Daemon_server_removes_existing_socket_on_startup (0.00s)
    --- PASS: TestFeatures/Daemon_server_fails_to_start_if_socket_path_is_invalid (0.00s)
    --- PASS: TestFeatures/Daemon_server_accepts_gRPC_client_connections (0.00s)
    --- PASS: TestFeatures/Daemon_server_handles_HealthCheck_request (0.00s)
    --- PASS: TestFeatures/Daemon_server_handles_NavigateShip_request (0.00s)
    --- PASS: TestFeatures/Daemon_server_creates_container_for_navigation_operation (0.00s)
    --- PASS: TestFeatures/Daemon_server_returns_container_ID_immediately (0.00s)
    --- PASS: TestFeatures/Daemon_server_continues_operation_in_background (0.00s)
    --- PASS: TestFeatures/Daemon_server_tracks_multiple_concurrent_operations (0.00s)
    --- PASS: TestFeatures/Daemon_server_initiates_graceful_shutdown_on_SIGTERM (0.00s)
    --- PASS: TestFeatures/Daemon_server_waits_for_containers_during_shutdown_(within_timeout) (0.00s)
    --- PASS: TestFeatures/Daemon_server_enforces_30-second_shutdown_timeout (0.00s)
    --- PASS: TestFeatures/Daemon_server_stops_all_containers_on_forceful_shutdown (0.01s)
    --- PASS: TestFeatures/Daemon_server_closes_database_connections_on_shutdown (0.00s)
    --- PASS: TestFeatures/Daemon_server_releases_all_ship_assignments_on_shutdown (0.01s)
    --- PASS: TestFeatures/Daemon_server_removes_Unix_socket_on_shutdown (0.00s)
    --- PASS: TestFeatures/Daemon_server_prevents_memory_leaks_during_shutdown (0.00s)
    --- PASS: TestFeatures/Daemon_server_handles_SIGINT_signal_(Ctrl+C) (0.00s)
    --- PASS: TestFeatures/Daemon_server_handles_repeated_shutdown_signals_gracefully (0.00s)
    --- PASS: TestFeatures/Daemon_server_completes_shutdown_even_with_failing_containers (0.00s)
    --- PASS: TestFeatures/Health_monitor_detects_stale_assignment_after_container_removed (0.01s)
    --- PASS: TestFeatures/Health_monitor_ignores_valid_assignments (0.04s)
    --- PASS: TestFeatures/Health_monitor_cleans_up_multiple_stale_assignments (0.01s)
    --- PASS: TestFeatures/Health_monitor_detects_stuck_IN_TRANSIT_ship (0.00s)
    --- PASS: TestFeatures/Health_monitor_distinguishes_between_stuck_and_slow_operations (0.00s)
    --- PASS: TestFeatures/Health_monitor_detects_missing_arrival_for_completed_route (0.09s)
    --- PASS: TestFeatures/Health_monitor_triggers_recovery_for_stuck_ship (0.00s)
    --- PASS: TestFeatures/Health_monitor_recovery_succeeds_and_resumes_operation (0.00s)
    --- PASS: TestFeatures/Health_monitor_recovery_fails_and_marks_container_as_failed (0.00s)
    --- PASS: TestFeatures/Health_monitor_tracks_recovery_attempts_per_ship (0.01s)
    --- PASS: TestFeatures/Health_monitor_abandons_ship_after_max_recovery_attempts (0.00s)
    --- PASS: TestFeatures/Health_monitor_clears_healthy_ship_from_watch_list (0.00s)
    --- PASS: TestFeatures/Health_monitor_respects_cooldown_between_checks (0.00s)
    --- PASS: TestFeatures/Health_monitor_runs_after_cooldown_period_elapses (0.00s)
    --- PASS: TestFeatures/Health_monitor_detects_infinite_loop_in_navigation (0.00s)
    --- PASS: TestFeatures/Health_monitor_reports_metrics_on_recovery_success_rate (0.01s)
    --- PASS: TestFeatures/Ship_can_be_assigned_to_container (0.02s)
    --- PASS: TestFeatures/Ship_cannot_be_assigned_to_multiple_containers (0.01s)
    --- PASS: TestFeatures/Ship_assignment_persists_in_database (0.01s)
    --- PASS: TestFeatures/Ship_assignment_is_released_when_container_stops (0.01s)
    --- PASS: TestFeatures/Ship_assignment_is_released_when_container_fails (0.00s)
    --- PASS: TestFeatures/Ship_assignment_is_released_when_daemon_stops_gracefully (0.00s)
    --- PASS: TestFeatures/Orphaned_ship_assignments_are_cleaned_on_daemon_startup (0.00s)
    --- PASS: TestFeatures/Ship_assignment_includes_player_id_validation (0.00s)
    --- PASS: TestFeatures/Ship_assignment_prevents_concurrent_navigation_commands (0.00s)
    --- PASS: TestFeatures/Ship_assignment_allows_read-only_queries_during_lock (0.00s)
    --- PASS: TestFeatures/Ship_assignment_lock_timeout_after_30_minutes (0.01s)
    --- PASS: TestFeatures/Ship_assignment_reacquire_fails_if_still_locked (0.00s)
=== RUN   TestContainerLogging
[1;37mFeature:[0m Container Logging & Persistence
  As a daemon system
  I need containers to log messages to the database with deduplication
  So that I can query container logs by ID, level, and time range with pagination
=== RUN   TestContainerLogging/Container_logs_INFO_messages_to_database

  [1;37mScenario:[0m Container logs INFO messages to database                              [1;30m# features/daemon/container_logging.feature:10[0m
    [32mGiven[0m [32ma container log repository with in-memory database[0m                      [1;30m# container_logging_steps.go:400 -> *containerLoggingContext[0m
    [32mAnd[0m [32ma container with ID "test-container-1" for player 1[0m                       [1;30m# container_logging_steps.go:401 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI log an INFO message "Operation started successfully" for the container[0m [1;30m# container_logging_steps.go:404 -> *containerLoggingContext[0m
    [32mThen[0m [32mthe log should be persisted to the database[0m                              [1;30m# container_logging_steps.go:426 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe log level should be "INFO"[0m                                            [1;30m# container_logging_steps.go:427 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe log message should be "Operation started successfully"[0m                [1;30m# container_logging_steps.go:428 -> *containerLoggingContext[0m
=== RUN   TestContainerLogging/Container_logs_ERROR_messages_to_database

  [1;37mScenario:[0m Container logs ERROR messages to database                                    [1;30m# features/daemon/container_logging.feature:18[0m
    [32mGiven[0m [32ma container log repository with in-memory database[0m                             [1;30m# container_logging_steps.go:400 -> *containerLoggingContext[0m
    [32mAnd[0m [32ma container with ID "test-container-2" for player 1[0m                              [1;30m# container_logging_steps.go:401 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI log an ERROR message "Navigation failed: insufficient fuel" for the container[0m [1;30m# container_logging_steps.go:405 -> *containerLoggingContext[0m
    [32mThen[0m [32mthe log should be persisted to the database[0m                                     [1;30m# container_logging_steps.go:426 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe log level should be "ERROR"[0m                                                  [1;30m# container_logging_steps.go:427 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe log message should be "Navigation failed: insufficient fuel"[0m                 [1;30m# container_logging_steps.go:428 -> *containerLoggingContext[0m
=== RUN   TestContainerLogging/Container_logs_include_timestamp_and_container_id

  [1;37mScenario:[0m Container logs include timestamp and container_id               [1;30m# features/daemon/container_logging.feature:26[0m
    [32mGiven[0m [32ma container log repository with in-memory database[0m                [1;30m# container_logging_steps.go:400 -> *containerLoggingContext[0m
    [32mAnd[0m [32ma container with ID "test-container-3" for player 1[0m                 [1;30m# container_logging_steps.go:401 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI log an INFO message "Processing waypoint data" for the container[0m [1;30m# container_logging_steps.go:404 -> *containerLoggingContext[0m
    [32mThen[0m [32mthe log should be persisted to the database[0m                        [1;30m# container_logging_steps.go:426 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe log should have a container_id of "test-container-3"[0m            [1;30m# container_logging_steps.go:429 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe log should have a player_id of 1[0m                                [1;30m# container_logging_steps.go:430 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe log should have a timestamp within the last 5 seconds[0m           [1;30m# container_logging_steps.go:431 -> *containerLoggingContext[0m
=== RUN   TestContainerLogging/Container_logs_are_queryable_by_container_id

  [1;37mScenario:[0m Container logs are queryable by container_id        [1;30m# features/daemon/container_logging.feature:39[0m
    [32mGiven[0m [32ma container log repository with in-memory database[0m    [1;30m# container_logging_steps.go:400 -> *containerLoggingContext[0m
    [32mAnd[0m [32ma container with ID "query-test-1" for player 1[0m         [1;30m# container_logging_steps.go:401 -> *containerLoggingContext[0m
    [32mAnd[0m [32ma container with ID "query-test-2" for player 1[0m         [1;30m# container_logging_steps.go:401 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI log 3 INFO messages for container "query-test-1"[0m     [1;30m# container_logging_steps.go:406 -> *containerLoggingContext[0m
    [32mAnd[0m [32mI log 2 ERROR messages for container "query-test-2"[0m     [1;30m# container_logging_steps.go:407 -> *containerLoggingContext[0m
    [32mAnd[0m [32mI query logs for container "query-test-1" with limit 10[0m [1;30m# container_logging_steps.go:418 -> *containerLoggingContext[0m
    [32mThen[0m [32mI should receive exactly 3 log entries[0m                 [1;30m# container_logging_steps.go:432 -> *containerLoggingContext[0m
    [32mAnd[0m [32mall log entries should have container_id "query-test-1"[0m [1;30m# container_logging_steps.go:433 -> *containerLoggingContext[0m
=== RUN   TestContainerLogging/Container_logs_are_queryable_by_log_level

  [1;37mScenario:[0m Container logs are queryable by log level            [1;30m# features/daemon/container_logging.feature:49[0m
    [32mGiven[0m [32ma container log repository with in-memory database[0m     [1;30m# container_logging_steps.go:400 -> *containerLoggingContext[0m
    [32mAnd[0m [32ma container with ID "level-test-1" for player 1[0m          [1;30m# container_logging_steps.go:401 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI log 2 INFO messages for the container[0m                 [1;30m# container_logging_steps.go:408 -> *containerLoggingContext[0m
    [32mAnd[0m [32mI log 3 ERROR messages for the container[0m                 [1;30m# container_logging_steps.go:409 -> *containerLoggingContext[0m
    [32mAnd[0m [32mI log 1 WARNING message for the container[0m                [1;30m# container_logging_steps.go:410 -> *containerLoggingContext[0m
    [32mAnd[0m [32mI query logs for the container filtered by level "ERROR"[0m [1;30m# container_logging_steps.go:419 -> *containerLoggingContext[0m
    [32mThen[0m [32mI should receive exactly 3 log entries[0m                  [1;30m# container_logging_steps.go:432 -> *containerLoggingContext[0m
    [32mAnd[0m [32mall log entries should have level "ERROR"[0m                [1;30m# container_logging_steps.go:434 -> *containerLoggingContext[0m
=== RUN   TestContainerLogging/Container_logs_deduplicate_within_60_seconds

  [1;37mScenario:[0m Container logs deduplicate within 60 seconds                                     [1;30m# features/daemon/container_logging.feature:63[0m
    [32mGiven[0m [32ma container log repository with in-memory database[0m                                 [1;30m# container_logging_steps.go:400 -> *containerLoggingContext[0m
    [32mAnd[0m [32ma container with ID "dedup-test-1" for player 1[0m                                      [1;30m# container_logging_steps.go:401 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI log an INFO message "Duplicate message test" for the container[0m                    [1;30m# container_logging_steps.go:404 -> *containerLoggingContext[0m
    [32mAnd[0m [32mI log the same INFO message "Duplicate message test" 2 seconds later[0m                 [1;30m# container_logging_steps.go:414 -> *containerLoggingContext[0m
    [32mAnd[0m [32mI log the same INFO message "Duplicate message test" 30 seconds after the first log[0m  [1;30m# container_logging_steps.go:415 -> *containerLoggingContext[0m
    [32mThen[0m [32mI should receive exactly 1 log entry when querying[0m                                  [1;30m# container_logging_steps.go:420 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe log message should be "Duplicate message test"[0m                                   [1;30m# container_logging_steps.go:428 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI log the same INFO message "Duplicate message test" 65 seconds after the first log[0m [1;30m# container_logging_steps.go:415 -> *containerLoggingContext[0m
    [32mThen[0m [32mI should receive exactly 2 log entries when querying[0m                                [1;30m# container_logging_steps.go:421 -> *containerLoggingContext[0m
    [32mAnd[0m [32mboth entries should have the message "Duplicate message test"[0m                        [1;30m# container_logging_steps.go:435 -> *containerLoggingContext[0m
=== RUN   TestContainerLogging/Container_logs_support_pagination_with_limit_and_offset

  [1;37mScenario:[0m Container logs support pagination with limit and offset [1;30m# features/daemon/container_logging.feature:75[0m
    [32mGiven[0m [32ma container log repository with in-memory database[0m        [1;30m# container_logging_steps.go:400 -> *containerLoggingContext[0m
    [32mAnd[0m [32ma container with ID "pagination-test-1" for player 1[0m        [1;30m# container_logging_steps.go:401 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI log 15 unique INFO messages for the container[0m            [1;30m# container_logging_steps.go:411 -> *containerLoggingContext[0m
    [32mAnd[0m [32mI query logs with limit 5 and no offset[0m                     [1;30m# container_logging_steps.go:422 -> *containerLoggingContext[0m
    [32mThen[0m [32mI should receive exactly 5 log entries[0m                     [1;30m# container_logging_steps.go:432 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI query logs with limit 5 and offset 5[0m                     [1;30m# container_logging_steps.go:423 -> *containerLoggingContext[0m
    [32mThen[0m [32mI should receive exactly 5 log entries[0m                     [1;30m# container_logging_steps.go:432 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe log entries should be different from the first page[0m     [1;30m# container_logging_steps.go:436 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI query logs with limit 5 and offset 10[0m                    [1;30m# container_logging_steps.go:423 -> *containerLoggingContext[0m
    [32mThen[0m [32mI should receive exactly 5 log entries[0m                     [1;30m# container_logging_steps.go:432 -> *containerLoggingContext[0m
    [32mWhen[0m [32mI query logs with limit 10 and offset 10[0m                   [1;30m# container_logging_steps.go:423 -> *containerLoggingContext[0m
    [32mThen[0m [32mI should receive exactly 5 log entries[0m                     [1;30m# container_logging_steps.go:432 -> *containerLoggingContext[0m
    [32mAnd[0m [32mthe total count of all logs should be 15[0m                    [1;30m# container_logging_steps.go:437 -> *containerLoggingContext[0m

7 scenarios ([32m7 passed[0m)
58 steps ([32m58 passed[0m)
17.387792ms
--- PASS: TestContainerLogging (0.02s)
    --- PASS: TestContainerLogging/Container_logs_INFO_messages_to_database (0.00s)
    --- PASS: TestContainerLogging/Container_logs_ERROR_messages_to_database (0.00s)
    --- PASS: TestContainerLogging/Container_logs_include_timestamp_and_container_id (0.00s)
    --- PASS: TestContainerLogging/Container_logs_are_queryable_by_container_id (0.00s)
    --- PASS: TestContainerLogging/Container_logs_are_queryable_by_log_level (0.00s)
    --- PASS: TestContainerLogging/Container_logs_deduplicate_within_60_seconds (0.00s)
    --- PASS: TestContainerLogging/Container_logs_support_pagination_with_limit_and_offset (0.00s)
FAIL
FAIL	github.com/andrescamacho/spacetraders-go/test/bdd	7.785s
?   	github.com/andrescamacho/spacetraders-go/test/bdd/steps	[no test files]
FAIL
